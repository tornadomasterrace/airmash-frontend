!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=100)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e,t){this.x=e,this.y=t}add(e){this.x+=e,this.y+=e}divide(e){this.x/=e,this.y/=e}multiply(e){this.x*=e,this.y*=e}limit(e){this.divide(this.length()),this.multiply(e)}clone(){return new r(this.x,this.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}angle(){return Math.atan2(this.y,this.x)-Math.PI/2}ceil(e){this.x>e&&(this.x=e),this.y>e&&(this.y=e)}floor(e){this.x<e&&(this.x=e),this.y<e&&(this.y=e)}both(e){this.x=e,this.y=e}static zero(){return new r(0,0)}static diag(e){return new r(e,e)}static create(e,t){return new r(Math.sin(e)*t,-Math.cos(e)*t)}static createOff(e,t,n){return new r(e.x+Math.sin(t)*n,e.y-Math.cos(t)*n)}}},function(e,t,n){"use strict";t.__esModule=!0,t.autoDetectRenderer=t.Application=t.Filter=t.SpriteMaskFilter=t.Quad=t.RenderTarget=t.ObjectRenderer=t.WebGLManager=t.Shader=t.CanvasRenderTarget=t.TextureUvs=t.VideoBaseTexture=t.BaseRenderTexture=t.RenderTexture=t.BaseTexture=t.Texture=t.Spritesheet=t.CanvasGraphicsRenderer=t.GraphicsRenderer=t.GraphicsData=t.Graphics=t.TextMetrics=t.TextStyle=t.Text=t.SpriteRenderer=t.CanvasTinter=t.CanvasSpriteRenderer=t.Sprite=t.TransformBase=t.TransformStatic=t.Transform=t.Container=t.DisplayObject=t.Bounds=t.glCore=t.WebGLRenderer=t.CanvasRenderer=t.ticker=t.utils=t.settings=void 0;var r=n(2);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var i=n(5);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}));var o=n(7);Object.defineProperty(t,"glCore",{enumerable:!0,get:function(){return z(o).default}});var s=n(33);Object.defineProperty(t,"Bounds",{enumerable:!0,get:function(){return z(s).default}});var a=n(58);Object.defineProperty(t,"DisplayObject",{enumerable:!0,get:function(){return z(a).default}});var l=n(18);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return z(l).default}});var u=n(60);Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return z(u).default}});var c=n(59);Object.defineProperty(t,"TransformStatic",{enumerable:!0,get:function(){return z(c).default}});var h=n(35);Object.defineProperty(t,"TransformBase",{enumerable:!0,get:function(){return z(h).default}});var d=n(36);Object.defineProperty(t,"Sprite",{enumerable:!0,get:function(){return z(d).default}});var p=n(132);Object.defineProperty(t,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return z(p).default}});var f=n(40);Object.defineProperty(t,"CanvasTinter",{enumerable:!0,get:function(){return z(f).default}});var g=n(135);Object.defineProperty(t,"SpriteRenderer",{enumerable:!0,get:function(){return z(g).default}});var m=n(151);Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return z(m).default}});var v=n(71);Object.defineProperty(t,"TextStyle",{enumerable:!0,get:function(){return z(v).default}});var y=n(72);Object.defineProperty(t,"TextMetrics",{enumerable:!0,get:function(){return z(y).default}});var b=n(153);Object.defineProperty(t,"Graphics",{enumerable:!0,get:function(){return z(b).default}});var _=n(73);Object.defineProperty(t,"GraphicsData",{enumerable:!0,get:function(){return z(_).default}});var T=n(155);Object.defineProperty(t,"GraphicsRenderer",{enumerable:!0,get:function(){return z(T).default}});var x=n(162);Object.defineProperty(t,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return z(x).default}});var w=n(163);Object.defineProperty(t,"Spritesheet",{enumerable:!0,get:function(){return z(w).default}});var E=n(15);Object.defineProperty(t,"Texture",{enumerable:!0,get:function(){return z(E).default}});var S=n(17);Object.defineProperty(t,"BaseTexture",{enumerable:!0,get:function(){return z(S).default}});var M=n(39);Object.defineProperty(t,"RenderTexture",{enumerable:!0,get:function(){return z(M).default}});var I=n(65);Object.defineProperty(t,"BaseRenderTexture",{enumerable:!0,get:function(){return z(I).default}});var P=n(62);Object.defineProperty(t,"VideoBaseTexture",{enumerable:!0,get:function(){return z(P).default}});var A=n(63);Object.defineProperty(t,"TextureUvs",{enumerable:!0,get:function(){return z(A).default}});var O=n(66);Object.defineProperty(t,"CanvasRenderTarget",{enumerable:!0,get:function(){return z(O).default}});var C=n(21);Object.defineProperty(t,"Shader",{enumerable:!0,get:function(){return z(C).default}});var R=n(20);Object.defineProperty(t,"WebGLManager",{enumerable:!0,get:function(){return z(R).default}});var k=n(25);Object.defineProperty(t,"ObjectRenderer",{enumerable:!0,get:function(){return z(k).default}});var D=n(27);Object.defineProperty(t,"RenderTarget",{enumerable:!0,get:function(){return z(D).default}});var L=n(70);Object.defineProperty(t,"Quad",{enumerable:!0,get:function(){return z(L).default}});var N=n(68);Object.defineProperty(t,"SpriteMaskFilter",{enumerable:!0,get:function(){return z(N).default}});var U=n(69);Object.defineProperty(t,"Filter",{enumerable:!0,get:function(){return z(U).default}});var F=n(75);Object.defineProperty(t,"Application",{enumerable:!0,get:function(){return z(F).default}});var B=n(76);Object.defineProperty(t,"autoDetectRenderer",{enumerable:!0,get:function(){return B.autoDetectRenderer}});var G=W(n(3)),j=W(n(38)),H=z(n(4)),X=z(n(19)),Y=z(n(26));function W(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function z(e){return e&&e.__esModule?e:{default:e}}t.settings=H.default,t.utils=G,t.ticker=j,t.CanvasRenderer=X.default,t.WebGLRenderer=Y.default},function(e,t,n){"use strict";t.__esModule=!0;t.VERSION="4.5.6",t.PI_2=2*Math.PI,t.RAD_TO_DEG=180/Math.PI,t.DEG_TO_RAD=Math.PI/180,t.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},t.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},t.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},t.SCALE_MODES={LINEAR:0,NEAREST:1},t.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},t.GC_MODES={AUTO:0,MANUAL:1},t.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,t.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},t.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},t.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},t.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},t.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(e,t,n){"use strict";t.__esModule=!0,t.premultiplyBlendMode=t.BaseTextureCache=t.TextureCache=t.mixins=t.pluginTarget=t.EventEmitter=t.removeItems=t.isMobile=void 0,t.uid=function(){return++p},t.hex2rgb=function(e,t){return(t=t||[])[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t},t.hex2string=function(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)},t.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},t.getResolutionOfUrl=function(e,t){var n=i.default.RETINA_PREFIX.exec(e);if(n)return parseFloat(n[1]);return void 0!==t?t:1},t.decomposeDataUri=function(e){var t=r.DATA_URI.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,encoding:t[3]?t[3].toLowerCase():void 0,data:t[4]};return},t.getUrlFileExtension=function(e){var t=r.URL_FILE_EXTENSION.exec(e);if(t)return t[1].toLowerCase();return},t.getSvgSize=function(e){var t=r.SVG_SIZE.exec(e),n={};t&&(n[t[1]]=Math.round(parseFloat(t[3])),n[t[5]]=Math.round(parseFloat(t[7])));return n},t.skipHello=function(){f=!0},t.sayHello=function(e){if(f)return;if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c PixiJS "+r.VERSION+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("PixiJS "+r.VERSION+" - "+e+" - http://www.pixijs.com/");f=!0},t.isWebGLSupported=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch(e){return!1}},t.sign=function(e){return 0===e?0:e<0?-1:1},t.destroyTextureCache=function(){var e=void 0;for(e in g)g[e].destroy();for(e in m)m[e].destroy()},t.clearTextureCache=function(){var e=void 0;for(e in g)delete g[e];for(e in m)delete m[e]},t.correctBlendMode=function(e,t){return v[t?1:0][e]},t.premultiplyTint=function(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var n=e>>16&255,r=e>>8&255,i=255&e;return(255*t<<24)+((n=n*t+.5|0)<<16)+((r=r*t+.5|0)<<8)+(i=i*t+.5|0)},t.premultiplyRgba=function(e,t,n,r){n=n||new Float32Array(4),r||void 0===r?(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t):(n[0]=e[0],n[1]=e[1],n[2]=e[2]);return n[3]=t,n},t.premultiplyTintToRgba=function(e,t,n,r){(n=n||new Float32Array(4))[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(255&e)/255,(r||void 0===r)&&(n[0]*=t,n[1]*=t,n[2]*=t);return n[3]=t,n};var r=n(2),i=d(n(4)),o=d(n(14)),s=d(n(119)),a=h(n(120)),l=h(n(34)),u=d(n(121)),c=d(n(122));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}var p=0,f=!1;t.isMobile=l,t.removeItems=u.default,t.EventEmitter=o.default,t.pluginTarget=s.default,t.mixins=a;var g=t.TextureCache=Object.create(null),m=t.BaseTextureCache=Object.create(null);var v=t.premultiplyBlendMode=(0,c.default)()},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(117)),i=o(n(118));function o(e){return e&&e.__esModule?e:{default:e}}t.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,r.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,i.default)()}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(29);Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return d(r).default}});var i=n(47);Object.defineProperty(t,"ObservablePoint",{enumerable:!0,get:function(){return d(i).default}});var o=n(30);Object.defineProperty(t,"Matrix",{enumerable:!0,get:function(){return d(o).default}});var s=n(48);Object.defineProperty(t,"GroupD8",{enumerable:!0,get:function(){return d(s).default}});var a=n(107);Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return d(a).default}});var l=n(108);Object.defineProperty(t,"Ellipse",{enumerable:!0,get:function(){return d(l).default}});var u=n(109);Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return d(u).default}});var c=n(31);Object.defineProperty(t,"Rectangle",{enumerable:!0,get:function(){return d(c).default}});var h=n(110);function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"RoundedRectangle",{enumerable:!0,get:function(){return d(h).default}})},function(e,t,n){"use strict";var r=n(11),i=n(218),o=n(16),s=n(219),a=n(220),l={};function u(e,t){var n,a,l=this;for(var u in l.settings=i(),t)l.settings[u]=t[u];function c(){e.classList.add("ps--focus")}function h(){e.classList.remove("ps--focus")}l.containerWidth=null,l.containerHeight=null,l.contentWidth=null,l.contentHeight=null,l.isRtl="rtl"===o.css(e,"direction"),l.isNegativeScroll=(a=e.scrollLeft,e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=a,n),l.negativeScrollAdjustment=l.isNegativeScroll?e.scrollWidth-e.clientWidth:0,l.event=new s,l.ownerDocument=e.ownerDocument||document,l.scrollbarXRail=o.appendTo(o.create("div","ps__scrollbar-x-rail"),e),l.scrollbarX=o.appendTo(o.create("div","ps__scrollbar-x"),l.scrollbarXRail),l.scrollbarX.setAttribute("tabindex",0),l.event.bind(l.scrollbarX,"focus",c),l.event.bind(l.scrollbarX,"blur",h),l.scrollbarXActive=null,l.scrollbarXWidth=null,l.scrollbarXLeft=null,l.scrollbarXBottom=r.toInt(o.css(l.scrollbarXRail,"bottom")),l.isScrollbarXUsingBottom=l.scrollbarXBottom==l.scrollbarXBottom,l.scrollbarXTop=l.isScrollbarXUsingBottom?null:r.toInt(o.css(l.scrollbarXRail,"top")),l.railBorderXWidth=r.toInt(o.css(l.scrollbarXRail,"borderLeftWidth"))+r.toInt(o.css(l.scrollbarXRail,"borderRightWidth")),o.css(l.scrollbarXRail,"display","block"),l.railXMarginWidth=r.toInt(o.css(l.scrollbarXRail,"marginLeft"))+r.toInt(o.css(l.scrollbarXRail,"marginRight")),o.css(l.scrollbarXRail,"display",""),l.railXWidth=null,l.railXRatio=null,l.scrollbarYRail=o.appendTo(o.create("div","ps__scrollbar-y-rail"),e),l.scrollbarY=o.appendTo(o.create("div","ps__scrollbar-y"),l.scrollbarYRail),l.scrollbarY.setAttribute("tabindex",0),l.event.bind(l.scrollbarY,"focus",c),l.event.bind(l.scrollbarY,"blur",h),l.scrollbarYActive=null,l.scrollbarYHeight=null,l.scrollbarYTop=null,l.scrollbarYRight=r.toInt(o.css(l.scrollbarYRail,"right")),l.isScrollbarYUsingRight=l.scrollbarYRight==l.scrollbarYRight,l.scrollbarYLeft=l.isScrollbarYUsingRight?null:r.toInt(o.css(l.scrollbarYRail,"left")),l.scrollbarYOuterWidth=l.isRtl?r.outerWidth(l.scrollbarY):null,l.railBorderYWidth=r.toInt(o.css(l.scrollbarYRail,"borderTopWidth"))+r.toInt(o.css(l.scrollbarYRail,"borderBottomWidth")),o.css(l.scrollbarYRail,"display","block"),l.railYMarginHeight=r.toInt(o.css(l.scrollbarYRail,"marginTop"))+r.toInt(o.css(l.scrollbarYRail,"marginBottom")),o.css(l.scrollbarYRail,"display",""),l.railYHeight=null,l.railYRatio=null}function c(e){return e.getAttribute("data-ps-id")}t.add=function(e,t){var n=a();return function(e,t){e.setAttribute("data-ps-id",t)}(e,n),l[n]=new u(e,t),l[n]},t.remove=function(e){delete l[c(e)],function(e){e.removeAttribute("data-ps-id")}(e)},t.get=function(e){return l[c(e)]}},function(e,t,n){var r={createContext:n(111),setVertexAttribArrays:n(49),GLBuffer:n(112),GLFramebuffer:n(113),GLShader:n(114),GLTexture:n(50),VertexArrayObject:n(115),shader:n(116)};e.exports&&(e.exports=r),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=r)},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,l=0;l<s;l++)if(i[l]!==o[l]){a=l;break}var u=[];for(l=a;l<i.length;l++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(138))},function(e,t,n){"use strict";var r=n(11),i=n(16),o=n(6),s=n(12);function a(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}e.exports=function(e){var t,n=o.get(e);n.containerWidth=e.clientWidth,n.containerHeight=e.clientHeight,n.contentWidth=e.scrollWidth,n.contentHeight=e.scrollHeight,e.contains(n.scrollbarXRail)||((t=i.queryChildren(e,".ps__scrollbar-x-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarXRail,e)),e.contains(n.scrollbarYRail)||((t=i.queryChildren(e,".ps__scrollbar-y-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarYRail,e)),!n.settings.suppressScrollX&&n.containerWidth+n.settings.scrollXMarginOffset<n.contentWidth?(n.scrollbarXActive=!0,n.railXWidth=n.containerWidth-n.railXMarginWidth,n.railXRatio=n.containerWidth/n.railXWidth,n.scrollbarXWidth=a(n,r.toInt(n.railXWidth*n.containerWidth/n.contentWidth)),n.scrollbarXLeft=r.toInt((n.negativeScrollAdjustment+e.scrollLeft)*(n.railXWidth-n.scrollbarXWidth)/(n.contentWidth-n.containerWidth))):n.scrollbarXActive=!1,!n.settings.suppressScrollY&&n.containerHeight+n.settings.scrollYMarginOffset<n.contentHeight?(n.scrollbarYActive=!0,n.railYHeight=n.containerHeight-n.railYMarginHeight,n.railYRatio=n.containerHeight/n.railYHeight,n.scrollbarYHeight=a(n,r.toInt(n.railYHeight*n.containerHeight/n.contentHeight)),n.scrollbarYTop=r.toInt(e.scrollTop*(n.railYHeight-n.scrollbarYHeight)/(n.contentHeight-n.containerHeight))):n.scrollbarYActive=!1,n.scrollbarXLeft>=n.railXWidth-n.scrollbarXWidth&&(n.scrollbarXLeft=n.railXWidth-n.scrollbarXWidth),n.scrollbarYTop>=n.railYHeight-n.scrollbarYHeight&&(n.scrollbarYTop=n.railYHeight-n.scrollbarYHeight),function(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,i.css(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,i.css(t.scrollbarYRail,r),i.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,n),n.scrollbarXActive?e.classList.add("ps--active-x"):(e.classList.remove("ps--active-x"),n.scrollbarXWidth=0,n.scrollbarXLeft=0,s(e,"left",0)),n.scrollbarYActive?e.classList.add("ps--active-y"):(e.classList.remove("ps--active-y"),n.scrollbarYHeight=0,n.scrollbarYTop=0,s(e,"top",0))}},function(e,t,n){var r;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(n,i){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,l=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},u=o.push,c=o.indexOf,h={},d=h.toString,p=h.hasOwnProperty,f=p.toString,g=f.call(Object),m={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},y=function(e){return null!=e&&e===e.window},b=n.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function T(e,t,n){var r,i,o=(n=n||b).createElement("script");if(o.text=e,t)for(r in _)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[d.call(e)]||"object":typeof e}var w=function(e,t){return new w.fn.init(e,t)};function E(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!v(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:"3.5.0",constructor:w,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(w.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||v(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&s!==r&&(u&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[t],o=i&&!Array.isArray(n)?[]:i||w.isPlainObject(n)?n:{},i=!1,s[t]=w.extend(u,o,r)):void 0!==r&&(s[t]=r));return s},w.extend({expando:"jQuery"+("3.5.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e))&&(!(t=s(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&f.call(n)===g)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){T(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(E(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(E(Object(e))?w.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!==s&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(E(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return l(s)},guid:1,support:m}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=o[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var S=function(e){var t,n,r,i,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,_="sizzle"+1*new Date,T=e.document,x=0,w=0,E=le(),S=le(),M=le(),I=le(),P=function(e,t){return e===t&&(h=!0),0},A={}.hasOwnProperty,O=[],C=O.pop,R=O.push,k=O.push,D=O.slice,L=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",U="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+U+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+U+"*("+F+")(?:"+U+"*([*^$|!~]?=)"+U+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+U+"*\\]",G=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",j=new RegExp(U+"+","g"),H=new RegExp("^"+U+"+|((?:^|[^\\\\])(?:\\\\.)*)"+U+"+$","g"),X=new RegExp("^"+U+"*,"+U+"*"),Y=new RegExp("^"+U+"*([>+~]|"+U+")"+U+"*"),W=new RegExp(U+"|>"),z=new RegExp(G),V=new RegExp("^"+F+"$"),q={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+G),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+U+"*(even|odd|(([+-]|)(\\d*)n|)"+U+"*(?:([+-]|)"+U+"*(\\d+)|))"+U+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+U+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+U+"*((?:-\\d)?\\d*)"+U+"*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,$=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+U+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){d()},se=_e((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{k.apply(O=D.call(T.childNodes),T.childNodes),O[T.childNodes.length].nodeType}catch(e){k={apply:O.length?function(e,t){R.apply(e,D.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ae(e,t,r,i){var o,a,u,c,h,f,v,y=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&(d(t),t=t||p,g)){if(11!==T&&(h=Q.exec(e)))if(o=h[1]){if(9===T){if(!(u=t.getElementById(o)))return r;if(u.id===o)return r.push(u),r}else if(y&&(u=y.getElementById(o))&&b(t,u)&&u.id===o)return r.push(u),r}else{if(h[2])return k.apply(r,t.getElementsByTagName(e)),r;if((o=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return k.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!I[e+" "]&&(!m||!m.test(e))&&(1!==T||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===T&&(W.test(e)||Y.test(e))){for((y=ee.test(e)&&ve(t.parentNode)||t)===t&&n.scope||((c=t.getAttribute("id"))?c=c.replace(re,ie):t.setAttribute("id",c=_)),a=(f=s(e)).length;a--;)f[a]=(c?"#"+c:":scope")+" "+be(f[a]);v=f.join(",")}try{return k.apply(r,y.querySelectorAll(v)),r}catch(t){I(e,!0)}finally{c===_&&t.removeAttribute("id")}}}return l(e.replace(H,"$1"),t,r,i)}function le(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ue(e){return e[_]=!0,e}function ce(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function de(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ue((function(t){return t=+t,ue((function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))}))}))}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},o=ae.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!K.test(t||n&&n.nodeName||"HTML")},d=ae.setDocument=function(e){var t,i,s=e?e.ownerDocument||e:T;return s!=p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,g=!o(p),T!=p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.scope=ce((function(e){return f.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ce((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(p.getElementsByClassName),n.getById=ce((function(e){return f.appendChild(e).id=_,!p.getElementsByName||!p.getElementsByName(_).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(n.qsa=J.test(p.querySelectorAll))&&(ce((function(e){var t;f.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+U+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+U+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+_+"-]").length||m.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+U+"*name"+U+"*="+U+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+U+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ce((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",G)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(f.compareDocumentPosition),b=t||J.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},P=t?function(e,t){if(e===t)return h=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==p||e.ownerDocument==T&&b(T,e)?-1:t==p||t.ownerDocument==T&&b(T,t)?1:c?L(c,e)-L(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e==p?-1:t==p?1:i?-1:o?1:c?L(c,e)-L(c,t):0;if(i===o)return de(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?de(s[r],a[r]):s[r]==T?-1:a[r]==T?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(d(e),n.matchesSelector&&g&&!I[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){I(t,!0)}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=p&&d(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=p&&d(e);var i=r.attrHandle[t.toLowerCase()],o=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ae.escape=function(e){return(e+"").replace(re,ie)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,r=[],i=0,o=0;if(h=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(P),h){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=ae.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=ae.selectors={cacheLength:50,createPseudo:ue,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&z.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+U+")"+e+"("+U+"|$)"))&&E(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=ae.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(j," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,d,p,f,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(b=(p=(u=(c=(h=(d=m)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===x&&u[1])&&u[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===t){c[e]=[x,p,b];break}}else if(y&&(b=p=(u=(c=(h=(d=t)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===x&&u[1]),!1===b)for(;(d=++p&&d&&d[g]||(b=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&((c=(h=d[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[x,b]),d!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[_]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ue((function(e,n){for(var r,o=i(e,t),s=o.length;s--;)e[r=L(e,o[s])]=!(n[r]=o[s])})):function(e){return i(e,0,n)}):i}},pseudos:{not:ue((function(e){var t=[],n=[],r=a(e.replace(H,"$1"));return r[_]?ue((function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:ue((function(e){return function(t){return ae(e,t).length>0}})),contains:ue((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:ue((function(e){return V.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,n){return[n<0?n+t:n]})),even:me((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:me((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:me((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:me((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=fe(t);function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function _e(e,t,n){var r=t.dir,i=t.next,o=i||r,s=n&&"parentNode"===o,a=w++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||s)return e(t,n,i);return!1}:function(t,n,l){var u,c,h,d=[x,a];if(l){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(c=(h=t[_]||(t[_]={}))[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=c[o])&&u[0]===x&&u[1]===a)return d[2]=u[2];if(c[o]=d,d[2]=e(t,n,l))return!0}return!1}}function Te(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xe(e,t,n,r,i){for(var o,s=[],a=0,l=e.length,u=null!=t;a<l;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),u&&t.push(a)));return s}function we(e,t,n,r,i,o){return r&&!r[_]&&(r=we(r)),i&&!i[_]&&(i=we(i,o)),ue((function(o,s,a,l){var u,c,h,d=[],p=[],f=s.length,g=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ae(e,t[r],n);return n}(t||"*",a.nodeType?[a]:a,[]),m=!e||!o&&t?g:xe(g,d,e,a,l),v=n?i||(o?e:f||r)?[]:s:m;if(n&&n(m,v,a,l),r)for(u=xe(v,p),r(u,[],a,l),c=u.length;c--;)(h=u[c])&&(v[p[c]]=!(m[p[c]]=h));if(o){if(i||e){if(i){for(u=[],c=v.length;c--;)(h=v[c])&&u.push(m[c]=h);i(null,v=[],u,l)}for(c=v.length;c--;)(h=v[c])&&(u=i?L(o,h):d[c])>-1&&(o[u]=!(s[u]=h))}}else v=xe(v===s?v.splice(f,v.length):v),i?i(null,s,v,l):k.apply(s,v)}))}function Ee(e){for(var t,n,i,o=e.length,s=r.relative[e[0].type],a=s||r.relative[" "],l=s?1:0,c=_e((function(e){return e===t}),a,!0),h=_e((function(e){return L(t,e)>-1}),a,!0),d=[function(e,n,r){var i=!s&&(r||n!==u)||((t=n).nodeType?c(e,n,r):h(e,n,r));return t=null,i}];l<o;l++)if(n=r.relative[e[l].type])d=[_e(Te(d),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[_]){for(i=++l;i<o&&!r.relative[e[i].type];i++);return we(l>1&&Te(d),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(H,"$1"),n,l<i&&Ee(e.slice(l,i)),i<o&&Ee(e=e.slice(i)),i<o&&be(e))}d.push(n)}return Te(d)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,s=ae.tokenize=function(e,t){var n,i,o,s,a,l,u,c=S[e+" "];if(c)return t?0:c.slice(0);for(a=e,l=[],u=r.preFilter;a;){for(s in n&&!(i=X.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),n=!1,(i=Y.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(H," ")}),a=a.slice(n.length)),r.filter)!(i=q[s].exec(a))||u[s]&&!(i=u[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ae.error(e):S(e,l).slice(0)},a=ae.compile=function(e,t){var n,i=[],o=[],a=M[e+" "];if(!a){for(t||(t=s(e)),n=t.length;n--;)(a=Ee(t[n]))[_]?i.push(a):o.push(a);(a=M(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,s,a,l,c){var h,f,m,v=0,y="0",b=o&&[],_=[],T=u,w=o||i&&r.find.TAG("*",c),E=x+=null==T?1:Math.random()||.1,S=w.length;for(c&&(u=s==p||s||c);y!==S&&null!=(h=w[y]);y++){if(i&&h){for(f=0,s||h.ownerDocument==p||(d(h),a=!g);m=e[f++];)if(m(h,s||p,a)){l.push(h);break}c&&(x=E)}n&&((h=!m&&h)&&v--,o&&b.push(h))}if(v+=y,n&&y!==v){for(f=0;m=t[f++];)m(b,_,s,a);if(o){if(v>0)for(;y--;)b[y]||_[y]||(_[y]=C.call(l));_=xe(_)}k.apply(l,_),c&&!o&&_.length>0&&v+t.length>1&&ae.uniqueSort(l)}return c&&(x=E,u=T),b};return n?ue(o):o}(o,i))).selector=e}return a},l=ae.select=function(e,t,n,i){var o,l,u,c,h,d="function"==typeof e&&e,p=!i&&s(e=d.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&g&&r.relative[l[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(te,ne),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=q.needsContext.test(e)?0:l.length;o--&&(u=l[o],!r.relative[c=u.type]);)if((h=r.find[c])&&(i=h(u.matches[0].replace(te,ne),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(o,1),!(e=i.length&&be(l)))return k.apply(n,i),n;break}}return(d||a(e,p))(i,t,!g,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=_.split("").sort(P).join("")===_,n.detectDuplicates=!!h,d(),n.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||he(N,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),ae}(n);w.find=S,w.expr=S.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=S.uniqueSort,w.text=S.getText,w.isXMLDoc=S.isXML,w.contains=S.contains,w.escapeSelector=S.escape;var M=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},I=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},P=w.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function C(e,t,n){return v(t)?w.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?w.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?w.grep(e,(function(e){return c.call(t,e)>-1!==n})):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,(function(e){return 1===e.nodeType})))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter((function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&P.test(e)?w(e):e||[],!1).length}});var R,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||R,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:k.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),O.test(r[1])&&w.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,R=w(b);var D=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function N(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],s="string"!=typeof e&&w(e);if(!P.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?c.call(w(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return M(e,"parentNode")},parentsUntil:function(e,t,n){return M(e,"parentNode",n)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return M(e,"nextSibling")},prevAll:function(e){return M(e,"previousSibling")},nextUntil:function(e,t,n){return M(e,"nextSibling",n)},prevUntil:function(e,t,n){return M(e,"previousSibling",n)},siblings:function(e){return I((e.parentNode||{}).firstChild,e)},children:function(e){return I(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},(function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(L[e]||w.uniqueSort(i),D.test(e)&&i.reverse()),this.pushStack(i)}}));var U=/[^\x20\t\r\n\f]+/g;function F(e){return e}function B(e){throw e}function G(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(U)||[],(function(e,n){t[n]=!0})),t}(e):w.extend({},e);var t,n,r,i,o=[],s=[],a=-1,l=function(){for(i=i||e.once,r=t=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(a=o.length-1,s.push(n)),function t(n){w.each(n,(function(n,r){v(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return w.each(arguments,(function(e,t){for(var n;(n=w.inArray(t,o,n))>-1;)o.splice(n,1),n<=a&&a--})),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},w.extend({Deferred:function(e){var t=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred((function(n){w.each(t,(function(t,r){var i=v(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&v(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,i){var o=0;function s(e,t,r,i){return function(){var a=this,l=arguments,u=function(){var n,u;if(!(e<o)){if((n=r.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");u=n&&("object"==typeof n||"function"==typeof n)&&n.then,v(u)?i?u.call(n,s(o,t,F,i),s(o,t,B,i)):(o++,u.call(n,s(o,t,F,i),s(o,t,B,i),s(o,t,F,t.notifyWith))):(r!==F&&(a=void 0,l=[n]),(i||t.resolveWith)(a,l))}},c=i?u:function(){try{u()}catch(n){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(n,c.stackTrace),e+1>=o&&(r!==B&&(a=void 0,l=[n]),t.rejectWith(a,l))}};e?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),n.setTimeout(c))}}return w.Deferred((function(n){t[0][3].add(s(0,n,v(i)?i:F,n.notifyWith)),t[1][3].add(s(0,n,v(e)?e:F)),t[2][3].add(s(0,n,v(r)?r:B))})).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(t,(function(e,n){var s=n[2],a=n[5];i[n[1]]=s.add,a&&s.add((function(){r=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=s.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=a.call(arguments),o=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?a.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(G(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||v(i[n]&&i[n].then)))return o.then();for(;n--;)G(i[n],s(n),o.reject);return o.promise()}});var j=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&j.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},w.readyException=function(e){n.setTimeout((function(){throw e}))};var H=w.Deferred();function X(){b.removeEventListener("DOMContentLoaded",X),n.removeEventListener("load",X),w.ready()}w.fn.ready=function(e){return H.then(e).catch((function(e){w.readyException(e)})),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||H.resolveWith(b,[w]))}}),w.ready.then=H.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?n.setTimeout(w.ready):(b.addEventListener("DOMContentLoaded",X),n.addEventListener("load",X));var Y=function(e,t,n,r,i,o,s){var a=0,l=e.length,u=null==n;if("object"===x(n))for(a in i=!0,n)Y(e,t,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,v(r)||(s=!0),u&&(s?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(w(e),n)})),t))for(;a<l;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:u?t.call(e):l?t(e[0],n):o},W=/^-ms-/,z=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function q(e){return e.replace(W,"ms-").replace(z,V)}var K=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function $(){this.expando=w.expando+$.uid++}$.uid=1,$.prototype={cache:function(e){var t=e[this.expando];return t||(t=Object.create(null),K(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[q(t)]=n;else for(r in t)i[q(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][q(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(q):(t=q(t))in r?[t]:t.match(U)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var Z=new $,J=new $,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Q.test(e)?JSON.parse(e):e)}(n)}catch(e){}J.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return J.hasData(e)||Z.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Z.access(e,t,n)},_removeData:function(e,t){Z.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=J.get(o),1===o.nodeType&&!Z.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=q(r.slice(5)),te(o,r,i[r]));Z.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){J.set(this,e)})):Y(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=J.get(o,e))?n:void 0!==(n=te(o,e))?n:void 0;this.each((function(){J.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){J.remove(this,e)}))}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Z.get(e,t),n&&(!r||Array.isArray(n)?r=Z.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){w.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Z.get(e,n)||Z.access(e,n,{empty:w.Callbacks("once memory").add((function(){Z.remove(e,[t+"queue",n])}))})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each((function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){w.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=Z.get(o[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],oe=b.documentElement,se=function(e){return w.contains(e.ownerDocument,e)},ae={composed:!0};oe.getRootNode&&(se=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var le=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===w.css(e,"display")};function ue(e,t,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return w.css(e,t,"")},l=a(),u=n&&n[3]||(w.cssNumber[t]?"":"px"),c=e.nodeType&&(w.cssNumber[t]||"px"!==u&&+l)&&re.exec(w.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;s--;)w.style(e,t,c+u),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),c/=o;c*=2,w.style(e,t,c+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var ce={};function he(e){var t,n=e.ownerDocument,r=e.nodeName,i=ce[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ce[r]=i,i)}function de(e,t){for(var n,r,i=[],o=0,s=e.length;o<s;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Z.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&le(r)&&(i[o]=he(r))):"none"!==n&&(i[o]="none",Z.set(r,"display",n)));for(o=0;o<s;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){le(this)?w(this).show():w(this).hide()}))}});var pe,fe,ge=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ve=/^$|^module$|\/(?:java|ecma)script/i;pe=b.createDocumentFragment().appendChild(b.createElement("div")),(fe=b.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),pe.appendChild(fe),m.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,pe.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pe.cloneNode(!0).lastChild.defaultValue,pe.innerHTML="<option></option>",m.option=!!pe.lastChild;var ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function be(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?w.merge([e],n):n}function _e(e,t){for(var n=0,r=e.length;n<r;n++)Z.set(e[n],"globalEval",!t||Z.get(t[n],"globalEval"))}ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td,m.option||(ye.optgroup=ye.option=[1,"<select multiple='multiple'>","</select>"]);var Te=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,s,a,l,u,c,h=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((o=e[p])||0===o)if("object"===x(o))w.merge(d,o.nodeType?[o]:o);else if(Te.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(me.exec(o)||["",""])[1].toLowerCase(),l=ye[a]||ye._default,s.innerHTML=l[1]+w.htmlPrefilter(o)+l[2],c=l[0];c--;)s=s.lastChild;w.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",p=0;o=d[p++];)if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(u=se(o),s=be(h.appendChild(o),"script"),u&&_e(s),n)for(c=0;o=s[c++];)ve.test(o.type||"")&&n.push(o);return h}var we=/^key/,Ee=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function Me(){return!0}function Ie(){return!1}function Pe(e,t){return e===function(){try{return b.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ie;else if(!i)return e;return 1===o&&(s=i,(i=function(e){return w().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=w.guid++)),e.each((function(){w.event.add(this,t,i,r,n)}))}function Oe(e,t,n){n?(Z.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=Z.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=a.call(arguments),Z.set(this,t,o),r=n(this,t),this[t](),o!==(i=Z.get(this,t))||r?Z.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else o.length&&(Z.set(this,t,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Z.get(e,t)&&w.event.add(e,t,Me)}w.event={global:{},add:function(e,t,n,r,i){var o,s,a,l,u,c,h,d,p,f,g,m=Z.get(e);if(K(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(oe,i),n.guid||(n.guid=w.guid++),(l=m.events)||(l=m.events=Object.create(null)),(s=m.handle)||(s=m.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(U)||[""]).length;u--;)p=g=(a=Se.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=w.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=w.event.special[p]||{},c=w.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:f.join(".")},o),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,f,s)||e.addEventListener&&e.addEventListener(p,s)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),w.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,s,a,l,u,c,h,d,p,f,g,m=Z.hasData(e)&&Z.get(e);if(m&&(l=m.events)){for(u=(t=(t||"").match(U)||[""]).length;u--;)if(p=g=(a=Se.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=w.event.special[p]||{},d=l[p=(r?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)c=d[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,f,m.handle)||w.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)w.event.remove(e,p+t[u],n,r,!0);w.isEmptyObject(l)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,s,a=new Array(arguments.length),l=w.event.fix(e),u=(Z.get(this,"events")||Object.create(null))[l.type]||[],c=w.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(s=w.event.handlers.call(this,l,u),t=0;(i=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((w.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,i,o,s,a=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],s={},n=0;n<l;n++)void 0===s[i=(r=t[n]).selector+" "]&&(s[i]=r.needsContext?w(i,this).index(u)>-1:w.find(i,this,null,[u]).length),s[i]&&o.push(r);o.length&&a.push({elem:u,handlers:o})}return u=this,l<t.length&&a.push({elem:u,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&A(t,"input")&&Oe(t,"click",Me),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&A(t,"input")&&Oe(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&A(t,"input")&&Z.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Me:Ie,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Ie,isPropagationStopped:Ie,isImmediatePropagationStopped:Ie,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Me,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Me,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Me,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ee.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},(function(e,t){w.event.special[e]={setup:function(){return Oe(this,e,Pe),!1},trigger:function(){return Oe(this,e),!0},delegateType:t}})),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),w.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ie),this.each((function(){w.event.remove(this,e,n,t)}))}});var Ce=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function De(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ne(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ue(e,t){var n,r,i,o,s,a;if(1===t.nodeType){if(Z.hasData(e)&&(a=Z.get(e).events))for(i in Z.remove(t,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)w.event.add(t,i,a[i][n]);J.hasData(e)&&(o=J.access(e),s=w.extend({},o),J.set(t,s))}}function Fe(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ge.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Be(e,t,n,r){t=l(t);var i,o,s,a,u,c,h=0,d=e.length,p=d-1,f=t[0],g=v(f);if(g||d>1&&"string"==typeof f&&!m.checkClone&&Re.test(f))return e.each((function(i){var o=e.eq(i);g&&(t[0]=f.call(this,i,o.html())),Be(o,t,n,r)}));if(d&&(o=(i=xe(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=(s=w.map(be(i,"script"),Le)).length;h<d;h++)u=i,h!==p&&(u=w.clone(u,!0,!0),a&&w.merge(s,be(u,"script"))),n.call(e[h],u,h);if(a)for(c=s[s.length-1].ownerDocument,w.map(s,Ne),h=0;h<a;h++)u=s[h],ve.test(u.type||"")&&!Z.access(u,"globalEval")&&w.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&!u.noModule&&w._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):T(u.textContent.replace(ke,""),u,c))}return e}function Ge(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(be(r)),r.parentNode&&(n&&se(r)&&_e(be(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),l=se(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(s=be(a),r=0,i=(o=be(e)).length;r<i;r++)Fe(o[r],s[r]);if(t)if(n)for(o=o||be(e),s=s||be(a),r=0,i=o.length;r<i;r++)Ue(o[r],s[r]);else Ue(e,a);return(s=be(a,"script")).length>0&&_e(s,!l&&be(e,"script")),a},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(K(n)){if(t=n[Z.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[Z.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Ge(this,e,!0)},remove:function(e){return Ge(this,e)},text:function(e){return Y(this,(function(e){return void 0===e?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Be(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||De(this,e).appendChild(e)}))},prepend:function(){return Be(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=De(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Be(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Be(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(be(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return w.clone(this,e,t)}))},html:function(e){return Y(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ce.test(e)&&!ye[(me.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(be(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Be(this,arguments,(function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(be(this)),n&&n.replaceChild(t,this))}),e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),w(i[s])[t](n),u.apply(r,n.get());return this.pushStack(r)}}));var je=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),He=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Xe=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ye=new RegExp(ie.join("|"),"i");function We(e,t,n){var r,i,o,s,a=e.style;return(n=n||He(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||se(e)||(s=w.style(e,t)),!m.pixelBoxStyles()&&je.test(s)&&Ye.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(u).appendChild(c);var e=n.getComputedStyle(c);r="1%"!==e.top,l=12===t(e.marginLeft),c.style.right="60%",s=36===t(e.right),i=36===t(e.width),c.style.position="absolute",o=12===t(c.offsetWidth/3),oe.removeChild(u),c=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,s,a,l,u=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(m,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,r,i;return null==a&&(e=b.createElement("table"),t=b.createElement("tr"),r=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",r.style.height="9px",oe.appendChild(e).appendChild(t).appendChild(r),i=n.getComputedStyle(t),a=parseInt(i.height)>3,oe.removeChild(e)),a}}))}();var Ve=["Webkit","Moz","ms"],qe=b.createElement("div").style,Ke={};function $e(e){var t=w.cssProps[e]||Ke[e];return t||(e in qe?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ve.length;n--;)if((e=Ve[n]+t)in qe)return e}(e)||e)}var Ze=/^(none|table(?!-c[ea]).+)/,Je=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},et={letterSpacing:"0",fontWeight:"400"};function tt(e,t,n){var r=re.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function nt(e,t,n,r,i,o){var s="width"===t?1:0,a=0,l=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=w.css(e,n+ie[s],!0,i)),r?("content"===n&&(l-=w.css(e,"padding"+ie[s],!0,i)),"margin"!==n&&(l-=w.css(e,"border"+ie[s]+"Width",!0,i))):(l+=w.css(e,"padding"+ie[s],!0,i),"padding"!==n?l+=w.css(e,"border"+ie[s]+"Width",!0,i):a+=w.css(e,"border"+ie[s]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-a-.5))||0),l}function rt(e,t,n){var r=He(e),i=(!m.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),o=i,s=We(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if(je.test(s)){if(!n)return s;s="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&A(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===w.css(e,"boxSizing",!1,r),(o=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+nt(e,t,n||(i?"border":"content"),o,r,s)+"px"}function it(e,t,n,r,i){return new it.prototype.init(e,t,n,r,i)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=q(t),l=Je.test(t),u=e.style;if(l||(t=$e(a)),s=w.cssHooks[t]||w.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t];"string"===(o=typeof n)&&(i=re.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(w.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,o,s,a=q(t);return Je.test(t)||(t=$e(a)),(s=w.cssHooks[t]||w.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in et&&(i=et[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],(function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!Ze.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?rt(e,t,r):Xe(e,Qe,(function(){return rt(e,t,r)}))},set:function(e,n,r){var i,o=He(e),s=!m.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===w.css(e,"boxSizing",!1,o),l=r?nt(e,t,r,a,o):0;return a&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-nt(e,t,"border",!1,o)-.5)),l&&(i=re.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),tt(0,n,l)}}})),w.cssHooks.marginLeft=ze(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Xe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+ie[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=tt)})),w.fn.extend({css:function(e,t){return Y(this,(function(e,t,n){var r,i,o={},s=0;if(Array.isArray(t)){for(r=He(e),i=t.length;s<i;s++)o[t[s]]=w.css(e,t[s],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)}),e,t,arguments.length>1)}}),w.Tween=it,it.prototype={constructor:it,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return e&&e.get?e.get(this):it.propHooks._default.get(this)},run:function(e){var t,n=it.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):it.propHooks._default.set(this),this}},it.prototype.init.prototype=it.prototype,it.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[$e(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},it.propHooks.scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=it.prototype.init,w.fx.step={};var ot,st,at=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;function ut(){st&&(!1===b.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ut):n.setTimeout(ut,w.fx.interval),w.fx.tick())}function ct(){return n.setTimeout((function(){ot=void 0})),ot=Date.now()}function ht(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ie[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function dt(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function pt(e,t,n){var r,i,o=0,s=pt.prefilters.length,a=w.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=ot||ct(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(r);return a.notifyWith(e,[u,r,n]),r<1&&s?n:(s||a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:ot||ct(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var n,r,i,o,s;for(n in e)if(i=t[r=q(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(s=w.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,u.opts.specialEasing);o<s;o++)if(r=pt.prefilters[o].call(u,e,c,u.opts))return v(r.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,dt,u),v(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,re.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(U);for(var n,r=0,i=e.length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,s,a,l,u,c,h="width"in t||"height"in t,d=this,p={},f=e.style,g=e.nodeType&&le(e),m=Z.get(e,"fxshow");for(r in n.queue||(null==(s=w._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,w.queue(e,"fx").length||s.empty.fire()}))}))),t)if(i=t[r],at.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}p[r]=m&&m[r]||w.style(e,r)}if((l=!w.isEmptyObject(t))||!w.isEmptyObject(p))for(r in h&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=m&&m.display)&&(u=Z.get(e,"display")),"none"===(c=w.css(e,"display"))&&(u?c=u:(de([e],!0),u=e.style.display||u,c=w.css(e,"display"),de([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===w.css(e,"float")&&(l||(d.done((function(){f.display=u})),null==u&&(c=f.display,u="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=Z.access(e,"fxshow",{display:u}),o&&(m.hidden=!g),g&&de([e],!0),d.done((function(){for(r in g||de([e]),Z.remove(e,"fxshow"),p)w.style(e,r,p[r])}))),l=dt(g?m[r]:0,r,d),r in m||(m[r]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(le).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),s=function(){var t=pt(this,w.extend({},e),o);(i||Z.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,s=Z.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&lt.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Z.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,s=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),w.each(["toggle","show","hide"],(function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ht(t,!0),e,r,i)}})),w.each({slideDown:ht("show"),slideUp:ht("hide"),slideToggle:ht("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(ot=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),ot=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){st||(st=!0,ut())},w.fx.stop=function(){st=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,t){return e=w.fx&&w.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var ft,gt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return Y(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){w.removeAttr(this,e)}))}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(U);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=gt[t]||w.find.attr;gt[t]=function(e,t,r){var i,o,s=t.toLowerCase();return r||(o=gt[s],gt[s]=i,i=null!=n(e,t,r)?s:null,gt[s]=o),i}}));var mt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function yt(e){return(e.match(U)||[]).join(" ")}function bt(e){return e.getAttribute&&e.getAttribute("class")||""}function _t(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(U)||[]}w.fn.extend({prop:function(e,t){return Y(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[w.propFix[e]||e]}))}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,l=0;if(v(e))return this.each((function(t){w(this).addClass(e.call(this,t,bt(this)))}));if((t=_t(e)).length)for(;n=this[l++];)if(i=bt(n),r=1===n.nodeType&&" "+yt(i)+" "){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=yt(r))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,l=0;if(v(e))return this.each((function(t){w(this).removeClass(e.call(this,t,bt(this)))}));if(!arguments.length)return this.attr("class","");if((t=_t(e)).length)for(;n=this[l++];)if(i=bt(n),r=1===n.nodeType&&" "+yt(i)+" "){for(s=0;o=t[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(a=yt(r))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):v(e)?this.each((function(n){w(this).toggleClass(e.call(this,n,bt(this),t),t)})):this.each((function(){var t,i,o,s;if(r)for(i=0,o=w(this),s=_t(e);t=s[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=bt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+yt(bt(n))+" ").indexOf(t)>-1)return!0;return!1}});var Tt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=v(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,(function(e){return null==e?"":e+""}))),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Tt,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:yt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?o+1:i.length;for(r=o<0?l:s?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=w(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=w.makeArray(t),s=i.length;s--;)((r=i[s]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},m.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.focusin="onfocusin"in n;var xt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(e,t,r,i){var o,s,a,l,u,c,h,d,f=[r||b],g=p.call(e,"type")?e.type:e,m=p.call(e,"namespace")?e.namespace.split("."):[];if(s=d=a=r=r||b,3!==r.nodeType&&8!==r.nodeType&&!xt.test(g+w.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),u=g.indexOf(":")<0&&"on"+g,(e=e[w.expando]?e:new w.Event(g,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:w.makeArray(t,[e]),h=w.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(r,t))){if(!i&&!h.noBubble&&!y(r)){for(l=h.delegateType||g,xt.test(l+g)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(r.ownerDocument||b)&&f.push(a.defaultView||a.parentWindow||n)}for(o=0;(s=f[o++])&&!e.isPropagationStopped();)d=s,e.type=o>1?l:h.bindType||g,(c=(Z.get(s,"events")||Object.create(null))[e.type]&&Z.get(s,"handle"))&&c.apply(s,t),(c=u&&s[u])&&c.apply&&K(s)&&(e.result=c.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),t)||!K(r)||u&&v(r[g])&&!y(r)&&((a=r[u])&&(r[u]=null),w.event.triggered=g,e.isPropagationStopped()&&d.addEventListener(g,wt),r[g](),e.isPropagationStopped()&&d.removeEventListener(g,wt),w.event.triggered=void 0,a&&(r[u]=a)),e.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each((function(){w.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),m.focusin||w.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=Z.access(r,t);i||r.addEventListener(e,n,!0),Z.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Z.access(r,t)-1;i?Z.access(r,t,i):(r.removeEventListener(e,n,!0),Z.remove(r,t))}}}));var Et=n.location,St={guid:Date.now()},Mt=/\?/;w.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+e),t};var It=/\[\]$/,Pt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Ct(e,t,n,r){var i;if(Array.isArray(t))w.each(t,(function(t,i){n||It.test(e)?r(e,i):Ct(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==x(t))r(e,t);else for(i in t)Ct(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,(function(){i(this.name,this.value)}));else for(n in e)Ct(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&Ot.test(this.nodeName)&&!At.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,(function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}})):{name:t.name,value:n.replace(Pt,"\r\n")}})).get()}});var Rt=/%20/g,kt=/#.*$/,Dt=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:GET|HEAD)$/,Ut=/^\/\//,Ft={},Bt={},Gt="*/".concat("*"),jt=b.createElement("a");function Ht(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(U)||[];if(v(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Xt(e,t,n,r){var i={},o=e===Bt;function s(a){var l;return i[a]=!0,w.each(e[a]||[],(function(e,a){var u=a(t,n,r);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),s(u),!1)})),l}return s(t.dataTypes[0])||!i["*"]&&s("*")}function Yt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}jt.href=Et.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,w.ajaxSettings),t):Yt(w.ajaxSettings,e)},ajaxPrefilter:Ht(Ft),ajaxTransport:Ht(Bt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,a,l,u,c,h,d,p=w.ajaxSetup({},t),f=p.context||p,g=p.context&&(f.nodeType||f.jquery)?w(f):w.event,m=w.Deferred(),v=w.Callbacks("once memory"),y=p.statusCode||{},_={},T={},x="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Lt.exec(o);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,_[e]=t),this},overrideMimeType:function(e){return null==u&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)E.always(e[E.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),S(0,t),this}};if(m.promise(E),p.url=((e||p.url||Et.href)+"").replace(Ut,Et.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(U)||[""],null==p.crossDomain){l=b.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=jt.protocol+"//"+jt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=w.param(p.data,p.traditional)),Xt(Ft,p,t,E),u)return E;for(h in(c=w.event&&p.global)&&0==w.active++&&w.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nt.test(p.type),i=p.url.replace(kt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Rt,"+")):(d=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(Mt.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Dt,"$1"),d=(Mt.test(i)?"&":"?")+"_="+St.guid+++d),p.url=i+d),p.ifModified&&(w.lastModified[i]&&E.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&E.setRequestHeader("If-None-Match",w.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&E.setRequestHeader("Content-Type",p.contentType),E.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Gt+"; q=0.01":""):p.accepts["*"]),p.headers)E.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(f,E,p)||u))return E.abort();if(x="abort",v.add(p.complete),E.done(p.success),E.fail(p.error),r=Xt(Bt,p,t,E)){if(E.readyState=1,c&&g.trigger("ajaxSend",[E,p]),u)return E;p.async&&p.timeout>0&&(a=n.setTimeout((function(){E.abort("timeout")}),p.timeout));try{u=!1,r.send(_,S)}catch(e){if(u)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,s,l){var h,d,b,_,T,x=t;u||(u=!0,a&&n.clearTimeout(a),r=void 0,o=l||"",E.readyState=e>0?4:0,h=e>=200&&e<300||304===e,s&&(_=function(e,t,n){for(var r,i,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,E,s)),!h&&w.inArray("script",p.dataTypes)>-1&&(p.converters["text script"]=function(){}),_=function(e,t,n,r){var i,o,s,a,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(p,_,E,h),h?(p.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=T),(T=E.getResponseHeader("etag"))&&(w.etag[i]=T)),204===e||"HEAD"===p.type?x="nocontent":304===e?x="notmodified":(x=_.state,d=_.data,h=!(b=_.error))):(b=x,!e&&x||(x="error",e<0&&(e=0))),E.status=e,E.statusText=(t||x)+"",h?m.resolveWith(f,[d,x,E]):m.rejectWith(f,[E,x,b]),E.statusCode(y),y=void 0,c&&g.trigger(h?"ajaxSuccess":"ajaxError",[E,p,h?d:b]),v.fireWith(f,[E,x]),c&&(g.trigger("ajaxComplete",[E,p]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],(function(e,t){w[t]=function(e,n,r,i){return v(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}})),w.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){w(this).wrapInner(e.call(this,t))})):this.each((function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(n){w(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},zt=w.ajaxSettings.xhr();m.cors=!!zt&&"withCredentials"in zt,m.ajax=zt=!!zt,w.ajaxTransport((function(e){var t,r;if(m.cors||zt&&!e.crossDomain)return{send:function(i,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);t=function(e){return function(){t&&(t=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Wt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),r=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),w.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),w.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Vt,qt=[],Kt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=qt.pop()||w.expando+"_"+St.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",(function(e,t,r){var i,o,s,a=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Kt,"$1"+i):!1!==e.jsonp&&(e.url+=(Mt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||w.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){s=arguments},r.always((function(){void 0===o?w(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,qt.push(i)),s&&v(o)&&o(s[0]),s=o=void 0})),"script"})),m.createHTMLDocument=((Vt=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((r=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(r)):t=b),o=!n&&[],(i=O.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&w(o).remove(),w.merge([],i.childNodes)));var r,i,o},w.fn.load=function(e,t,n){var r,i,o,s=this,a=e.indexOf(" ");return a>-1&&(r=yt(e.slice(a)),e=e.slice(0,a)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,s.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,(function(t){return e===t.elem})).length},w.offset={setOffset:function(e,t,n){var r,i,o,s,a,l,u=w.css(e,"position"),c=w(e),h={};"static"===u&&(e.style.position="relative"),a=c.offset(),o=w.css(e,"top"),l=w.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(s=(r=c.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(l)||0),v(t)&&(t=t.call(e,n,w.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):("number"==typeof h.top&&(h.top+="px"),"number"==typeof h.left&&(h.left+="px"),c.css(h))}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){w.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||oe}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return Y(this,(function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),w.each(["top","left"],(function(e,t){w.cssHooks[t]=ze(m.pixelPosition,(function(e,n){if(n)return n=We(e,t),je.test(n)?w(e).position()[t]+"px":n}))})),w.each({Height:"height",Width:"width"},(function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){w.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return Y(this,(function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,a):w.style(t,n,i,a)}),t,s?i:void 0,s)}}))})),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){w.fn[t]=function(e){return this.on(t,e)}})),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var $t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=a.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=A,w.isFunction=v,w.isWindow=y,w.camelCase=q,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace($t,"")},void 0===(r=function(){return w}.apply(t,[]))||(e.exports=r);var Zt=n.jQuery,Jt=n.$;return w.noConflict=function(e){return n.$===w&&(n.$=Jt),e&&n.jQuery===w&&(n.jQuery=Zt),w},void 0===i&&(n.jQuery=n.$=w),w}))},function(e,t,n){"use strict";var r=n(16),i=t.toInt=function(e){return parseInt(e,10)||0};function o(e){return["ps--in-scrolling"].concat(void 0===e?["ps--x","ps--y"]:["ps--"+e])}t.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=0;t<e.classList.length;t++){var n=e.classList[t];0===n.indexOf("ps-")&&e.classList.remove(n)}},t.outerWidth=function(e){return i(r.css(e,"width"))+i(r.css(e,"paddingLeft"))+i(r.css(e,"paddingRight"))+i(r.css(e,"borderLeftWidth"))+i(r.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){for(var n=o(t),r=0;r<n.length;r++)e.classList.add(n[r])},t.stopScrolling=function(e,t){for(var n=o(t),r=0;r<n.length;r++)e.classList.remove(n[r])},t.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},function(e,t,n){"use strict";var r=n(6),i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(i("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(i("ps-x-reach-start")));var o=r.get(e);"top"===t&&n>=o.contentHeight-o.containerHeight&&((n=o.contentHeight-o.containerHeight)-e.scrollTop<=2?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(i("ps-y-reach-end"))),"left"===t&&n>=o.contentWidth-o.containerWidth&&((n=o.contentWidth-o.containerWidth)-e.scrollLeft<=2?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(i("ps-x-reach-end"))),void 0===o.lastTop&&(o.lastTop=e.scrollTop),void 0===o.lastLeft&&(o.lastLeft=e.scrollLeft),"top"===t&&n<o.lastTop&&e.dispatchEvent(i("ps-scroll-up")),"top"===t&&n>o.lastTop&&e.dispatchEvent(i("ps-scroll-down")),"left"===t&&n<o.lastLeft&&e.dispatchEvent(i("ps-scroll-left")),"left"===t&&n>o.lastLeft&&e.dispatchEvent(i("ps-scroll-right")),"top"===t&&n!==o.lastTop&&(e.scrollTop=o.lastTop=n,e.dispatchEvent(i("ps-scroll-y"))),"left"===t&&n!==o.lastLeft&&(e.scrollLeft=o.lastLeft=n,e.dispatchEvent(i("ps-scroll-x")))}},function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.loader=t.prepare=t.particles=t.mesh=t.loaders=t.interaction=t.filters=t.extras=t.extract=t.accessibility=void 0;var r=n(102);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var i=n(1);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}));var o,s=n(164),a=(o=s)&&o.__esModule?o:{default:o},l=v(n(165)),u=v(n(167)),c=v(n(78)),h=v(n(177)),d=v(n(184)),p=v(n(186)),f=v(n(190)),g=v(n(195)),m=v(n(200));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}i.utils.mixins.performMixins();var y=p.shared||null;t.accessibility=l,t.extract=u,t.extras=c,t.filters=h,t.interaction=d,t.loaders=p,t.mesh=f,t.particles=g,t.prepare=m,t.loader=y,"function"==typeof a.default&&(0,a.default)(t),e.PIXI=t}).call(this,n(24))},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e,t){var n=i?i+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,a=new Array(s);o<s;o++)a[o]=r[o].fn;return a},a.prototype.emit=function(e,t,n,r,o,s){var a=i?i+e:e;if(!this._events[a])return!1;var l,u,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,s),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,r);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},a.prototype.on=function(e,t,n){var r=new s(t,n||this),o=i?i+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},a.prototype.once=function(e,t,n){var r=new s(t,n||this,!0),o=i?i+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},a.prototype.removeListener=function(e,t,n,r){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return 0==--this._eventsCount?this._events=new o:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||(0==--this._eventsCount?this._events=new o:delete this._events[s]);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==t||r&&!a[l].once||n&&a[l].context!==n)&&u.push(a[l]);u.length?this._events[s]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new o:delete this._events[s]}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new o:delete this._events[t])):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=i,a.EventEmitter=a,e.exports=a},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=h(n(17)),o=h(n(62)),s=h(n(63)),a=h(n(14)),l=n(5),u=n(3),c=h(n(4));function h(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(n,r,i,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));if(a.noFrame=!1,r||(a.noFrame=!0,r=new l.Rectangle(0,0,1,1)),n instanceof t&&(n=n.baseTexture),a.baseTexture=n,a._frame=r,a.trim=o,a.valid=!1,a.requiresUpdate=!1,a._uvs=null,a.orig=i||r,a._rotate=Number(s||0),!0===s)a._rotate=2;else if(a._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return n.hasLoaded?(a.noFrame&&(r=new l.Rectangle(0,0,n.width,n.height),n.on("update",a.onBaseTextureUpdated,a)),a.frame=r):n.once("loaded",a.onBaseTextureLoaded,a),a._updateID=0,a.transform=null,a.textureCacheIds=[],a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.update=function(){this.baseTexture.update()},t.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.noFrame?this.frame=new l.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},t.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},t.prototype.destroy=function(e){this.baseTexture&&(e&&(u.TextureCache[this.baseTexture.imageUrl]&&t.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},t.prototype._updateUvs=function(){this._uvs||(this._uvs=new s.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.fromImage=function(e,n,r,o){var s=u.TextureCache[e];return s||(s=new t(i.default.fromImage(e,n,r,o)),t.addToCache(s,e)),s},t.fromFrame=function(e){var t=u.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},t.fromCanvas=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new t(i.default.fromCanvas(e,n,r))},t.fromVideo=function(e,n){return"string"==typeof e?t.fromVideoUrl(e,n):new t(o.default.fromVideo(e,n))},t.fromVideoUrl=function(e,n){return new t(o.default.fromUrl(e,n))},t.from=function(e){if("string"==typeof e){var n=u.TextureCache[e];return n||(null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?t.fromVideoUrl(e):t.fromImage(e))}return e instanceof HTMLImageElement?new t(i.default.from(e)):e instanceof HTMLCanvasElement?t.fromCanvas(e,c.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?t.fromVideo(e):e instanceof i.default?new t(e):e},t.fromLoader=function(e,n,r){var o=new i.default(e,void 0,(0,u.getResolutionOfUrl)(n)),s=new t(o);return o.imageUrl=n,r||(r=n),i.default.addToCache(s.baseTexture,r),t.addToCache(s,r),r!==n&&(i.default.addToCache(s.baseTexture,n),t.addToCache(s,n)),s},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),u.TextureCache[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),u.TextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=u.TextureCache[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete u.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)u.TextureCache[e.textureCacheIds[r]]===e&&delete u.TextureCache[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},r(t,[{key:"frame",get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,n=e.y,r=e.width,i=e.height,o=t+r>this.baseTexture.width,s=n+i>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",l="X: "+t+" + "+r+" = "+(t+r)+" > "+this.baseTexture.width,u="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+a+" "+u)}this.valid=r&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),t}(a.default);function p(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}t.default=d,d.EMPTY=new d(new i.default),p(d.EMPTY),p(d.EMPTY.baseTexture),d.WHITE=function(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new d(new i.default(e))}(),p(d.WHITE),p(d.WHITE.baseTexture)},function(e,t,n){"use strict";var r={};r.create=function(e,t){var n=document.createElement(e);return n.className=t,n},r.appendTo=function(e,t){return t.appendChild(e),e},r.css=function(e,t,n){return"object"==typeof t?function(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r=r.toString()+"px"),e.style[n]=r}return e}(e,t):void 0===n?function(e,t){return window.getComputedStyle(e)[t]}(e,t):function(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}(e,t,n)},r.matches=function(e,t){return void 0!==e.matches?e.matches(t):e.msMatchesSelector(t)},r.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},r.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return r.matches(e,t)}))},e.exports=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(3),i=l(n(4)),o=l(n(14)),s=l(n(123)),a=l(n(37));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(n,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return a.uid=(0,r.uid)(),a.touched=0,a.resolution=s||i.default.RESOLUTION,a.width=100,a.height=100,a.realWidth=100,a.realHeight=100,a.scaleMode=void 0!==o?o:i.default.SCALE_MODE,a.hasLoaded=!1,a.isLoading=!1,a.source=null,a.origSource=null,a.imageType=null,a.sourceScale=1,a.premultipliedAlpha=!0,a.imageUrl=null,a.isPowerOfTwo=!1,a.mipmap=i.default.MIPMAP_TEXTURES,a.wrapMode=i.default.WRAP_MODE,a._glTextures={},a._enabled=0,a._virtalBoundId=-1,a._destroyed=!1,a.textureCacheIds=[],n&&a.loadSource(n),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},t.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=a.default.isPow2(this.realWidth)&&a.default.isPow2(this.realHeight)},t.prototype.loadSource=function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var n=!this.source;if(this.source=e,(e.src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),n&&this.emit("loaded",this);else if(!e.getContext){this.isLoading=!0;var r=this;if(e.onload=function(){r._updateImageType(),e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),"svg"!==r.imageType?r.emit("loaded",r):r._loadSvgSource())},e.onerror=function(){e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this)}}},t.prototype._updateImageType=function(){if(this.imageUrl){var e=(0,r.decomposeDataUri)(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var n=e.subType.split("+")[0];if(!(t=(0,r.getUrlFileExtension)("."+n)))throw new Error("Invalid image type in data URI.")}else(t=(0,r.getUrlFileExtension)(this.imageUrl))||(t="png");this.imageType=t}},t.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=(0,r.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},t.prototype._loadSvgSourceUsingDataUri=function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},t.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()},t.prototype._loadSvgSourceUsingString=function(e){var n=(0,r.getSvgSize)(e),i=n.width,o=n.height;if(!i||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(i*this.sourceScale),this.realHeight=Math.round(o*this.sourceScale),this._updateDimensions();var s=document.createElement("canvas");s.width=this.realWidth,s.height=this.realHeight,s._pixiId="canvas_"+(0,r.uid)(),s.getContext("2d").drawImage(this.source,0,0,i,o,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=s,t.addToCache(this,s._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},t.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},t.prototype.destroy=function(){this.imageUrl&&(delete r.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},t.fromImage=function(e,n,i,o){var a=r.BaseTextureCache[e];if(!a){var l=new Image;void 0===n&&0!==e.indexOf("data:")?l.crossOrigin=(0,s.default)(e):n&&(l.crossOrigin="string"==typeof n?n:"anonymous"),(a=new t(l,i)).imageUrl=e,o&&(a.sourceScale=o),a.resolution=(0,r.getResolutionOfUrl)(e),l.src=e,t.addToCache(a,e)}return a},t.fromCanvas=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=i+"_"+(0,r.uid)());var o=r.BaseTextureCache[e._pixiId];return o||(o=new t(e,n),t.addToCache(o,e._pixiId)),o},t.from=function(e,n,i){if("string"==typeof e)return t.fromImage(e,void 0,n,i);if(e instanceof HTMLImageElement){var o=e.src,s=r.BaseTextureCache[o];return s||((s=new t(e,n)).imageUrl=o,i&&(s.sourceScale=i),s.resolution=(0,r.getResolutionOfUrl)(o),t.addToCache(s,o)),s}return e instanceof HTMLCanvasElement?t.fromCanvas(e,n):e},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),r.BaseTextureCache[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),r.BaseTextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=r.BaseTextureCache[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete r.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i)delete r.BaseTextureCache[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null},t}(o.default);t.default=u},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),s=n(58);var a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n.children=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)this.addChild(arguments[n]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e},t.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var n=this.getChildIndex(e);(0,o.removeItems)(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)this.removeChild(arguments[n]);else{var r=this.children.indexOf(e);if(-1===r)return null;e.parent=null,e.transform._parentID=-1,(0,o.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this)}return e},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,o.removeItems)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t},t.prototype.removeChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=e,r="number"==typeof t?t:this.children.length,i=r-n,o=void 0;if(i>0&&i<=r){o=this.children.splice(n,i);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].renderWebGL(e)}},t.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}n&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(e);e.flush(),n&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},t.prototype._renderWebGL=function(e){},t.prototype._renderCanvas=function(e){},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.prototype.destroy=function(t){e.prototype.destroy.call(this);var n="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(t)},i(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);t.default=a,a.prototype.containerUpdateTransform=a.prototype.updateTransform},function(e,t,n){"use strict";t.__esModule=!0;var r=c(n(64)),i=c(n(133)),o=c(n(66)),s=c(n(134)),a=n(3),l=n(2),u=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"Canvas",n,r,o));return a.type=l.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.context=a.rootContext,a.refresh=!0,a.maskManager=new i.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,s.default)(),a._activeBlendMode=null,a.renderingToScreen=!1,a.resize(a.options.width,a.options.height),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(e,t,n,r,i){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var s=this.resolution;t?((t=t.baseTexture||t)._canvasRenderTarget||(t._canvasRenderTarget=new o.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(t||(this._lastObjectRendered=e),!i){var u=e.parent,c=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(c),this._tempDisplayObjectParent.transform._worldID=-1):c.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=u}a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=l.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[l.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==n?n:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var h=this.context;this.context=a,e.renderCanvas(this),this.context=h,this.resolution=s,this.emit("postrender")}},t.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){this.destroyPlugins(),e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=u.default.SCALE_MODE===l.SCALE_MODES.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t}(r.default);t.default=h,a.pluginTarget.mixin(h)},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}return e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(7),o=n(4),s=(r=o)&&r.__esModule?r:{default:r};function a(e,t){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var n=e.slice(0);return n.unshift("precision "+t+" float;"),n}}else if("precision"!==e.substring(0,9))return"precision "+t+" float;\n"+e;return e}var l=function(e){function t(n,r,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,a(r,s.default.PRECISION_VERTEX),a(i,s.default.PRECISION_FRAGMENT)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.GLShader);t.default=l},function(e,t,n){"use strict";var r=n(187).Loader,i=n(43).Resource,o=n(91),s=n(92);r.Resource=i,r.async=o,r.encodeBinary=s,r.base64=s,e.exports=r,e.exports.Loader=r,e.exports.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),s=n(42),a=(r=s)&&r.__esModule?r:{default:r};var l=new o.Point,u=new o.Polygon,c=function(e){function t(n,r,i,s,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return u._texture=n,u.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),u.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),u.indices=s||new Uint16Array([0,1,3,2]),u.dirty=0,u.indexDirty=0,u.blendMode=o.BLEND_MODES.NORMAL,u.canvasPadding=0,u.drawMode=l||t.DRAW_MODES.TRIANGLE_MESH,u.shader=null,u.tintRgb=new Float32Array([1,1,1]),u._glDatas={},u._uvTransform=new a.default(n),u.uploadUvTransform=!1,u.pluginName="mesh",u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(e){this._uvTransform.update(e)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,l);for(var n=this.vertices,r=u.points,i=this.indices,o=this.indices.length,s=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<o;a+=s){var c=2*i[a],h=2*i[a+1],d=2*i[a+2];if(r[0]=n[c],r[1]=n[c+1],r[2]=n[h],r[3]=n[h+1],r[4]=n[d],r[5]=n[d+1],u.contains(l.x,l.y))return!0}return!1},i(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return o.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=o.utils.hex2rgb(e,this.tintRgb)}}]),t}(o.Container);t.default=c,c.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(20);var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(e){},t}(((r=i)&&r.__esModule?r:{default:r}).default);t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r=y(n(64)),i=y(n(136)),o=y(n(139)),s=y(n(140)),a=y(n(27)),l=y(n(25)),u=y(n(142)),c=y(n(17)),h=y(n(143)),d=y(n(144)),p=y(n(146)),f=y(n(147)),g=n(3),m=y(n(7)),v=n(2);function y(e){return e&&e.__esModule?e:{default:e}}var b=0,_=function(e){function t(n,r,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"WebGL",n,r,s));return a.legacy=a.options.legacy,a.legacy&&(m.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=v.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new i.default(a),a.stencilManager=new o.default(a),a.emptyRenderer=new l.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,f.default)(a.options.context),a.gl=a.options.context||m.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=b++,a.state=new d.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,p.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this.textureManager=new u.default(this),this.filterManager=new s.default(this),this.textureGC=new h.default(this),this.state.resetToDefault(),this.rootRenderTarget=new a.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var n=new m.default.GLTexture.fromData(e,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var i=0;i<t;i++){var o=new c.default;o._glTextures[this.CONTEXT_UID]=n,this.boundTextures[i]=r,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(e,t,n,r,i){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!i){var o=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=o}this.bindRenderTexture(t,r),this.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(e,t){r.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},t.prototype.clear=function(e){this._activeRenderTarget.clear(e)},t.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},t.prototype.clearRenderTexture=function(e,t){var n=e.baseTexture._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(t),this},t.prototype.bindRenderTexture=function(e,t){var n=void 0;if(e){var r=e.baseTexture;r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),(n=r._glRenderTargets[this.CONTEXT_UID]).setFrame(e.frame)}else n=this.rootRenderTarget;return n.transform=t,this.bindRenderTarget(n),this},t.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},t.prototype.bindShader=function(e,t){return this._activeShader!==e&&(this._activeShader=e,e.bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(e,t,n){if((e=(e=e||this.emptyTextures[t]).baseTexture||e).touched=this.textureGC.count,n)t=t||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===e)return r;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=e._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[t]=e,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(e,t),t},t.prototype.unbindTexture=function(e){var t=this.gl;e=e.baseTexture||e;for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]===e&&(this.boundTextures[n]=this.emptyTextures[n],t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[n]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new m.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},t.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},t}(r.default);t.default=_,g.pluginTarget.mixin(_)},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(5),o=n(2),s=n(4),a=(r=s)&&r.__esModule?r:{default:r},l=n(7);var u=function(){function e(t,n,r,s,u,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new i.Rectangle(0,0,1,1),this.resolution=u||a.default.RESOLUTION,this.projectionMatrix=new i.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new i.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==s?s:a.default.SCALE_MODE,this.root=c,this.root?(this.frameBuffer=new l.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===o.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(n,r)}return e.prototype.clear=function(e){var t=e||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},e.prototype.setFrame=function(e,t){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame},e.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):e.disable(e.SCISSOR_TEST),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},e.prototype.calculateProjection=function(e,t){var n=this.projectionMatrix;t=t||e,n.identity(),this.root?(n.a=1/e.width*2,n.d=-1/e.height*2,n.tx=-1-t.x*n.a,n.ty=1-t.y*n.d):(n.a=1/e.width*2,n.d=1/e.height*2,n.tx=-1-t.x*n.a,n.ty=-1-t.y*n.d)},e.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){this.size.width=e,this.size.height=t,this.defaultFrame.width=e,this.defaultFrame.height=t,this.frameBuffer.resize(e*this.resolution,t*this.resolution);var n=this.frame||this.size;this.calculateProjection(n)}},e.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},e}();t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){e.nativeLines?function(e,t){var n=0,r=e.points;if(0===r.length)return;var o=t.points,s=r.length/2,a=(0,i.hex2rgb)(e.lineColor),l=e.lineAlpha,u=a[0]*l,c=a[1]*l,h=a[2]*l;for(n=1;n<s;n++){var d=r[2*(n-1)],p=r[2*(n-1)+1],f=r[2*n],g=r[2*n+1];o.push(d,p),o.push(u,c,h,l),o.push(f,g),o.push(u,c,h,l)}}(e,n):function(e,t){var n=e.points;if(0===n.length)return;var o=new r.Point(n[0],n[1]),s=new r.Point(n[n.length-2],n[n.length-1]);if(o.x===s.x&&o.y===s.y){(n=n.slice()).pop(),n.pop();var a=(s=new r.Point(n[n.length-2],n[n.length-1])).x+.5*(o.x-s.x),l=s.y+.5*(o.y-s.y);n.unshift(a,l),n.push(a,l)}var u=t.points,c=t.indices,h=n.length/2,d=n.length,p=u.length/6,f=e.lineWidth/2,g=(0,i.hex2rgb)(e.lineColor),m=e.lineAlpha,v=g[0]*m,y=g[1]*m,b=g[2]*m,_=n[0],T=n[1],x=n[2],w=n[3],E=0,S=0,M=-(T-w),I=_-x,P=0,A=0,O=0,C=0,R=Math.sqrt(M*M+I*I);M/=R,I/=R,M*=f,I*=f,u.push(_-M,T-I,v,y,b,m),u.push(_+M,T+I,v,y,b,m);for(var k=1;k<h-1;++k){_=n[2*(k-1)],T=n[2*(k-1)+1],x=n[2*k],w=n[2*k+1],E=n[2*(k+1)],S=n[2*(k+1)+1],M=-(T-w),I=_-x,R=Math.sqrt(M*M+I*I),M/=R,I/=R,M*=f,I*=f,P=-(w-S),A=x-E,R=Math.sqrt(P*P+A*A),P/=R,A/=R;var D=-I+T-(-I+w),L=-M+x-(-M+_),N=(-M+_)*(-I+w)-(-M+x)*(-I+T),U=-(A*=f)+S-(-A+w),F=-(P*=f)+x-(-P+E),B=(-P+E)*(-A+w)-(-P+x)*(-A+S),G=D*F-U*L;if(Math.abs(G)<.1)G+=10.1,u.push(x-M,w-I,v,y,b,m),u.push(x+M,w+I,v,y,b,m);else{var j=(L*B-F*N)/G,H=(U*N-D*B)/G;(j-x)*(j-x)+(H-w)*(H-w)>196*f*f?(O=M-P,C=I-A,R=Math.sqrt(O*O+C*C),O/=R,C/=R,O*=f,C*=f,u.push(x-O,w-C),u.push(v,y,b,m),u.push(x+O,w+C),u.push(v,y,b,m),u.push(x-O,w-C),u.push(v,y,b,m),d++):(u.push(j,H),u.push(v,y,b,m),u.push(x-(j-x),w-(H-w)),u.push(v,y,b,m))}}_=n[2*(h-2)],T=n[2*(h-2)+1],x=n[2*(h-1)],w=n[2*(h-1)+1],M=-(T-w),I=_-x,R=Math.sqrt(M*M+I*I),M/=R,I/=R,M*=f,I*=f,u.push(x-M,w-I),u.push(v,y,b,m),u.push(x+M,w+I),u.push(v,y,b,m),c.push(p);for(var X=0;X<d;++X)c.push(p++);c.push(p-1)}(e,t)};var r=n(5),i=n(3)},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copy=function(e){this.set(e.x,e.y)},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(29),s=(r=o)&&r.__esModule?r:{default:r};var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.a=t,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=s,this.array=null}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,n,r,i,o){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(e,t){t=t||new s.default;var n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new s.default;var n=1/(this.a*this.d+this.c*-this.b),r=e.x,i=e.y;return t.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,o=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this},e.prototype.append=function(e){var t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this},e.prototype.setTransform=function(e,t,n,r,i,o,s,a,l){var u=Math.sin(s),c=Math.cos(s),h=Math.cos(l),d=Math.sin(l),p=-Math.sin(a),f=Math.cos(a),g=c*i,m=u*i,v=-u*o,y=c*o;return this.a=h*g+d*v,this.b=h*m+d*y,this.c=p*g+f*v,this.d=p*m+f*y,this.tx=e+(n*g+r*v),this.ty=t+(n*m+r*y),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,o=-Math.atan2(-r,i),s=Math.atan2(n,t);return Math.abs(o+s)<1e-5?(e.rotation=s,t<0&&i>=0&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skew.x=e.skew.y=0):(e.skew.x=o,e.skew.y=s),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx,e.position.y=this.ty,e},e.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,o=e*r-t*n;return this.a=r/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(e*this.ty-t*i)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i(e,null,[{key:"IDENTITY",get:function(){return new e}},{key:"TEMP_MATRIX",get:function(){return new e}}]),e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2);var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=Number(t),this.y=Number(n),this.width=Number(r),this.height=Number(o),this.type=i.SHAPES.RECT}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},e.prototype.pad=function(e,t){e=e||0,t=t||(0!==t?e:0),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t},e.prototype.fit=function(e){this.x<e.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=e.x),this.y<e.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=e.y),this.x+this.width>e.x+e.width&&(this.width=e.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>e.y+e.height&&(this.height=e.height-this.y,this.height<0&&(this.height=0))},e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.width=n-t,this.y=r,this.height=i-r},r(e,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new e(0,0,0,0)}}]),e}();t.default=o},function(e,t){var n=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=function(e,t){if(!n){var i=Object.keys(r);n={};for(var o=0;o<i.length;++o){var s=i[o];n[e[s]]=r[s]}}return n[t]}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(5);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:((e=e||new r.Rectangle(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addQuad=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=e[0],s=e[1];t=o<t?o:t,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,t=(o=e[2])<t?o:t,n=(s=e[3])<n?s:n,r=o>r?o:r,i=s>i?s:i,t=(o=e[4])<t?o:t,n=(s=e[5])<n?s:n,r=o>r?o:r,i=s>i?s:i,t=(o=e[6])<t?o:t,n=(s=e[7])<n?s:n,r=o>r?o:r,i=s>i?s:i,this.minX=t,this.minY=n,this.maxX=r,this.maxY=i},e.prototype.addFrame=function(e,t,n,r,i){var o=e.worldTransform,s=o.a,a=o.b,l=o.c,u=o.d,c=o.tx,h=o.ty,d=this.minX,p=this.minY,f=this.maxX,g=this.maxY,m=s*t+l*n+c,v=a*t+u*n+h;d=m<d?m:d,p=v<p?v:p,f=m>f?m:f,g=v>g?v:g,d=(m=s*r+l*n+c)<d?m:d,p=(v=a*r+u*n+h)<p?v:p,f=m>f?m:f,g=v>g?v:g,d=(m=s*t+l*i+c)<d?m:d,p=(v=a*t+u*i+h)<p?v:p,f=m>f?m:f,g=v>g?v:g,d=(m=s*r+l*i+c)<d?m:d,p=(v=a*r+u*i+h)<p?v:p,f=m>f?m:f,g=v>g?v:g,this.minX=d,this.minY=p,this.maxX=f,this.maxY=g},e.prototype.addVertices=function(e,t,n,r){for(var i=e.worldTransform,o=i.a,s=i.b,a=i.c,l=i.d,u=i.tx,c=i.ty,h=this.minX,d=this.minY,p=this.maxX,f=this.maxY,g=n;g<r;g+=2){var m=t[g],v=t[g+1],y=o*m+a*v+u,b=l*v+s*m+c;h=y<h?y:h,d=b<d?b:d,p=y>p?y:p,f=b>f?b:f}this.minX=h,this.minY=d,this.maxX=p,this.maxY=f},e.prototype.addBounds=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>i?e.maxY:i},e.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=i&&r<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=r<a?r:a,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},e.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=i&&r<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=r<a?r:a,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},e}();t.default=i},function(e,t,n){var r,i,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,_,T,x,w,E;s=this,a=/iPhone/i,l=/iPod/i,u=/iPad/i,c=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,h=/Android/i,d=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,p=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,f=/Windows Phone/i,g=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,m=/BlackBerry/i,v=/BB10/i,y=/Opera Mini/i,b=/(CriOS|Chrome)(?=.*\bMobile\b)/i,_=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,T=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),x=function(e,t){return e.test(t)},w=function(e){var t=e||navigator.userAgent,n=t.split("[FBAN");if(void 0!==n[1]&&(t=n[0]),void 0!==(n=t.split("Twitter"))[1]&&(t=n[0]),this.apple={phone:x(a,t),ipod:x(l,t),tablet:!x(a,t)&&x(u,t),device:x(a,t)||x(l,t)||x(u,t)},this.amazon={phone:x(d,t),tablet:!x(d,t)&&x(p,t),device:x(d,t)||x(p,t)},this.android={phone:x(d,t)||x(c,t),tablet:!x(d,t)&&!x(c,t)&&(x(p,t)||x(h,t)),device:x(d,t)||x(p,t)||x(c,t)||x(h,t)},this.windows={phone:x(f,t),tablet:x(g,t),device:x(f,t)||x(g,t)},this.other={blackberry:x(m,t),blackberry10:x(v,t),opera:x(y,t),firefox:x(_,t),chrome:x(b,t),device:x(m,t)||x(v,t)||x(y,t)||x(_,t)||x(b,t)},this.seven_inch=x(T,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},E=function(){var e=new w;return e.Class=w,e},e.exports&&"undefined"==typeof window?e.exports=w:e.exports&&"undefined"!=typeof window?e.exports=E():(i=[],r=s.isMobile=E(),void 0===(o="function"==typeof r?r.apply(t,i):r)||(e.exports=o))},function(e,t,n){"use strict";t.__esModule=!0;var r=n(5);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return e.prototype.updateLocalTransform=function(){},e.prototype.updateTransform=function(e){var t=e.worldTransform,n=this.worldTransform,r=this.localTransform;n.a=r.a*t.a+r.b*t.c,n.b=r.a*t.b+r.b*t.d,n.c=r.c*t.a+r.d*t.c,n.d=r.c*t.b+r.d*t.d,n.tx=r.tx*t.a+r.ty*t.c+t.tx,n.ty=r.tx*t.b+r.ty*t.d+t.ty,this._worldID++},e}();t.default=i,i.prototype.updateWorldTransform=i.prototype.updateTransform,i.IDENTITY=new i},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),o=n(3),s=n(2),a=u(n(15)),l=u(n(18));function u(e){return e&&e.__esModule?e:{default:e}}var c=new i.Point,h=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return r._anchor=new i.ObservablePoint(r._onAnchorUpdate,r),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=s.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=n||a.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,o.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,o.sign)(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var e=this._texture,t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,s=t.tx,a=t.ty,l=this.vertexData,u=e.trim,c=e.orig,h=this._anchor,d=0,p=0,f=0,g=0;u?(d=(p=u.x-h._x*c.width)+u.width,f=(g=u.y-h._y*c.height)+u.height):(d=(p=-h._x*c.width)+c.width,f=(g=-h._y*c.height)+c.height),l[0]=n*p+i*g+s,l[1]=o*g+r*p+a,l[2]=n*d+i*g+s,l[3]=o*g+r*d+a,l[4]=n*d+i*f+s,l[5]=o*f+r*d+a,l[6]=n*p+i*f+s,l[7]=o*f+r*p+a}},t.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,n=e.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,l=i.d,u=i.tx,c=i.ty,h=-r._x*n.width,d=h+n.width,p=-r._y*n.height,f=p+n.height;t[0]=o*h+a*p+u,t[1]=l*p+s*h+c,t[2]=o*d+a*p+u,t[3]=l*p+s*d+c,t[4]=o*d+a*f+u,t[5]=l*f+s*d+c,t[6]=o*h+a*f+u,t[7]=l*f+s*h+c},t.prototype._renderWebGL=function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,c);var t=this._texture.orig.width,n=this._texture.orig.height,r=-t*this.anchor.x,i=0;return c.x>=r&&c.x<r+t&&(i=-n*this.anchor.y,c.y>=i&&c.y<i+n)},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var n="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null,this.shader=null},t.from=function(e){return new t(a.default.from(e))},t.fromFrame=function(e){var n=o.TextureCache[e];if(!n)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new t(n)},t.fromImage=function(e,n,r){return new t(a.default.fromImage(e,n,r))},r(t,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=(0,o.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=(0,o.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=r,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(i),t.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},function(e,t,n){"use strict";t.__esModule=!0,t.Ticker=t.shared=void 0;var r,i=n(130),o=(r=i)&&r.__esModule?r:{default:r};var s=new o.default;s.autoStart=!0,s.destroy=function(){},t.shared=s,t.Ticker=o.default},function(e,t,n){"use strict";t.__esModule=!0;var r=i(n(65));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=null;if(!(n instanceof r.default)){var s=arguments[1],a=arguments[2],l=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+a+") instead of the ctor directly."),o=arguments[0],i=null,n=new r.default(s,a,l,u)}var c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return c.legacyRenderer=o,c.valid=!0,c._updateUvs(),c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.resize=function(e,t,n){this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,n||this.baseTexture.resize(e,t),this._updateUvs()},t.create=function(e,n,i,o){return new t(new r.default(e,n,i,o))},t}(i(n(15)).default);t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(3),o=n(67);var s={getTintedTexture:function(e,t){var n=e._texture,r="#"+("00000"+(0|(t=s.roundColor(t))).toString(16)).substr(-6);n.tintCache=n.tintCache||{};var i=n.tintCache[r],o=void 0;if(i){if(i.tintId===n._updateID)return n.tintCache[r];o=n.tintCache[r]}else o=s.canvas||document.createElement("canvas");if(s.tintMethod(n,t,o),o.tintId=n._updateID,s.convertTintToImage){var a=new Image;a.src=o.toDataURL(),n.tintCache[r]=a}else n.tintCache[r]=o,s.canvas=null;return o},tintWithMultiply:function(e,t,n){var r=n.getContext("2d"),i=e._frame.clone(),o=e.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithOverlay:function(e,t,n){var r=n.getContext("2d"),i=e._frame.clone(),o=e.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithPerPixel:function(e,t,n){var r=n.getContext("2d"),o=e._frame.clone(),s=e.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,n.width=Math.ceil(o.width),n.height=Math.ceil(o.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),r.restore();for(var a=(0,i.hex2rgb)(t),l=a[0],u=a[1],c=a[2],h=r.getImageData(0,0,o.width,o.height),d=h.data,p=0;p<d.length;p+=4)d[p+0]*=l,d[p+1]*=u,d[p+2]*=c;r.putImageData(h,0,0)},roundColor:function(e){var t=s.cacheStepsPerColorChannel,n=(0,i.hex2rgb)(e);return n[0]=Math.min(255,n[0]/t*t),n[1]=Math.min(255,n[1]/t*t),n[2]=Math.min(255,n[2]/t*t),(0,i.rgb2hex)(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,((r=o)&&r.__esModule?r:{default:r}).default)(),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel,t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){for(var t=6*e,n=new Uint16Array(t),r=0,i=0;r<t;r+=6,i+=4)n[r+0]=i+0,n[r+1]=i+1,n[r+2]=i+2,n[r+3]=i+0,n[r+4]=i+2,n[r+5]=i+3;return n}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(30),s=(r=o)&&r.__esModule?r:{default:r};var a=new s.default,l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._texture=t,this.mapCoord=new s.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===n?.5:n}return e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var n=this.mapCoord,r=0;r<e.length;r+=2){var i=e[r],o=e[r+1];t[r]=i*n.a+o*n.c+n.tx,t[r+1]=i*n.b+o*n.d+n.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=t.orig,i=t.trim;i&&(a.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(a));var o=t.baseTexture,s=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return s[0]=(t._frame.x+l+u)/o.width,s[1]=(t._frame.y+l+u)/o.height,s[2]=(t._frame.x+t._frame.width-l+u)/o.width,s[3]=(t._frame.y+t._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,!0},i(e,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),e}();t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.Resource=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(90)),o=s(n(89));function s(e){return e&&e.__esModule?e:{default:e}}var a=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;function u(){}var c=t.Resource=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof t||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=t,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=u,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o.default,this.onProgress=new o.default,this.onComplete=new o.default,this.onAfterMiddleware=new o.default}return e.setExtensionLoadType=function(t,n){h(e._loadTypeMap,t,n)},e.setExtensionXhrType=function(t,n){h(e._xhrTypeMap,t,n)},e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(t){var n=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout((function(){return t(n)}),1);else switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:a&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e.prototype._hasFlag=function(e){return 0!=(this._flags&e)},e.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(e,this.url[n],Array.isArray(t)?t[n]:t));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},e.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout((function(){return e.send()}),1)},e.prototype._createSource=function(e,t,n){n||(n=e+"/"+this._getExtension(t));var r=document.createElement("source");return r.src=t,r.type=n,r},e.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(d(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},e.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(d(e)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(d(e)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,n="",r=void 0===t.status?200:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(n=t.responseText),0===r&&(n.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=e.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=e.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=t.response||n;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},e.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";t=t||window.location,l||(l=document.createElement("a")),l.href=e;var n=!(e=(0,i.default)(l.href,{strictMode:!0})).port&&""===t.port||e.port===t.port,r=e.protocol?e.protocol+":":"";return e.host===t.hostname&&n&&r===t.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var n=e.indexOf("/");t=e.substring(n+1,e.indexOf(";",n))}else{var r=e.indexOf("?"),i=e.indexOf("#"),o=Math.min(r>-1?r:e.length,i>-1?i:e.length);t=(e=e.substring(0,o)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();function h(e,t,n){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=n)}function d(e){return e.toString().replace("object ","")}c.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},c.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},c.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},c.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},c._loadTypeMap={gif:c.LOAD_TYPE.IMAGE,png:c.LOAD_TYPE.IMAGE,bmp:c.LOAD_TYPE.IMAGE,jpg:c.LOAD_TYPE.IMAGE,jpeg:c.LOAD_TYPE.IMAGE,tif:c.LOAD_TYPE.IMAGE,tiff:c.LOAD_TYPE.IMAGE,webp:c.LOAD_TYPE.IMAGE,tga:c.LOAD_TYPE.IMAGE,svg:c.LOAD_TYPE.IMAGE,"svg+xml":c.LOAD_TYPE.IMAGE,mp3:c.LOAD_TYPE.AUDIO,ogg:c.LOAD_TYPE.AUDIO,wav:c.LOAD_TYPE.AUDIO,mp4:c.LOAD_TYPE.VIDEO,webm:c.LOAD_TYPE.VIDEO},c._xhrTypeMap={xhtml:c.XHR_RESPONSE_TYPE.DOCUMENT,html:c.XHR_RESPONSE_TYPE.DOCUMENT,htm:c.XHR_RESPONSE_TYPE.DOCUMENT,xml:c.XHR_RESPONSE_TYPE.DOCUMENT,tmx:c.XHR_RESPONSE_TYPE.DOCUMENT,svg:c.XHR_RESPONSE_TYPE.DOCUMENT,tsx:c.XHR_RESPONSE_TYPE.DOCUMENT,gif:c.XHR_RESPONSE_TYPE.BLOB,png:c.XHR_RESPONSE_TYPE.BLOB,bmp:c.XHR_RESPONSE_TYPE.BLOB,jpg:c.XHR_RESPONSE_TYPE.BLOB,jpeg:c.XHR_RESPONSE_TYPE.BLOB,tif:c.XHR_RESPONSE_TYPE.BLOB,tiff:c.XHR_RESPONSE_TYPE.BLOB,webp:c.XHR_RESPONSE_TYPE.BLOB,tga:c.XHR_RESPONSE_TYPE.BLOB,json:c.XHR_RESPONSE_TYPE.JSON,text:c.XHR_RESPONSE_TYPE.TEXT,txt:c.XHR_RESPONSE_TYPE.TEXT,ttf:c.XHR_RESPONSE_TYPE.BUFFER,otf:c.XHR_RESPONSE_TYPE.BUFFER},c.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",e.exports.default=c},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=n(96),s=(r=o)&&r.__esModule?r:{default:r};var a=i.ticker.shared;i.settings.UPLOADS_PER_FRAME=4;var l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limiter=new s.default(i.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){n.queue&&n.prepareItems()},this.registerFindHook(f),this.registerFindHook(g),this.registerFindHook(u),this.registerFindHook(c),this.registerFindHook(h),this.registerUploadHook(d),this.registerUploadHook(p)}return e.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,a.addOnce(this.tick,this,i.UPDATE_PRIORITY.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)a.addOnce(this.tick,this,i.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var s=0,l=o.length;s<l;s++)o[s]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof i.Container)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},e.prototype.destroy=function(){this.ticking&&a.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function u(e,t){var n=!1;if(e&&e._textures&&e._textures.length)for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof i.Texture){var o=e._textures[r].baseTexture;-1===t.indexOf(o)&&(t.push(o),n=!0)}return n}function c(e,t){return e instanceof i.BaseTexture&&(-1===t.indexOf(e)&&t.push(e),!0)}function h(e,t){if(e._texture&&e._texture instanceof i.Texture){var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function d(e,t){return t instanceof i.Text&&(t.updateText(!0),!0)}function p(e,t){if(t instanceof i.TextStyle){var n=t.toFontString();return i.TextMetrics.measureFont(n),!0}return!1}function f(e,t){if(e instanceof i.Text){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function g(e,t){return e instanceof i.TextStyle&&(-1===t.indexOf(e)&&t.push(e),!0)}t.default=l},function(e,t,n){(function(n){var r;!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||o;return e._counter=1e3,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&(t.masterGain.gain.value=e);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var s=t._howls[n]._soundById(r[i]);s&&s._node&&(s._node.volume=s._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||p(),t._muted=e,t.usingWebAudio&&(t.masterGain.gain.value=e?0:t._volume);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var s=t._howls[n]._soundById(r[i]);s&&s._node&&(s._node.muted=!!e||s._muted)}return t},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||o,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),n=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(!e._mobileEnabled&&e.ctx&&(t||n)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function(){o._autoResume();var t=e.ctx.createBufferSource();t.buffer=e._scratchBuffer,t.connect(e.ctx.destination),void 0===t.start?t.noteOn(0):t.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),t.onended=function(){t.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0)}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then((function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())})))}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new i,s=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(e){var t=this;return o.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.mobileAutoEnable&&o._enableMobileAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,r;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(r=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new a(this),this._webAudio&&u(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e){e="__default";for(var i=0,s=0;s<n._sounds.length;s++)n._sounds[s]._paused&&!n._sounds[s]._ended&&(i++,r=n._sounds[s]._id);1===i?e=null:r=null}}var a=r?n._soundById(r):n._inactiveSound();if(!a)return null;if(r&&!e&&(e=a._sprite||"__default"),"loaded"!==n._state){a._sprite=e,a._ended=!1;var l=a._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(r&&!a._paused)return t||setTimeout((function(){n._emit("play",a._id)}),0),a._id;n._webAudio&&o._autoResume();var u=Math.max(0,a._seek>0?a._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),h=1e3*c/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=e,a._seek=u,a._start=n._sprite[e][0]/1e3,a._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,a._loop=!(!a._loop&&!n._sprite[e][2]);var d=a._node;if(n._webAudio){var p=function(){n._refreshBuffer(a);var e=a._muted||n._muted?0:a._volume;d.gain.setValueAtTime(e,o.ctx.currentTime),a._playStart=o.ctx.currentTime,void 0===d.bufferSource.start?a._loop?d.bufferSource.noteGrainOn(0,u,86400):d.bufferSource.noteGrainOn(0,u,c):a._loop?d.bufferSource.start(0,u,86400):d.bufferSource.start(0,u,c),h!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),h)),t||setTimeout((function(){n._emit("play",a._id)}),0)};"running"===o.state?p():(n.once("resume",p),n._clearTimer(a._id))}else{var f=function(){d.currentTime=u,d.muted=a._muted||n._muted||o._muted||d.muted,d.volume=a._volume*o.volume(),d.playbackRate=a._rate;try{if(d.play(),d.paused)return void n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");h!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),h)),t||n._emit("play",a._id)}catch(e){n._emit("playerror",a._id,e)}},g=window&&window.ejecta||!d.readyState&&o._navigator.isCocoonJS;if(4===d.readyState||g)f();else{var m=function(){f(),d.removeEventListener(o._canPlayEvent,m,!1)};d.addEventListener(o._canPlayEvent,m,!1),n._clearTimer(a._id)}}return a._id},pause:function(e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var i=t._soundById(n[r]);if(i&&!i._paused&&(i._seek=t.seek(n[r]),i._rateSeek=0,i._paused=!0,t._stopFade(n[r]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),o._panner&&(o._panner.disconnect(),o._panner=null),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause())),t||n._emit("stop",o._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),i=0;i<r.length;i++){var s=n._soundById(r[i]);s&&(s._muted=e,n._webAudio&&s._node?s._node.gain.setValueAtTime(e?0:s._volume,o.ctx.currentTime):s._node&&(s._node.muted=!!o._muted||e),n._emit("mute",s._id))}return n},volume:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){var s=r._getSoundIds(),a=s.indexOf(i[0]);a>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var l=0;l<t.length;l++)(n=r._soundById(t[l]))&&(n._volume=e,i[2]||r._stopFade(t[l]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r,i){var s=this;if("loaded"!==s._state)return s._queue.push({event:"fade",action:function(){s.fade(e,t,n,r)}}),s;null==i&&s.volume(e,r);for(var a=s._getSoundIds(r),l=0;l<a.length;l++){var u=s._soundById(a[l]);if(u&&(r||s._stopFade(a[l]),s._webAudio&&!u._muted)){var c=o.ctx.currentTime,h=c+n/1e3;u._volume=e,null==i&&u._node.gain.setValueAtTime(e,c),u._node.gain.linearRampToValueAtTime(t,h)}}return s},_startFadeInterval:function(e,t,n,r,i){var o=this,s=t,a=t>n?"out":"in",l=Math.abs(t-n)/.01,u=l>0?r/l:r;u<4&&(l=Math.ceil(l/(4/u)),u=4),e._interval=setInterval((function(){l>0&&(s+="in"===a?.01:-.01),s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,o._webAudio?(void 0===i&&(o._volume=s),e._volume=s):o.volume(s,e._id,!0),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,o.volume(n,e._id),o._emit("fade",e._id))}),u)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(t._interval),t._interval=null,this._emit("fade",e)),this},loop:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;e=i[0],r._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var o=r._getSoundIds(t),s=0;s<o.length;s++)(n=r._soundById(o[s]))&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var e,t,n,r=this,i=arguments;if(0===i.length)t=r._sounds[0]._id;else if(1===i.length){var s=r._getSoundIds(),a=s.indexOf(i[0]);a>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(n=r._soundById(t))?n._rate:r._rate;if("loaded"!==r._state)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var l=0;l<t.length;l++)if(n=r._soundById(t[l])){n._rateSeek=r.seek(t[l]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart,n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.value=e:n._node&&(n._node.playbackRate=e);var u=r.seek(t[l]),c=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-u,h=1e3*c/Math.abs(n._rate);!r._endTimers[t[l]]&&n._paused||(r._clearTimer(t[l]),r._endTimers[t[l]]=setTimeout(r._ended.bind(r,n),h)),r._emit("rate",n._id)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){var i=n._getSoundIds(),s=i.indexOf(r[0]);s>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var a=n._soundById(t);if(a){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var l=n.playing(t)?o.ctx.currentTime-a._playStart:0,u=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(u+l*Math.abs(a._rate))}return a._node.currentTime}var c=n.playing(t);c&&n.pause(t,!0),a._seek=e,a._ended=!1,n._clearTimer(t),c&&n.play(t,!0),!n._webAudio&&a._node&&(a._node.currentTime=e),n._emit("seek",t)}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++){if(t[n]._paused||e.stop(t[n]._id),!e._webAudio)/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1);delete t[n]._node,e._clearTimer(t[n]._id);var r=o._howls.indexOf(e);r>=0&&o._howls.splice(r,1)}var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===e._src){i=!1;break}return l&&i&&delete l[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var i=this["_on"+e];return"function"==typeof t&&i.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(t===r[i].fn&&o||!t&&o){r.splice(i,1);break}}else if(e)this["_on"+e]=[];else{var s=Object.keys(this);for(i=0;i<s.length;i++)0===s[i].indexOf("_on")&&Array.isArray(this[s[i]])&&(this[s[i]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this["_on"+e],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,r[i].fn),0),r[i].once&&this.off(e,r[i].fn,r[i].id));return this},_loadQueue:function(){var e=this;if(e._queue.length>0){var t=e._queue[0];e.once(t.event,(function(){e._queue.shift(),e._loadQueue()})),t.action()}return e},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),r)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),o._autoSuspend()),this._webAudio||n||this.stop(e._id),this},_clearTimer:function(e){return this._endTimers[e]&&(clearTimeout(this._endTimers[e]),delete this._endTimers[e]),this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new a(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,this},_cleanBuffer:function(e){if(this._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=this._scratchBuffer}catch(e){}}return e.bufferSource=null,this}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=o._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(t,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload="auto",this._node.volume=t*o.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)}};var l={},u=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void d(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);h(r.buffer,e)}else{var o=new XMLHttpRequest;o.open("GET",t,!0),o.withCredentials=e._xhrWithCredentials,o.responseType="arraybuffer",o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?h(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},c(o)}},c=function(e){try{e.send()}catch(t){e.onerror()}},h=function(e,t){o.ctx.decodeAudioData(e,(function(e){e&&t._sounds.length>0&&(l[t._src]=e,d(t,e))}),(function(){t._emit("loaderror",null,"Decoding audio data failed.")}))},d=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(e){o.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());(o._navigator&&o._navigator.standalone&&!r||o._navigator&&!o._navigator.standalone&&!r)&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.value=o._muted?0:1,o.masterGain.connect(o.ctx.destination)),o._setup()};void 0===(r=function(){return{Howler:o,Howl:s}}.apply(t,[]))||(e.exports=r),t.Howler=o,t.Howl=s,"undefined"!=typeof window?(window.HowlerGlobal=i,window.Howler=o,window.Howl=s,window.Sound=a):void 0!==n&&(n.HowlerGlobal=i,n.Howler=o,n.Howl=s,n.Sound=a)}(),function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,r,i,o){if(!this.ctx||!this.ctx.listener)return this;var s=this._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,r="number"!=typeof r?s[3]:r,i="number"!=typeof i?s[4]:i,o="number"!=typeof o?s[5]:o,"number"!=typeof e?s:(this._orientation=[e,t,n,r,i,o],this.ctx.listener.setOrientation(e,t,n,r,i,o),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(e,n)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return r._stereo;r._stereo=e,r._pos=[e,0,0]}for(var o=r._getSoundIds(n),s=0;s<o.length;s++){var a=r._soundById(o[s]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,i),"spatial"===i?a._panner.setPosition(e,0,0):a._panner.pan.value=e),r._emit("stereo",a._id)}}return r},Howl.prototype.pos=function(e,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(e,n,r,i)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof e)return o._pos;o._pos=[e,n,r]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof e)return l._pos;l._pos=[e,n,r],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),l._panner.setPosition(e,n,r)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(e,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(e,n,r,i)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof e)return o._orientation;o._orientation=[e,n,r]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof e)return l._orientation;l._orientation=[e,n,r],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),t(l,"spatial")),l._panner.setOrientation(e,n,r)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var e,n,r,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(r=i._soundById(parseInt(o[0],10)))?r._pannerAttr:i._pannerAttr;e=o[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:i._panningModel})}else 2===o.length&&(e=o[0],n=parseInt(o[1],10));for(var s=i._getSoundIds(n),a=0;a<s.length;a++)if(r=i._soundById(s[a])){var l=r._pannerAttr;l={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:l.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:l.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:l.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:l.panningModel};var u=r._panner;u?(u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),t(r,"spatial"))}return i},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.value=e._stereo),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id)}}()}).call(this,n(24))},function(e,t){window.CountryNames={AL:"Albania",DZ:"Algeria",AD:"Andorra",AQ:"Antarctica",AR:"Argentina",AM:"Armenia",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BH:"Bahrain",BD:"Bangladesh",BY:"Belarus",BE:"Belgium",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BR:"Brazil",BG:"Bulgaria",CA:"Canada",CL:"Chile",CN:"China",CO:"Colombia",COMMUNIST:"Communist",CONFEDERATE:"Confederate",CR:"CostaRica",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DO:"Dominican Republic",KP:"DPRK",EC:"Ecuador",EG:"Egypt",SV:"ElSalvador",EE:"Estonia",EU:"European Union",FI:"Finland",FR:"France",GE:"Georgia",DE:"Germany",GR:"Greece",GT:"Guatemala",HN:"Honduras",HK:"HongKong",HU:"Hungary",IS:"Iceland",IMPERIAL:"Imperial Japan",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JOLLY:"Jolly Roger",JO:"Jordan",KZ:"Kazakhstan",KW:"Kuwait",LV:"Latvia",LB:"Lebanon",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MY:"Malaysia",MT:"Malta",MX:"Mexico",MD:"Moldova",MC:"Monaco",ME:"Montenegro",MA:"Morocco",NP:"Nepal",NL:"Netherlands",NZ:"New Zealand",NG:"Nigeria",NO:"Norway",OM:"Oman",PK:"Pakistan",PA:"Panama",PY:"Paraguay",PE:"Peru",PH:"Philippines",PL:"Poland",PT:"Portugal",PR:"PuertoRico",QA:"Qatar",RAINBOW:"Rainbow",RO:"Romania",RU:"Russian Federation",SM:"SanMarino",SA:"Saudi Arabia",RS:"Serbia",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SO:"Somalia",ZA:"South Africa",KR:"South Korea",ES:"Spain",LK:"Sri Lanka",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TZ:"Tanzania",TH:"Thailand",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",UN:"United Nations",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VE:"Venezuela",VN:"Vietnam"},window.FlagCodeById={1:"SY",2:"TH",3:"TM",4:"TN",5:"TR",6:"TT",7:"TW",8:"TZ",9:"UA",10:"UN",11:"US",12:"UY",13:"UZ",14:"VE",15:"VN",16:"PR",17:"PT",18:"PY",19:"QA",20:"RAINBOW",21:"RO",22:"RS",23:"RU",24:"SA",25:"SE",26:"SG",27:"SI",28:"SK",29:"SM",30:"MK",31:"MO",32:"MT",33:"MX",34:"MY",35:"NG",36:"NL",37:"NO",38:"NP",39:"NZ",40:"OM",41:"PA",42:"PE",43:"JP",44:"KP",45:"KR",46:"KW",47:"KZ",48:"LB",49:"LI",50:"LK",51:"LT",52:"LU",53:"LV",54:"HN",55:"HR",56:"HU",57:"ID",58:"IE",59:"IL",60:"IM",61:"IMPERIAL",62:"IN",63:"IQ",64:"DE",65:"DK",66:"DO",67:"DZ",68:"EC",69:"EE",70:"EG",71:"ES",72:"EU",73:"BH",74:"BO",75:"BR",76:"BT",77:"BY",78:"CA",79:"CH",80:"AD",81:"AE",82:"AL",83:"AM",84:"CL",85:"AQ",86:"CN",87:"AR",88:"FI",89:"CO",90:"AT",91:"IR",92:"FR",93:"COMMUNIST",94:"AU",95:"LY",96:"IS",97:"GB",98:"CONFEDERATE",99:"AZ",100:"MA",101:"IT",102:"GE",103:"CR",104:"BA",105:"PH",106:"MC",107:"JM",108:"GR",109:"CU",110:"BD",111:"SO",112:"PK",113:"MD",114:"JO",115:"GT",116:"CY",117:"BE",118:"ZA",119:"SV",120:"PL",121:"ME",122:"JOLLY",123:"HK",124:"CZ",125:"BG"},window.GameType={FFA:1,CTF:2,BTR:3},window.PlaneType={Predator:1,Goliath:2,Mohawk:3,Tornado:4,Prowler:5},window.MobType={PredatorMissile:1,GoliathMissile:2,MohawkMissile:3,Upgrade:4,TornadoSingleMissile:5,TornadoTripleMissile:6,ProwlerMissile:7,Shield:8,Inferno:9,CarrotMissile:12,MagicCrate:13},window.MissileMobTypeSet={[MobType.PredatorMissile]:!0,[MobType.GoliathMissile]:!0,[MobType.MohawkMissile]:!0,[MobType.TornadoSingleMissile]:!0,[MobType.TornadoTripleMissile]:!0,[MobType.ProwlerMissile]:!0,[MobType.CarrotMissile]:!0},window.CrateMobTypeSet={[MobType.Upgrade]:!0,[MobType.Shield]:!0,[MobType.Inferno]:!0,[MobType.MagicCrate]:!0},window.MobDespawnType={LifetimeEnded:0,Collided:1},window.CrateTextureNameByMobType={[MobType.Upgrade]:"crateUpgrade",[MobType.Shield]:"crateShield",[MobType.Inferno]:"crateRampage",[MobType.MagicCrate]:"crateMagic"}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._x=r,this._y=i,this.cb=t,this.scope=n}return e.prototype.set=function(e,t){var n=e||0,r=t||(0!==t?n:0);this._x===n&&this._y===r||(this._x=n,this._y=r,this.cb.call(this.scope))},e.prototype.copy=function(e){this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope))},r(e,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),e}();t.default=i},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(30),o=(r=i)&&r.__esModule?r:{default:r};var s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],l=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],c=[],h=[];function d(e){return e<0?-1:e>0?1:0}!function(){for(var e=0;e<16;e++){var t=[];h.push(t);for(var n=0;n<16;n++)for(var r=d(s[e]*s[n]+l[e]*a[n]),i=d(a[e]*s[n]+u[e]*a[n]),p=d(s[e]*l[n]+l[e]*u[n]),f=d(a[e]*l[n]+u[e]*u[n]),g=0;g<16;g++)if(s[g]===r&&a[g]===i&&l[g]===p&&u[g]===f){t.push(g);break}}for(var m=0;m<16;m++){var v=new o.default;v.set(s[m],a[m],l[m],u[m],0,0),c.push(v)}}();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return s[e]},uY:function(e){return a[e]},vX:function(e){return l[e]},vY:function(e){return u[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return h[e][t]},sub:function(e,t){return h[e][p.inv(t)]},rotate180:function(e){return 4^e},isSwapWidthHeight:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?p.S:p.N:2*Math.abs(t)<=Math.abs(e)?e>0?p.E:p.W:t>0?e>0?p.SE:p.SW:e>0?p.NE:p.NW},matrixAppendRotationInv:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=c[p.inv(t)];i.tx=n,i.ty=r,e.append(i)}};t.default=p},function(e,t){e.exports=function(e,t,n){var r;if(n){var i=n.tempAttribState,o=n.attribState;for(r=0;r<i.length;r++)i[r]=!1;for(r=0;r<t.length;r++)i[t[r].attribute.location]=!0;for(r=0;r<o.length;r++)o[r]!==i[r]&&(o[r]=i[r],n.attribState[r]?e.enableVertexAttribArray(r):e.disableVertexAttribArray(r))}else for(r=0;r<t.length;r++){var s=t[r];e.enableVertexAttribArray(s.attribute.location)}}},function(e,t){var n=function(e,t,n,r,i){this.gl=e,this.texture=e.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=n||-1,this.format=r||e.RGBA,this.type=i||e.UNSIGNED_BYTE};n.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var n=e.videoWidth||e.width,r=e.videoHeight||e.height;r!==this.height||n!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e),this.width=n,this.height=r};var r=!1;n.prototype.uploadData=function(e,t,n){this.bind();var i=this.gl;if(e instanceof Float32Array){if(!r){if(!i.getExtension("OES_texture_float"))throw new Error("floating point textures not available");r=!0}this.type=i.FLOAT}else this.type=this.type||i.UNSIGNED_BYTE;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||n!==this.height?i.texImage2D(i.TEXTURE_2D,0,this.format,t,n,0,this.format,this.type,e||null):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t,n,this.format,this.type,e||null),this.width=t,this.height=n},n.prototype.bind=function(e){var t=this.gl;void 0!==e&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},n.prototype.minFilter=function(e){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)},n.prototype.magFilter=function(e){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)},n.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},n.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},n.fromSource=function(e,t,r){var i=new n(e);return i.premultiplyAlpha=r||!1,i.upload(t),i},n.fromData=function(e,t,r,i){var o=new n(e);return o.uploadData(t,r,i),o},e.exports=n},function(e,t){var n=function(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.log(e.getShaderInfoLog(r)),null)};e.exports=function(e,t,r,i){var o=n(e,e.VERTEX_SHADER,t),s=n(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(e.attachShader(a,o),e.attachShader(a,s),i)for(var l in i)e.bindAttribLocation(a,i[l],l);return e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(a,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(a)),e.deleteProgram(a),a=null),e.deleteShader(o),e.deleteShader(s),a}},function(e,t,n){var r=n(32),i=n(53),o=function(e,t,n,r){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||!1,n||0,r||0)};e.exports=function(e,t){for(var n={},s=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var l=e.getActiveAttrib(t,a),u=r(e,l.type);n[l.name]={type:u,size:i(u),location:e.getAttribLocation(t,l.name),pointer:o}}return n}},function(e,t){var n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(e){return n[e]}},function(e,t,n){var r=n(32),i=n(55);e.exports=function(e,t){for(var n={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=e.getActiveUniform(t,s),l=a.name.replace(/\[.*?\]/,""),u=r(e,a.type);n[l]={type:u,size:a.size,location:e.getUniformLocation(t,l),value:i(u,a.size)}}return n}},function(e,t){var n=function(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=!1;return t};e.exports=function(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return n(2*t);case"bvec3":return n(3*t);case"bvec4":return n(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},function(e,t){e.exports=function(e,t){return"precision"!==e.substring(0,9)?"precision "+t+" float;\n"+e:e}},function(e,t){var n=function(e){return function(){return this.data[e].value}},r={float:function(e,t,n){e.uniform1f(t,n)},vec2:function(e,t,n){e.uniform2f(t,n[0],n[1])},vec3:function(e,t,n){e.uniform3f(t,n[0],n[1],n[2])},vec4:function(e,t,n){e.uniform4f(t,n[0],n[1],n[2],n[3])},int:function(e,t,n){e.uniform1i(t,n)},ivec2:function(e,t,n){e.uniform2i(t,n[0],n[1])},ivec3:function(e,t,n){e.uniform3i(t,n[0],n[1],n[2])},ivec4:function(e,t,n){e.uniform4i(t,n[0],n[1],n[2],n[3])},bool:function(e,t,n){e.uniform1i(t,n)},bvec2:function(e,t,n){e.uniform2i(t,n[0],n[1])},bvec3:function(e,t,n){e.uniform3i(t,n[0],n[1],n[2])},bvec4:function(e,t,n){e.uniform4i(t,n[0],n[1],n[2],n[3])},mat2:function(e,t,n){e.uniformMatrix2fv(t,!1,n)},mat3:function(e,t,n){e.uniformMatrix3fv(t,!1,n)},mat4:function(e,t,n){e.uniformMatrix4fv(t,!1,n)},sampler2D:function(e,t,n){e.uniform1i(t,n)}},i={float:function(e,t,n){e.uniform1fv(t,n)},vec2:function(e,t,n){e.uniform2fv(t,n)},vec3:function(e,t,n){e.uniform3fv(t,n)},vec4:function(e,t,n){e.uniform4fv(t,n)},int:function(e,t,n){e.uniform1iv(t,n)},ivec2:function(e,t,n){e.uniform2iv(t,n)},ivec3:function(e,t,n){e.uniform3iv(t,n)},ivec4:function(e,t,n){e.uniform4iv(t,n)},bool:function(e,t,n){e.uniform1iv(t,n)},bvec2:function(e,t,n){e.uniform2iv(t,n)},bvec3:function(e,t,n){e.uniform3iv(t,n)},bvec4:function(e,t,n){e.uniform4iv(t,n)},sampler2D:function(e,t,n){e.uniform1iv(t,n)}};function o(e,t){return function(n){this.data[e].value=n;var o=this.data[e].location;1===t.size?r[t.type](this.gl,o,n):i[t.type](this.gl,o,n)}}function s(e,t){for(var n=t,r=0;r<e.length-1;r++){var i=n[e[r]]||{data:{}};n[e[r]]=i,n=i}return n}e.exports=function(e,t){var r={data:{}};r.gl=e;for(var i=Object.keys(t),a=0;a<i.length;a++){var l=i[a],u=l.split("."),c=u[u.length-1],h=s(u,r),d=t[l];h.data[c]=d,h.gl=e,Object.defineProperty(h,c,{get:n(c),set:o(c,d)})}return r}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=h(n(14)),o=n(2),s=h(n(4)),a=h(n(59)),l=h(n(60)),u=h(n(33)),c=n(5);function h(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this)),r=s.default.TRANSFORM_MODE===o.TRANSFORM_MODE.STATIC?a.default:l.default;return n.tempDisplayObjectParent=null,n.transform=new r,n.alpha=1,n.visible=!0,n.renderable=!0,n.parent=null,n.worldAlpha=1,n.filterArea=null,n._filters=null,n._enabledFilters=null,n._bounds=new u.default,n._boundsID=0,n._lastBoundsID=-1,n._boundsRect=null,n._localBoundsRect=null,n._mask=null,n._destroyed=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new c.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(this._localBoundsRect||(this._localBoundsRect=new c.Rectangle),e=this._localBoundsRect);var r=this.getBounds(!1,e);return this.parent=n,this.transform=t,r},t.prototype.toGlobal=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.renderWebGL=function(e){},t.prototype.renderCanvas=function(e){},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this},t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},r(t,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new t),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0),this._mask=e,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),t}(i.default);t.default=d,d.prototype.displayObjectUpdateTransform=d.prototype.updateTransform},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),s=n(35);var a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n.position=new o.ObservablePoint(n.onChange,n,0,0),n.scale=new o.ObservablePoint(n.onChange,n,1,1),n.pivot=new o.ObservablePoint(n.onChange,n,0,0),n.skew=new o.ObservablePoint(n.updateSkew,n,0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n._localID=0,n._currentLocalID=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},i(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),s=n(35);var a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n.position=new o.Point(0,0),n.scale=new o.Point(1,1),n.skew=new o.ObservablePoint(n.updateSkew,n,0,0),n.pivot=new o.Point(0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},t.prototype.updateLocalTransform=function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)},t.prototype.updateTransform=function(e){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._worldID++},t.prototype.setFromMatrix=function(e){e.decompose(this)},i(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);t.default=a},function(e,t,n){"use strict";var r=n(124),i=n(126);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=b(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),h=["%","/","?",";","#"].concat(c),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(127);function b(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",u=e.split(a);u[0]=u[0].replace(/\\/g,"/");var b=e=u.join(a);if(b=b.trim(),!n&&1===e.split("#").length){var _=l.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var T=s.exec(b);if(T){var x=(T=T[0]).toLowerCase();this.protocol=x,b=b.substr(T.length)}if(n||T||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===b.substr(0,2);!w||T&&m[T]||(b=b.substr(2),this.slashes=!0)}if(!m[T]&&(w||T&&!v[T])){for(var E,S,M=-1,I=0;I<d.length;I++){-1!==(P=b.indexOf(d[I]))&&(-1===M||P<M)&&(M=P)}-1!==(S=-1===M?b.lastIndexOf("@"):b.lastIndexOf("@",M))&&(E=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(E)),M=-1;for(I=0;I<h.length;I++){var P;-1!==(P=b.indexOf(h[I]))&&(-1===M||P<M)&&(M=P)}-1===M&&(M=b.length),this.host=b.slice(0,M),b=b.slice(M),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var O=this.hostname.split(/\./),C=(I=0,O.length);I<C;I++){var R=O[I];if(R&&!R.match(p)){for(var k="",D=0,L=R.length;D<L;D++)R.charCodeAt(D)>127?k+="x":k+=R[D];if(!k.match(p)){var N=O.slice(0,I),U=O.slice(I+1),F=R.match(f);F&&(N.push(F[1]),U.unshift(F[2])),U.length&&(b="/"+U.join(".")+b),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+B,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!g[x])for(I=0,C=c.length;I<C;I++){var j=c[I];if(-1!==b.indexOf(j)){var H=encodeURIComponent(j);H===j&&(H=escape(j)),b=b.split(j).join(H)}}var X=b.indexOf("#");-1!==X&&(this.hash=b.substr(X),b=b.slice(0,X));var Y=b.indexOf("?");if(-1!==Y?(this.search=b.substr(Y),this.query=b.substr(Y+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,Y)):t&&(this.search="",this.query={}),b&&(this.pathname=b),v[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var W=this.search||"";this.path=B+W}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(n[c]=e[c])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!v[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var p=h[d];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),T=_||b||n.host&&e.pathname,x=T,w=n.pathname&&n.pathname.split("/")||[],E=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),T=T&&(""===f[0]||""===w[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(E)n.hostname=n.host=w.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=w.slice(-1)[0],M=(n.host||e.host||w.length>1)&&("."===S||".."===S)||""===S,I=0,P=w.length;P>=0;P--)"."===(S=w[P])?w.splice(P,1):".."===S?(w.splice(P,1),I++):I&&(w.splice(P,1),I--);if(!T&&!x)for(;I--;I)w.unshift("..");!T||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),M&&"/"!==w.join("/").substr(-1)&&w.push("");var A,O=""===w[0]||w[0]&&"/"===w[0].charAt(0);E&&(n.hostname=n.host=O?"":w.length?w.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(T=T||n.host&&w.length)&&!O&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(17),s=(r=o)&&r.__esModule?r:{default:r},a=n(3),l=n(38),u=n(2);var c=function(e){function t(n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("No video source element specified.");(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return i.width=n.videoWidth,i.height=n.videoHeight,i._autoUpdate=!0,i._isAutoUpdating=!1,i.autoPlay=!0,i.update=i.update.bind(i),i._onCanPlay=i._onCanPlay.bind(i),n.addEventListener("play",i._onPlayStart.bind(i)),n.addEventListener("pause",i._onPlayStop.bind(i)),i.hasLoaded=!1,i.__loaded=!1,i._isSourceReady()?i._onCanPlay():(n.addEventListener("canplay",i._onCanPlay),n.addEventListener("canplaythrough",i._onCanPlay)),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},t.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(l.shared.add(this.update,this,u.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},t.prototype._onPlayStop=function(){this._isAutoUpdating&&(l.shared.remove(this.update,this),this._isAutoUpdating=!1)},t.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},t.prototype.destroy=function(){this._isAutoUpdating&&l.shared.remove(this.update,this),this.source&&this.source._pixiId&&(s.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),e.prototype.destroy.call(this)},t.fromVideo=function(e,n){e._pixiId||(e._pixiId="video_"+(0,a.uid)());var r=a.BaseTextureCache[e._pixiId];return r||(r=new t(e,n),s.default.addToCache(r,e._pixiId)),r},t.fromUrl=function(e,n){var r=document.createElement("video");if(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),Array.isArray(e))for(var i=0;i<e.length;++i)r.appendChild(h(e[i].src||e[i],e[i].mime));else r.appendChild(h(e.src||e,e.mime));return r.load(),t.fromVideo(r,n)},i(t,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(l.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(l.shared.add(this.update,this,u.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),t}(s.default);function h(e,t){t||(t="video/"+e.substr(e.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=e,n.type=t,n}t.default=c,c.fromUrls=c.fromUrl},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(48),o=(r=i)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return e.prototype.set=function(e,t,n){var r=t.width,i=t.height;if(n){var s=e.width/2/r,a=e.height/2/i,l=e.x/r+s,u=e.y/i+a;n=o.default.add(n,o.default.NW),this.x0=l+s*o.default.uX(n),this.y0=u+a*o.default.uY(n),n=o.default.add(n,2),this.x1=l+s*o.default.uX(n),this.y1=u+a*o.default.uY(n),n=o.default.add(n,2),this.x2=l+s*o.default.uX(n),this.y2=u+a*o.default.uY(n),n=o.default.add(n,2),this.x3=l+s*o.default.uX(n),this.y3=u+a*o.default.uY(n)}else this.x0=e.x/r,this.y0=e.y/i,this.x1=(e.x+e.width)/r,this.y1=e.y/i,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/i,this.x3=e.x/r,this.y3=(e.y+e.height)/i;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),o=n(5),s=n(2),a=h(n(4)),l=h(n(18)),u=h(n(39)),c=h(n(14));function h(e){return e&&e.__esModule?e:{default:e}}var d=new o.Matrix,p=function(e){function t(n,r,u,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return(0,i.sayHello)(n),"number"==typeof r&&(r=Object.assign({width:r,height:u||a.default.RENDER_OPTIONS.height},c)),r=Object.assign({},a.default.RENDER_OPTIONS,r),h.options=r,h.type=s.RENDERER_TYPE.UNKNOWN,h.screen=new o.Rectangle(0,0,r.width,r.height),h.view=r.view||document.createElement("canvas"),h.resolution=r.resolution||a.default.RESOLUTION,h.transparent=r.transparent,h.autoResize=r.autoResize||!1,h.blendModes=null,h.preserveDrawingBuffer=r.preserveDrawingBuffer,h.clearBeforeRender=r.clearBeforeRender,h.roundPixels=r.roundPixels,h._backgroundColor=0,h._backgroundColorRgba=[0,0,0,0],h._backgroundColorString="#000000",h.backgroundColor=r.backgroundColor||h._backgroundColor,h._tempDisplayObjectParent=new l.default,h._lastObjectRendered=h._tempDisplayObjectParent,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},t.prototype.generateTexture=function(e,t,n){var r=e.getLocalBounds(),i=u.default.create(0|r.width,0|r.height,t,n);return d.tx=-r.x,d.ty=-r.y,this.render(e,i,!1,d,!0),i},t.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},r(t,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,i.hex2string)(e),(0,i.hex2rgb)(e,this._backgroundColorRgba)}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(17)),i=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments[2],s=arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,null,o));return a.resolution=s||i.default.RESOLUTION,a.width=n,a.height=r,a.realWidth=a.width*a.resolution,a.realHeight=a.height*a.resolution,a.scaleMode=void 0!==o?o:i.default.SCALE_MODE,a.hasLoaded=!0,a._glRenderTargets={},a._canvasRenderTarget=null,a.valid=!1,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.resize=function(e,t){e===this.width&&t===this.height||(this.valid=e>0&&t>0,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},t.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},t}(r.default);t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),s=(r=o)&&r.__esModule?r:{default:r};var a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||s.default.RESOLUTION,this.resize(t,n)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},i(e,[{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){var t=document.createElement("canvas");t.width=6,t.height=1;var n=t.getContext("2d");return n.fillStyle=e,n.fillRect(0,0,6,1),t}t.__esModule=!0,t.default=function(){if("undefined"==typeof document)return!1;var e=r("#ff00ff"),t=r("#ffff00"),n=document.createElement("canvas");n.width=6,n.height=1;var i=n.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(e,0,0),i.drawImage(t,2,0);var o=i.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(69),o=(r=i)&&r.__esModule?r:{default:r},s=n(5);n(8);var a=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=new s.Matrix,i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return n.renderable=!1,i.maskSprite=n,i.maskMatrix=r,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,n){var r=this.maskSprite;this.uniforms.mask=r._texture,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,r),this.uniforms.alpha=r.worldAlpha,e.applyFilter(this,t,n)},t}(o.default);t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(137)),o=n(3),s=n(2),a=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var u={},c=function(){function e(t,n,r){for(var l in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this._blendMode=s.BLEND_MODES.NORMAL,this.uniformData=r||(0,i.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[l]=this.uniformData[l].value,this.uniformData[l].type&&(this.uniformData[l].type=this.uniformData[l].type.toLowerCase());this.glShaders={},u[this.vertexSrc+this.fragmentSrc]||(u[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()),this.glShaderKey=u[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=a.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return e.prototype.apply=function(e,t,n,r,i){e.applyFilter(this,t,n,r)},r(e,[{key:"blendMode",get:function(){return this._blendMode},set:function(e){this._blendMode=e}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),e}();t.default=c},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(7)),i=o(n(41));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var o=0;o<4;o++)this.interleaved[4*o]=this.vertices[2*o],this.interleaved[4*o+1]=this.vertices[2*o+1],this.interleaved[4*o+2]=this.uvs[2*o],this.interleaved[4*o+3]=this.uvs[2*o+1];this.indices=(0,i.default)(1),this.vertexBuffer=r.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(t,n)}return e.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},e.prototype.map=function(e,t){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this},e.prototype.upload=function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},e.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),o=n(3);var s={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:i.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.styleID=0,Object.assign(this,s,t)}return e.prototype.clone=function(){var t={};for(var n in s)t[n]=this[n];return new e(t)},e.prototype.reset=function(){Object.assign(this,s)},e.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var n=t.length-1;n>=0;n--){var r=t[n].trim();/([\"\'])[^\'\"]+\1/.test(r)||(r='"'+r+'"'),t[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},r(e,[{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(e){var t=u(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(e){var t=u(e);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(e){var t=u(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}}]),e}();function l(e){return"number"==typeof e?(0,o.hex2string)(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function u(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=l(e[t]);return e}return l(e)}t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(t,n,r,i,o,s,a,l,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.style=n,this.width=r,this.height=i,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}return e.measureText=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e._canvas;r=r||n.wordWrap;var o=n.toFontString(),s=e.measureFont(o),a=i.getContext("2d");a.font=o;for(var l=r?e.wordWrap(t,n,i):t,u=l.split(/(?:\r\n|\r|\n)/),c=new Array(u.length),h=0,d=0;d<u.length;d++){var p=a.measureText(u[d]).width+(u[d].length-1)*n.letterSpacing;c[d]=p,h=Math.max(h,p)}var f=h+n.strokeThickness;n.dropShadow&&(f+=n.dropShadowDistance);var g=n.lineHeight||s.fontSize+n.strokeThickness,m=Math.max(g,s.fontSize+n.strokeThickness)+(u.length-1)*(g+n.leading);return n.dropShadow&&(m+=n.dropShadowDistance),new e(t,n,f,m,u,c,g+n.leading,h,s)},e.wordWrap=function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e._canvas,i=r.getContext("2d"),o="",s=t.split("\n"),a=n.wordWrapWidth,l={},u=0;u<s.length;u++){for(var c=a,h=s[u].split(" "),d=0;d<h.length;d++){var p=i.measureText(h[d]).width;if(n.breakWords&&p>a)for(var f=h[d].split(""),g=0;g<f.length;g++){var m=f[g],v=l[m];void 0===v&&(v=i.measureText(m).width,l[m]=v),v>c?(o+="\n"+m,c=a-v):(0===g&&(o+=" "),o+=m,c-=v)}else{var y=p+i.measureText(" ").width;0===d||y>c?(d>0&&(o+="\n"),o+=h[d],c=a-p):(c-=y,o+=" "+h[d])}}u<s.length-1&&(o+="\n")}return o},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var n={},r=e._canvas,i=e._context;i.font=t;var o=Math.ceil(i.measureText("|MÉq").width),s=Math.ceil(i.measureText("M").width),a=2*s;s=1.4*s|0,r.width=o,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|MÉq",0,s);var l=i.getImageData(0,0,o,a).data,u=l.length,c=4*o,h=0,d=0,p=!1;for(h=0;h<s;++h){for(var f=0;f<c;f+=4)if(255!==l[d+f]){p=!0;break}if(p)break;d+=c}for(n.ascent=s-h,d=u-c,p=!1,h=a;h>s;--h){for(var g=0;g<c;g+=4)if(255!==l[d+g]){p=!0;break}if(p)break;d-=c}return n.descent=h-s,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n},e}();t.default=r;var i=document.createElement("canvas");i.width=i.height=10,r._canvas=i,r._context=i.getContext("2d"),r._fonts={}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(t,n,r,i,o,s,a,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lineWidth=t,this.nativeLines=a,this.lineColor=n,this.lineAlpha=r,this._lineTint=n,this.fillColor=i,this.fillAlpha=o,this._fillTint=i,this.fill=s,this.holes=[],this.shape=l,this.type=l.type}return e.prototype.clone=function(){return new e(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},e.prototype.addHole=function(e){this.holes.push(e)},e.prototype.destroy=function(){this.shape=null,this.holes=null},e}();t.default=r},function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r,a,l,u,c,p,f,m=t&&t.length,v=m?t[0]*n:e.length,y=i(e,0,v,n,!0),b=[];if(!y||y.next===y.prev)return b;if(m&&(y=function(e,t,n,r){var s,a,l,u,c,p=[];for(s=0,a=t.length;s<a;s++)l=t[s]*r,u=s<a-1?t[s+1]*r:e.length,(c=i(e,l,u,r,!1))===c.next&&(c.steiner=!0),p.push(g(c));for(p.sort(h),s=0;s<p.length;s++)d(p[s],n),n=o(n,n.next);return n}(e,t,y,n)),e.length>80*n){r=l=e[0],a=u=e[1];for(var _=n;_<v;_+=n)(c=e[_])<r&&(r=c),(p=e[_+1])<a&&(a=p),c>l&&(l=c),p>u&&(u=p);f=0!==(f=Math.max(l-r,u-a))?1/f:0}return s(y,b,n,r,a,f),b}function i(e,t,n,r,i){var o,s;if(i===P(e,t,n,r)>0)for(o=t;o<n;o+=r)s=S(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=S(o,e[o],e[o+1],s);return s&&b(s,s.next)&&(M(s),s=s.next),s}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!b(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(M(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function s(e,t,n,r,i,h,d){if(e){!d&&h&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=f(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,s,a,l,u=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<u&&(a++,r=r.nextZ);t++);for(l=u;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(s>1)}(i)}(e,r,i,h);for(var p,g,m=e;e.prev!==e.next;)if(p=e.prev,g=e.next,h?l(e,r,i,h):a(e))t.push(p.i/n),t.push(e.i/n),t.push(g.i/n),M(e),e=g.next,m=g.next;else if((e=g)===m){d?1===d?s(e=u(o(e),t,n),t,n,r,i,h,2):2===d&&c(e,t,n,r,i,h):s(o(e),t,n,r,i,h,1);break}}}function a(e){var t=e.prev,n=e,r=e.next;if(y(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(m(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&y(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function l(e,t,n,r){var i=e.prev,o=e,s=e.next;if(y(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,l=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,u=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=f(a,l,t,n,r),d=f(u,c,t,n,r),p=e.prevZ,g=e.nextZ;p&&p.z>=h&&g&&g.z<=d;){if(p!==e.prev&&p!==e.next&&m(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,g!==e.prev&&g!==e.next&&m(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&m(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;g&&g.z<=d;){if(g!==e.prev&&g!==e.next&&m(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function u(e,t,n){var r=e;do{var i=r.prev,s=r.next.next;!b(i,s)&&_(i,r,r.next,s)&&w(i,s)&&w(s,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(s.i/n),M(r),M(r.next),r=e=s),r=r.next}while(r!==e);return o(r)}function c(e,t,n,r,i,a){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&v(l,u)){var c=E(l,u);return l=o(l,l.next),c=o(c,c.next),s(l,t,n,r,i,a),void s(c,t,n,r,i,a)}u=u.next}l=l.next}while(l!==e)}function h(e,t){return e.x-t.x}function d(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===s)return n;var l,u=n,c=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&m(o<h?i:s,o,c,h,o<h?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),w(r,e)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&p(n,r)))&&(n=r,d=l)),r=r.next}while(r!==u);return n}(e,t)){var n=E(t,e);o(n,n.next)}}function p(e,t){return y(e.prev,e,t.prev)<0&&y(t.next,e,e.next)<0}function f(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function g(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function m(e,t,n,r,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(r-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function v(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&_(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(w(e,t)&&w(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(y(e.prev,e,t.prev)||y(e,t.prev,t))||b(e,t)&&y(e.prev,e,e.next)>0&&y(t.prev,t,t.next)>0)}function y(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function b(e,t){return e.x===t.x&&e.y===t.y}function _(e,t,n,r){var i=x(y(e,t,n)),o=x(y(e,t,r)),s=x(y(n,r,e)),a=x(y(n,r,t));return i!==o&&s!==a||(!(0!==i||!T(e,n,t))||(!(0!==o||!T(e,r,t))||(!(0!==s||!T(n,e,r))||!(0!==a||!T(n,t,r)))))}function T(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function x(e){return e>0?1:e<0?-1:0}function w(e,t){return y(e.prev,e,e.next)<0?y(e,t,e.next)>=0&&y(e,e.prev,t)>=0:y(e,t,e.prev)<0||y(e,e.next,t)<0}function E(e,t){var n=new I(e.i,e.x,e.y),r=new I(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(e,t,n,r){var i=new I(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function M(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function I(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(e,t,n,r){for(var i=0,o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}e.exports=r,e.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,s=Math.abs(P(e,0,o,n));if(i)for(var a=0,l=t.length;a<l;a++){var u=t[a]*n,c=a<l-1?t[a+1]*n:e.length;s-=Math.abs(P(e,u,c,n))}var h=0;for(a=0;a<r.length;a+=3){var d=r[a]*n,p=r[a+1]*n,f=r[a+2]*n;h+=Math.abs((e[d]-e[f])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[f+1]-e[d+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)n.vertices.push(e[i][o][s]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(76),o=u(n(18)),s=n(38),a=u(n(4)),l=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t,n,r,l,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"number"==typeof t&&(t=Object.assign({width:t,height:n||a.default.RENDER_OPTIONS.height,forceCanvas:!!l,sharedTicker:!!u},r)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,i.autoDetectRenderer)(t),this.stage=new o.default,this._ticker=null,this.ticker=t.sharedTicker?s.shared:new s.Ticker,t.autoStart&&this.start()}return e.prototype.render=function(){this.renderer.render(this.stage)},e.prototype.stop=function(){this._ticker.stop()},e.prototype.start=function(){this._ticker.start()},e.prototype.destroy=function(e){var t=this._ticker;this.ticker=null,t.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},r(e,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,l.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),e}();t.default=c},function(e,t,n){"use strict";t.__esModule=!0,t.autoDetectRenderer=function(e,t,n,s){var a=e&&e.forceCanvas;void 0!==s&&(a=s);if(!a&&r.isWebGLSupported())return new o.default(e,t,n);return new i.default(e,t,n)};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3)),i=s(n(19)),o=s(n(26));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";t.__esModule=!0,t.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(e,t,n){"use strict";t.__esModule=!0,t.BitmapText=t.TilingSpriteRenderer=t.TilingSprite=t.TextureTransform=t.AnimatedSprite=void 0;var r=n(170);Object.defineProperty(t,"AnimatedSprite",{enumerable:!0,get:function(){return l(r).default}});var i=n(42);Object.defineProperty(t,"TextureTransform",{enumerable:!0,get:function(){return l(i).default}});var o=n(171);Object.defineProperty(t,"TilingSprite",{enumerable:!0,get:function(){return l(o).default}});var s=n(172);Object.defineProperty(t,"TilingSpriteRenderer",{enumerable:!0,get:function(){return l(s).default}});var a=n(173);function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"BitmapText",{enumerable:!0,get:function(){return l(a).default}}),n(174),n(175),n(176)},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=l(n(80)),s=l(n(81)),a=l(n(82));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(n,r,a,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l=l||5;var u=(0,o.default)(l,!0),c=(0,s.default)(l),h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,u,c));return h.resolution=a||i.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=n||8,h.firstRun=!0,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,n,r){if(this.firstRun){var i=e.renderer.gl,l=(0,a.default)(i);this.vertexSrc=(0,o.default)(l,!0),this.fragmentSrc=(0,s.default)(l),this.firstRun=!1}if(this.uniforms.strength=1/n.size.width*(n.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,r);else{for(var u=e.getRenderTarget(!0),c=t,h=u,d=0;d<this.passes-1;d++){e.applyFilter(this,c,h,!0);var p=h;h=c,c=p}e.applyFilter(this,c,n,r),e.returnRenderTarget(u)}},r(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(i.Filter);t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=Math.ceil(e/2),i=r,o="",s=void 0;s=t?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<e;a++){var l=s.replace("%index%",a);l=l.replace("%sampleIndex%",a-(n-1)+".0"),o+=l,o+="\n"}return i=(i=i.replace("%blur%",o)).replace("%size%",e)};var r=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){for(var t=r[e],n=t.length,o=i,s="",a=void 0,l=0;l<e;l++){var u="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",l);a=l,l>=n&&(a=e-l-1),u=u.replace("%value%",t[a]),s+=u,s+="\n"}return o=(o=o.replace("%blur%",s)).replace("%size%",e)};var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},i=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.getParameter(e.MAX_VARYING_VECTORS),n=15;for(;n>t;)n-=2;return n}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=l(n(80)),s=l(n(81)),a=l(n(82));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(n,r,a,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l=l||5;var u=(0,o.default)(l,!1),c=(0,s.default)(l),h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,u,c));return h.resolution=a||i.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=n||8,h.firstRun=!0,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,n,r){if(this.firstRun){var i=e.renderer.gl,l=(0,a.default)(i);this.vertexSrc=(0,o.default)(l,!1),this.fragmentSrc=(0,s.default)(l),this.firstRun=!1}if(this.uniforms.strength=1/n.size.height*(n.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,r);else{for(var u=e.getRenderTarget(!0),c=t,h=u,d=0;d<this.passes-1;d++){e.applyFilter(this,c,h,!0);var p=h;h=c,c=p}e.applyFilter(this,c,n,r),e.returnRenderTarget(u)}},r(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(i.Filter);t.default=u},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.global=new i.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return e.prototype.getLocalPosition=function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)},e.prototype._copyEvent=function(e){e.isPrimary&&(this.isPrimary=!0),this.button=e.button,this.buttons=e.buttons,this.width=e.width,this.height=e.height,this.tiltX=e.tiltX,this.tiltY=e.tiltY,this.pointerType=e.pointerType,this.pressure=e.pressure,this.rotationAngle=e.rotationAngle,this.twist=e.twist||0,this.tangentialPressure=e.tangentialPressure||0},e.prototype._reset=function(){this.isPrimary=!1},r(e,[{key:"pointerId",get:function(){return this.identifier}}]),e}();t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0},e.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},r(e,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(e){this._flags=e}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(e){this._doSet(this.constructor.FLAGS.OVER,e)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)}}]),e}();t.default=i,i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(e,t,n){"use strict";t.__esModule=!0,t.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(e,t,n){"use strict";t.__esModule=!0,t.parse=a,t.default=function(){return function(e,t){if(e.data&&e.type===o.Resource.TYPE.XML)if(0!==e.data.getElementsByTagName("page").length&&0!==e.data.getElementsByTagName("info").length&&null!==e.data.getElementsByTagName("info")[0].getAttribute("face")){var n=e.isDataUrl?"":r.dirname(e.url);e.isDataUrl&&("."===n&&(n=""),this.baseUrl&&n&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(n+="/")),(n=n.replace(this.baseUrl,""))&&"/"!==n.charAt(n.length-1)&&(n+="/");var s=n+e.data.getElementsByTagName("page")[0].getAttribute("file");if(i.utils.TextureCache[s])a(e,i.utils.TextureCache[s]),t();else{var l={crossOrigin:e.crossOrigin,loadType:o.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e};this.add(e.name+"_image",s,l,(function(n){a(e,n.texture),t()}))}}else t();else t()}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(8)),i=n(1),o=n(22),s=n(78);function a(e,t){e.bitmapFont=s.BitmapText.registerFont(e.data,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,n,r){void 0===n&&(n=!1),i(this,e),this._fn=t,this._once=n,this._thisArg=r,this._next=this._prev=this._owner=null}return r(e,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),e}();function s(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}var a=function(){function e(){i(this,e),this._head=this._tail=void 0}return r(e,[{key:"handlers",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this._head;if(e)return!!t;for(var n=[];t;)n.push(t),t=t._next;return n}},{key:"has",value:function(e){if(!(e instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}},{key:"dispatch",value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:"add",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new o(e,!1,t))}},{key:"once",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new o(e,!0,t))}},{key:"detach",value:function(e){if(!(e instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)}},{key:"detachAll",value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),e}();a.MiniSignalBinding=o,t.default=a,e.exports=t.default},function(e,t,n){"use strict";e.exports=function(e,t){t=t||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,(function(e,t,r){t&&(i[n.q.name][t]=r)})),i}},function(e,t,n){"use strict";function r(){}function i(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}t.__esModule=!0,t.eachSeries=function(e,t,n,r){var i=0,o=e.length;!function s(a){a||i===o?n&&n(a):r?setTimeout((function(){t(e[i++],s)}),1):t(e[i++],s)}()},t.queue=function(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var n=0,o={_tasks:[],concurrency:t,saturated:r,unsaturated:r,buffer:t/4,empty:r,drain:r,error:r,started:!1,paused:!1,push:function(e,t){s(e,!1,t)},kill:function(){n=0,o.drain=r,o.started=!1,o._tasks=[]},unshift:function(e,t){s(e,!0,t)},process:function(){for(;!o.paused&&n<o.concurrency&&o._tasks.length;){var t=o._tasks.shift();0===o._tasks.length&&o.empty(),(n+=1)===o.concurrency&&o.saturated(),e(t.data,i(a(t)))}},length:function(){return o._tasks.length},running:function(){return n},idle:function(){return o._tasks.length+n===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var e=1;e<=o.concurrency;e++)o.process()}}};function s(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(o.started=!0,null==e&&o.idle())setTimeout((function(){return o.drain()}),1);else{var i={data:e,callback:"function"==typeof n?n:r};t?o._tasks.unshift(i):o._tasks.push(i),setTimeout((function(){return o.process()}),1)}}function a(e){return function(){n-=1,e.callback.apply(e,arguments),null!=arguments[0]&&o.error(arguments[0],e.data),n<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}return o}},function(e,t,n){"use strict";t.__esModule=!0,t.encodeBinary=i;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(e){for(var t="",n=0;n<e.length;){for(var i=[0,0,0],o=[0,0,0,0],s=0;s<i.length;++s)n<e.length?i[s]=255&e.charCodeAt(n++):i[s]=0;switch(o[0]=i[0]>>2,o[1]=(3&i[0])<<4|i[1]>>4,o[2]=(15&i[1])<<2|i[2]>>6,o[3]=63&i[2],n-(e.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var a=0;a<o.length;++a)t+=r.charAt(o[a])}return t}e.exports.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){return function(e,t){var n=e.name+"_image";if(e.data&&e.type===i.Resource.TYPE.JSON&&e.data.frames&&!this.resources[n]){var r={crossOrigin:e.crossOrigin,loadType:i.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e},o=l(e,this.baseUrl);this.add(n,o,r,(function(n){var r=new a.Spritesheet(n.texture.baseTexture,e.data,e.url);r.parse((function(){e.spritesheet=r,e.textures=r.textures,t()}))}))}else t()}},t.getResourcePath=l;var r,i=n(22),o=n(61),s=(r=o)&&r.__esModule?r:{default:r},a=n(1);function l(e,t){return e.isDataUrl?e.data.meta.image:s.default.resolve(e.url.replace(t,""),e.data.meta.image)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){return function(e,t){e.data&&e.type===i.Resource.TYPE.IMAGE&&(e.texture=s.default.fromLoader(e.data,e.url,e.name)),t()}};var r,i=n(22),o=n(15),s=(r=o)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(23),o=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return s._ready=!0,s.verticesX=r||10,s.verticesY=i||10,s.drawMode=o.default.DRAW_MODES.TRIANGLES,s.refresh(),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,n=[],r=[],i=[],o=this.verticesX-1,s=this.verticesY-1,a=e.width/o,l=e.height/s,u=0;u<t;u++){var c=u%this.verticesX,h=u/this.verticesX|0;n.push(c*a,h*l),r.push(c/o,h/s)}for(var d=o*s,p=0;p<d;p++){var f=p%o,g=p/o|0,m=g*this.verticesX+f,v=g*this.verticesX+f+1,y=(g+1)*this.verticesX+f,b=(g+1)*this.verticesX+f+1;i.push(m,v,y),i.push(v,b,y)}this.vertices=new Float32Array(n),this.uvs=new Float32Array(r),this.colors=new Float32Array([]),this.indices=new Uint16Array(i),this.indexDirty++,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){o.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(o.default);t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();t.default=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=[{name:"Europe",id:"eu",games:[{type:"1",id:"ffa1",name:"Free For All #1",nameShort:"FFA #1",host:"eu.airmash.online",path:"ffa"},{type:"3",id:"btr1",name:"Battle Royale #1",nameShort:"BTR #1",host:"eu.airmash.online",path:"btr"},{type:"4",id:"box1",name:"Box Experiments #1",nameShort:"BOX #1",host:"lon1.box.populi.ml",path:"ffa"}]},{name:"US",id:"us",games:[{type:"1",id:"ffa1",name:"Free For All #1",nameShort:"FFA #1",host:"game.airmash.cc",path:"ffa"},{type:"1",id:"ffa2",name:"Free For All #2",nameShort:"FFA #2",host:"ffa.herrmash.com",path:"ffa"},{type:"2",id:"ctf1",name:"Capture The Flag #1",nameShort:"CTF #1",host:"game.airmash.cc",path:"ctf"},{type:"2",id:"ctf2",name:"Capture The Flag #2",nameShort:"CTF #2",host:"ctf.herrmash.com",path:"ctf"},{type:"3",id:"btr1",name:"Battle Royale #1",nameShort:"BTR #1",host:"us.airmash.online",path:"btr"},{type:"4",id:"dev",name:"Test Server",nameShort:"Test Server",host:"game.airmash.cc",path:"dev"}]}]},function(e,t,n){e.exports=function(){var e,t=!!("ontouchstart"in window),n=!!window.PointerEvent,r=!!window.MSPointerEvent,i={start:"touchstart",move:"touchmove",end:"touchend"},o={start:"mousedown",move:"mousemove",end:"mouseup"},s={start:"pointerdown",move:"pointermove",end:"pointerup"},a={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"},l={};n?e=s:r?e=a:t?(e=i,l=o):e=o;var u={};function c(){}function h(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5,mode:"dynamic",zone:document.body},this.config(t),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=h.id,h.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function d(e,t){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=e,this.id=d.id,d.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5},this.config(t),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}function p(e){var t,n=this;return n.ids={},n.index=0,n.collections=[],n.config(e),n.prepareCollections(),u.bindEvt(window,"resize",(function(e){clearTimeout(t),t=setTimeout((function(){var e,t=u.getScroll();n.collections.forEach((function(n){n.forEach((function(n){e=n.el.getBoundingClientRect(),n.position={x:t.x+e.left,y:t.y+e.top}}))}))}),100)})),n.collections}u.distance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},u.angle=function(e,t){var n=t.x-e.x,r=t.y-e.y;return u.degrees(Math.atan2(r,n))},u.findCoord=function(e,t,n){var r={x:0,y:0};return n=u.radians(n),r.x=e.x-t*Math.cos(n),r.y=e.y-t*Math.sin(n),r},u.radians=function(e){return e*(Math.PI/180)},u.degrees=function(e){return e*(180/Math.PI)},u.bindEvt=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent(t,n)},u.unbindEvt=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent(t,n)},u.trigger=function(e,t,n){var r=new CustomEvent(t,n);e.dispatchEvent(r)},u.prepareEvent=function(e){return e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e},u.getScroll=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},u.applyPosition=function(e,t){t.x&&t.y?(e.style.left=t.x+"px",e.style.top=t.y+"px"):(t.top||t.right||t.bottom||t.left)&&(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left)},u.getTransitionStyle=function(e,t,n){var r=u.configStylePropertyObject(e);for(var i in r)if(r.hasOwnProperty(i))if("string"==typeof t)r[i]=t+" "+n;else{for(var o="",s=0,a=t.length;s<a;s+=1)o+=t[s]+" "+n+", ";r[i]=o.slice(0,-2)}return r},u.getVendorStyle=function(e,t){var n=u.configStylePropertyObject(e);for(var r in n)n.hasOwnProperty(r)&&(n[r]=t);return n},u.configStylePropertyObject=function(e){var t={};return t[e]="",["webkit","Moz","o"].forEach((function(n){t[n+e.charAt(0).toUpperCase()+e.slice(1)]=""})),t},u.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},u.safeExtend=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)?n[r]=t[r]:e.hasOwnProperty(r)&&(n[r]=e[r]);return n},u.map=function(e,t){if(e.length)for(var n=0,r=e.length;n<r;n+=1)t(e[n]);else t(e)},c.prototype.on=function(e,t){var n,r=e.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var i=0;i<r.length;i+=1)n=r[i],this._handlers_[n]=this._handlers_[n]||[],this._handlers_[n].push(t);return this},c.prototype.off=function(e,t){return this._handlers_=this._handlers_||{},void 0===e?this._handlers_={}:void 0===t?this._handlers_[e]=null:this._handlers_[e]&&this._handlers_[e].indexOf(t)>=0&&this._handlers_[e].splice(this._handlers_[e].indexOf(t),1),this},c.prototype.trigger=function(e,t){var n,r=this,i=e.split(/[ ,]+/g);r._handlers_=r._handlers_||{};for(var o=0;o<i.length;o+=1)n=i[o],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach((function(e){e.call(r,{type:n,target:r},t)}))},c.prototype.config=function(e){this.options=this.defaults||{},e&&(this.options=u.safeExtend(this.options,e))},c.prototype.bindEvt=function(t,n){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[n]=function(){"function"==typeof r["on"+n]?r["on"+n].apply(r,arguments):console.warn('[WARNING] : Missing "on'+n+'" handler.')},u.bindEvt(t,e[n],r._domHandlers_[n]),l[n]&&u.bindEvt(t,l[n],r._domHandlers_[n]),r},c.prototype.unbindEvt=function(t,n){return this._domHandlers_=this._domHandlers_||{},u.unbindEvt(t,e[n],this._domHandlers_[n]),l[n]&&u.unbindEvt(t,l[n],this._domHandlers_[n]),delete this._domHandlers_[n],this},h.prototype=new c,h.constructor=h,h.id=0,h.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},h.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=u.getVendorStyle("borderRadius","50%"),n=u.getTransitionStyle("transition","opacity",e),r={};return r.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},r.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},r.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},u.extend(r.el,n),u.extend(r.back,t),u.extend(r.front,t),this.applyStyles(r),this},h.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var n in e[t])this.ui[t].style[n]=e[t][n];return this},h.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},h.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},h.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},h.prototype.show=function(e){var t=this;return t.options.dataOnly?t:(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout((function(){t.ui.el.style.opacity=1}),0),t.showTimeout=setTimeout((function(){t.trigger("shown",t.instance),"function"==typeof e&&e.call(this)}),t.options.fadeTime),t)},h.prototype.hide=function(e){var t=this;return t.options.dataOnly?t:(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout((function(){var n="dynamic"===t.options.mode?"none":"block";t.ui.el.style.display=n,"function"==typeof e&&e.call(t),t.trigger("hidden",t.instance)}),t.options.fadeTime),t.restPosition(),t)},h.prototype.restPosition=function(e){var t=this;t.frontPosition={x:0,y:0};var n=t.options.fadeTime+"ms",r={};r.front=u.getTransitionStyle("transition",["top","left"],n);var i={front:{}};i.front={left:t.frontPosition.x+"px",top:t.frontPosition.y+"px"},t.applyStyles(r),t.applyStyles(i),t.restTimeout=setTimeout((function(){"function"==typeof e&&e.call(t),t.restCallback()}),t.options.fadeTime)},h.prototype.restCallback=function(){var e={};e.front=u.getTransitionStyle("transition","none",""),this.applyStyles(e),this.trigger("rested",this.instance)},h.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},h.prototype.computeDirection=function(e){var t,n,r,i=e.angle.radian,o=Math.PI/4,s=Math.PI/2;if(t=i>o&&i<3*o?"up":i>-o&&i<=o?"left":i>3*-o&&i<=-o?"down":"right",n=i>-s&&i<s?"left":"right",r=i>0?"up":"down",e.force>this.options.threshold){var a={};for(var l in this.direction)this.direction.hasOwnProperty(l)&&(a[l]=this.direction[l]);var u={};for(var l in this.direction={x:n,y:r,angle:t},e.direction=this.direction,a)a[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return e;u.x&&u.y||this.trigger("plain",e),u.x||this.trigger("plain:"+n,e),u.y||this.trigger("plain:"+r,e),u.angle||this.trigger("dir dir:"+t,e)}return e},d.prototype=new c,d.constructor=d,d.id=0,d.prototype.prepareNipples=function(){var e=this.nipples;e.on=this.on.bind(this),e.off=this.off.bind(this),e.options=this.options,e.destroy=this.destroy.bind(this),e.ids=this.ids,e.id=this.id,e.processOnMove=this.processOnMove.bind(this),e.processOnEnd=this.processOnEnd.bind(this),e.get=function(t){if(void 0===t)return e[0];for(var n=0,r=e.length;n<r;n+=1)if(e[n].identifier===t)return e[n];return!1}},d.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},d.prototype.begin=function(){var e=this.options;if("static"===e.mode){var t=this.createNipple(e.position,this.manager.getIdentifier());t.add(),this.idles.push(t)}},d.prototype.createNipple=function(e,t){var n=u.getScroll(),r={},i=this.options;if(e.x&&e.y)r={x:e.x-(n.x+this.box.left),y:e.y-(n.y+this.box.top)};else if(e.top||e.right||e.bottom||e.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=e.top,o.style.right=e.right,o.style.bottom=e.bottom,o.style.left=e.left,o.style.position="absolute",i.zone.appendChild(o);var s=o.getBoundingClientRect();i.zone.removeChild(o),r=e,e={x:s.left+n.x,y:s.top+n.y}}var a=new h(this,{color:i.color,size:i.size,threshold:i.threshold,fadeTime:i.fadeTime,dataOnly:i.dataOnly,restOpacity:i.restOpacity,mode:i.mode,identifier:t,position:e,zone:i.zone,frontPosition:{x:0,y:0}});return i.dataOnly||(u.applyPosition(a.ui.el,r),u.applyPosition(a.ui.front,a.frontPosition)),this.nipples.push(a),this.trigger("added "+a.identifier+":added",a),this.manager.trigger("added "+a.identifier+":added",a),this.bindNipple(a),a},d.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},d.prototype.bindNipple=function(e){var t,n=this,r=function(e,r){t=e.type+" "+r.id+":"+e.type,n.trigger(t,r)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)},d.prototype.pressureFn=function(e,t,n){var r=this,i=0;clearInterval(r.pressureIntervals[n]),r.pressureIntervals[n]=setInterval(function(){var n=e.force||e.pressure||e.webkitForce||0;n!==i&&(t.trigger("pressure",n),r.trigger("pressure "+t.identifier+":pressure",n),i=n)}.bind(r),100)},d.prototype.onstart=function(e){var t=this,n=t.options;return e=u.prepareEvent(e),t.updateBox(),u.map(e,(function(e){t.actives.length<n.maxNumberOfNipples&&t.processOnStart(e)})),t.manager.bindDocument(),!1},d.prototype.processOnStart=function(e){var t,n=this,r=n.options,i=n.manager.getIdentifier(e),o=e.force||e.pressure||e.webkitForce||0,s={x:e.pageX,y:e.pageY},a=n.getOrCreate(i,s);a.identifier=i;var l=function(t){t.trigger("start",t),n.trigger("start "+t.id+":start",t),t.show(),o>0&&n.pressureFn(e,t,t.identifier),n.processOnMove(e)};if((t=n.idles.indexOf(a))>=0&&n.idles.splice(t,1),n.actives.push(a),n.ids.push(a.identifier),"semi"!==r.mode)l(a);else{if(!(u.distance(s,a.position)<=r.catchDistance))return a.destroy(),void n.processOnStart(e);l(a)}return a},d.prototype.getOrCreate=function(e,t){var n,r=this.options;return/(semi|static)/.test(r.mode)?(n=this.idles[0])?(this.idles.splice(0,1),n):"semi"===r.mode?this.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1):n=this.createNipple(t,e)},d.prototype.processOnMove=function(e){var t=this.options,n=this.manager.getIdentifier(e),r=this.nipples.get(n);if(!r)return console.error("Found zombie joystick with ID "+n),void this.manager.removeIdentifier(n);r.identifier=n;var i=r.options.size/2,o={x:e.pageX,y:e.pageY},s=u.distance(o,r.position),a=u.angle(o,r.position),l=u.radians(a),c=s/i;s>i&&(s=i,o=u.findCoord(r.position,s,a)),r.frontPosition={x:o.x-r.position.x,y:o.y-r.position.y},t.dataOnly||u.applyPosition(r.ui.front,r.frontPosition);var h={identifier:r.identifier,position:o,force:c,pressure:e.force||e.pressure||e.webkitForce||0,distance:s,angle:{radian:l,degree:a},instance:r};(h=r.computeDirection(h)).angle={radian:u.radians(180-a),degree:180-a},r.trigger("move",h),this.trigger("move "+r.id+":move",h)},d.prototype.processOnEnd=function(e){var t=this,n=t.options,r=t.manager.getIdentifier(e),i=t.nipples.get(r),o=t.manager.removeIdentifier(i.identifier);i&&(n.dataOnly||i.hide((function(){"dynamic"===n.mode&&(i.trigger("removed",i),t.trigger("removed "+i.id+":removed",i),t.manager.trigger("removed "+i.id+":removed",i),i.destroy())})),clearInterval(t.pressureIntervals[i.identifier]),i.resetDirection(),i.trigger("end",i),t.trigger("end "+i.id+":end",i),t.ids.indexOf(i.identifier)>=0&&t.ids.splice(t.ids.indexOf(i.identifier),1),t.actives.indexOf(i)>=0&&t.actives.splice(t.actives.indexOf(i),1),/(semi|static)/.test(n.mode)?t.idles.push(i):t.nipples.indexOf(i)>=0&&t.nipples.splice(t.nipples.indexOf(i),1),t.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(t.manager.ids[o.id]=o.identifier))},d.prototype.onDestroyed=function(e,t){this.nipples.indexOf(t)>=0&&this.nipples.splice(this.nipples.indexOf(t),1),this.actives.indexOf(t)>=0&&this.actives.splice(this.actives.indexOf(t),1),this.idles.indexOf(t)>=0&&this.idles.splice(this.idles.indexOf(t),1),this.ids.indexOf(t.identifier)>=0&&this.ids.splice(this.ids.indexOf(t.identifier),1),this.manager.removeIdentifier(t.identifier),this.manager.unbindDocument()},d.prototype.destroy=function(){for(var e in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach((function(e){e.destroy()})),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(e)&&clearInterval(this.pressureIntervals[e]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()},p.prototype=new c,p.constructor=p,p.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var n;return e.collections.every((function(e){return!(n=e.get(t))})),n}},p.prototype.create=function(e){return this.createCollection(e)},p.prototype.createCollection=function(e){var t=new d(this,e);return this.bindCollection(t),this.collections.push(t),t},p.prototype.bindCollection=function(e){var t,n=this,r=function(e,r){t=e.type+" "+r.id+":"+e.type,n.trigger(t,r)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)},p.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},p.prototype.unbindDocument=function(e){Object.keys(this.ids).length&&!0!==e||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},p.prototype.getIdentifier=function(e){var t;return e?void 0===(t=void 0===e.identifier?e.pointerId:e.identifier)&&(t=this.latest||0):t=this.index,void 0===this.ids[t]&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]},p.prototype.removeIdentifier=function(e){var t={};for(var n in this.ids)if(this.ids[n]===e){t.id=n,t.identifier=this.ids[n],delete this.ids[n];break}return t},p.prototype.onmove=function(e){return this.onAny("move",e),!1},p.prototype.onend=function(e){return this.onAny("end",e),!1},p.prototype.onAny=function(e,t){var n,r=this,i="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=u.prepareEvent(t);var o=function(e,t,n){n.ids.indexOf(t)>=0&&(n[i](e),e._found_=!0)};return u.map(t,(function(e){n=r.getIdentifier(e),u.map(r.collections,o.bind(null,e,n)),e._found_||r.removeIdentifier(n)})),!1},p.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach((function(e){e.destroy()})),this.off()},p.prototype.onDestroyed=function(e,t){if(this.collections.indexOf(t)<0)return!1;this.collections.splice(this.collections.indexOf(t),1)};var f=new p;return{create:function(e){return f.create(e)},factory:f}}()},function(e,t,n){"use strict";(function(e){var r=n(0);t.a=class{constructor(e,t){this.id=e.id,this.status=e.status,this.spectate=!1,this.level=null==e.level||0==e.level?null:e.level,this.reel=1==e.reel,this.name=e.name,this.type=e.type,this.team=e.team,this.pos=new r.a(e.posX,e.posY),this.lowResPos=new r.a(e.posX,e.posY),this.speed=r.a.zero(),this.speedupgrade=0,this.rot=e.rot,this.flag=e.flag,this.speedLength=0,this.sprites={},this.randomness=Tools.rand(0,1e5),this.keystate={},this.lastKilled=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.stealthed=!1,this.alpha=1,this.scale=1,this.powerups={shield:!1,rampage:!1},this.powerupsShown={shield:!1,rampage:!1},this.powerupActive=!1,this.render=!0,this.hidden=!1,this.culled=!1,this.timedout=!1,this.reducedFactor=!1,this.lastPacket=game.timeNetwork,this.state={thrustLevel:0,thrustDir:0,bubble:!1,bubbleProgress:0,bubbleFade:0,bubbleTime:0,bubbleTextWidth:0,hasBadge:!1,badge:0,stealthLevel:0,scaleLevel:1,powerupAngle:0,powerupFade:0,powerupFadeState:0,lastBounceSound:0},this.bot=e.isBot,this.bot&&(this.name=Tools.stripBotsNamePrefix(this.name)),this.name=Tools.mungeNonAscii(this.name,this.id),this.setupGraphics(),0==this.status?(Tools.decodeUpgrades(this,e.upgrades),this.updatePowerups()):(this.hidden=!0,this.me()&&UI.visibilityHUD(!1)),this.reel?(this._prevPos=null,this._offset=null):this.visibilityUpdate(),(!t&&this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.me()&&(game.myType=e.type,UI.aircraftSelected(e.type))}setupGraphics(t){var n=null;switch(this.me()&&(n={layer:"aircraftme"}),this.sprites.powerup=Textures.init("powerupShield",{visible:!1,alpha:.75}),this.sprites.powerupCircle=Textures.init("powerupCircle",{visible:!1,alpha:.75}),this.type){case PlaneType.Predator:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipRaptor",n),this.sprites.shadow=Textures.init("shipRaptorShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster=Textures.init("shipRaptorThruster"),this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall"),this.sprites.thrusterShadow=Textures.init("thrusterShadow");break;case PlaneType.Goliath:this.state.baseScale=.35,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipSpirit",n),this.sprites.shadow=Textures.init("shipSpiritShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case PlaneType.Mohawk:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipComanche",n),this.sprites.rotor=Textures.init("shipComancheRotor",n),this.sprites.shadow=Textures.init("shipComancheShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.rotorShadow=Textures.init("shipComancheRotorShadow",{scale:2*this.state.baseScale*(2.4/config.shadowScaling)});break;case PlaneType.Tornado:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipTornado",n),this.sprites.shadow=Textures.init("shipTornadoShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case PlaneType.Prowler:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipProwler",n),this.sprites.shadow=Textures.init("shipProwlerShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow")}if(this.reel||t||(this.setupNameplate(),this.setupChatBubbles(),(null!=this.level||this.bot)&&this.setupLevelPlate()),config.debug.collisions){for(var r of(this.col=new e.Graphics,config.ships[this.type].collisions))this.col.beginFill(16777215,.2),this.col.drawCircle(r[0],r[1],r[2]),this.col.endFill();game.graphics.layers.explosions.addChild(this.col)}}reteam(t){this.team=t,this.sprites.name.style=new e.TextStyle(this.nameplateTextStyle()),UI.changeMinimapTeam(this.id,this.team)}nameplateTextStyle(){if(2==game.gameType)var e=1==this.team?"#4076E2":"#EA4242";else e=this.team==game.myTeam?"#FFFFFF":"#FFEC52";return{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:33*config.airmashRefugees.fontSizeMul+"px",fill:e,dropShadow:!0,dropShadowBlur:10,dropShadowDistance:0,padding:4}}setupNameplate(){var t="";2==game.gameType&&(t="  ■"),this.sprites.name=new e.Text(this.name+t,this.nameplateTextStyle()),this.sprites.name.scale.set(.5,.5),this.sprites.flag=Textures.sprite("flag_"+this.flag),this.sprites.flag.scale.set(.4,.4),this.sprites.flag.anchor.set(.5,.5),this.sprites.badge=Textures.sprite("badge_gold"),this.sprites.badge.scale.set(.3),this.sprites.badge.visible=!1,game.graphics.layers.playernames.addChild(this.sprites.badge),game.graphics.layers.playernames.addChild(this.sprites.flag),game.graphics.layers.playernames.addChild(this.sprites.name)}setupChatBubbles(){this.sprites.bubble=new e.Container,this.sprites.bubbleLeft=Graphics.initSprite("chatbubbleleft",this.sprites.bubble,{scale:.5}),this.sprites.bubbleRight=Graphics.initSprite("chatbubbleright",this.sprites.bubble,{scale:.5}),this.sprites.bubbleCenter=Graphics.initSprite("chatbubblecenter",this.sprites.bubble,{scale:.5}),this.sprites.bubblePoint=Graphics.initSprite("chatbubblepoint",this.sprites.bubble,{scale:.5}),this.sprites.emote=Graphics.initSprite("emote_tf",this.sprites.bubble,{scale:.6,anchor:[.5,.5]}),this.sprites.bubbleText=new e.Text("a",{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:12*config.airmashRefugees.fontSizeMul+"px",fill:"white"}),this.sprites.bubble.addChild(this.sprites.bubbleText),this.sprites.bubble.visible=!1,this.sprites.bubble.pivot.set(.5,34),game.graphics.layers.bubbles.addChild(this.sprites.bubble)}visibilityUpdate(e){this.culled=!Graphics.inScreen(this.pos,128);var t=!(this.hidden||this.culled||this.timedout);if(e||this.render!=t){switch(this.sprites.sprite.visible=t,this.sprites.shadow.visible=t,this.sprites.flag.visible=t,this.sprites.name.visible=t,null!=this.sprites.level&&(this.sprites.level.visible=t,this.sprites.levelBorder.visible=t),this.sprites.badge.visible=this.state.hasBadge&&t,this.sprites.powerup.visible=this.powerupActive&&t,this.sprites.powerupCircle.visible=this.powerupActive&&t,this.type){case PlaneType.Predator:this.sprites.thruster.visible=t,this.sprites.thrusterGlow.visible=t,this.sprites.thrusterShadow.visible=t;break;case PlaneType.Goliath:case PlaneType.Tornado:case PlaneType.Prowler:this.sprites.thruster1.visible=t,this.sprites.thruster1Glow.visible=t,this.sprites.thruster1Shadow.visible=t,this.sprites.thruster2.visible=t,this.sprites.thruster2Glow.visible=t,this.sprites.thruster2Shadow.visible=t;break;case PlaneType.Mohawk:this.sprites.rotor.visible=t,this.sprites.rotorShadow.visible=t}this.render=t,t||Sound.clearThruster(this.id)}}stealth(e){this.lastPacket=game.timeNetwork,this.energy=e.energy,this.energyRegen=e.energyRegen,e.state?(this.stealthed=!0,this.state.stealthLevel=0,this.team!=game.myTeam&&(this.keystate.LEFT&&delete this.keystate.LEFT,this.keystate.RIGHT&&delete this.keystate.RIGHT)):this.unstealth()}unstealth(){this.stealthed=!1,this.state.stealthLevel=0,this.opacity(1)}opacity(e){this.alpha=e,this.sprites.sprite.alpha=e,this.sprites.shadow.alpha=e,this.sprites.flag.alpha=e,this.sprites.name.alpha=e,this.sprites.badge.alpha=e,this.sprites.powerup.alpha=.75*e,this.sprites.powerupCircle.alpha=.75*e,null!=this.sprites.level&&(this.sprites.level.alpha=e,this.sprites.levelBorder.alpha=.4*e),PlaneType.Prowler==this.type&&(this.sprites.thruster1.alpha=e,this.sprites.thruster1Glow.alpha=e,this.sprites.thruster2.alpha=e,this.sprites.thruster2Glow.alpha=e)}kill(e){if(this.status=1,this.spectate=!!e.spectate,this.keystate={},this.pos.x=e.posX,this.pos.y=e.posY,this.speed=r.a.zero(),this.me()&&UI.resetPowerups(),this.resetPowerups(),this.hidden=!0,this.visibilityUpdate(),this.stealthed&&this.unstealth(),!this.spectate&&(this.lastKilled=performance.now(),!this.culled)){switch(this.type){case PlaneType.Predator:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3));break;case PlaneType.Goliath:Particles.explosion(this.pos.clone(),Tools.rand(2,2.5),Tools.randInt(4,7));break;case PlaneType.Mohawk:case PlaneType.Tornado:case PlaneType.Prowler:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3))}Graphics.shakeCamera(this.pos,this.me()?20:10),Sound.clearThruster(this.id),Sound.playerKill(this)}}me(){return game.myID==this.id}destroy(e){var t=this.me()?game.graphics.layers.aircraftme:game.graphics.layers.aircraft;switch(t.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),this.sprites.powerup.destroy(),this.sprites.powerupCircle.destroy(),this.type){case PlaneType.Predator:game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.thrusters.removeChild(this.sprites.thrusterGlow),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.thrusterShadow.destroy();break;case PlaneType.Goliath:case PlaneType.Tornado:case PlaneType.Prowler:game.graphics.layers.thrusters.removeChild(this.sprites.thruster1,this.sprites.thruster2),game.graphics.layers.thrusters.removeChild(this.sprites.thruster1Glow,this.sprites.thruster2Glow),this.sprites.thruster1.destroy(),this.sprites.thruster2.destroy(),this.sprites.thruster1Glow.destroy(),this.sprites.thruster2Glow.destroy(),this.sprites.thruster1Shadow.destroy(),this.sprites.thruster2Shadow.destroy();break;case PlaneType.Mohawk:t.removeChild(this.sprites.rotor),this.sprites.rotor.destroy(),game.graphics.layers.shadows.removeChild(this.sprites.rotorShadow),this.sprites.rotorShadow.destroy()}e&&!this.reel&&(game.graphics.layers.playernames.removeChild(this.sprites.badge,this.sprites.name,this.sprites.flag),null!=this.sprites.level&&(game.graphics.layers.playernames.removeChild(this.sprites.level,this.sprites.levelBorder),this.sprites.level.destroy(),this.sprites.levelBorder.destroy()),game.graphics.layers.bubbles.removeChild(this.sprites.bubble),this.sprites.badge.destroy(),this.sprites.name.destroy(),this.sprites.flag.destroy(),this.sprites.bubble.destroy({children:!0}))}sayBubble(e){this.state.bubbleTime=game.time,this.state.bubbleFade=0,this.state.bubble||(this.state.bubble=!0,this.state.bubbleProgress=0,this.sprites.bubble.visible=this.render,this.sprites.bubble.alpha=0,this.sprites.bubble.scale.set(0,0)),this.sprites.bubble.cacheAsBitmap=!1;var t=UI.isEmote(e.text,!0);if(t){this.sprites.bubbleText.visible=!1,this.sprites.emote.texture=Textures.get("emote_"+t),this.sprites.emote.visible=!0;var n=26;this.sprites.emote.position.set(0,0)}else this.sprites.bubbleText.visible=!0,this.sprites.emote.visible=!1,this.sprites.bubbleText.text=e.text,n=this.sprites.bubbleText.width,this.sprites.bubbleText.position.set(-n/2,-7);this.sprites.bubbleLeft.position.set(-n/2-16,-21),this.sprites.bubbleRight.position.set(n/2+8,-21),this.sprites.bubbleCenter.position.set(-n/2-9,-21),this.sprites.bubbleCenter.scale.set(n/82+18/82,.5),this.sprites.bubblePoint.position.set(-9,18),this.sprites.bubble.cacheAsBitmap=!0,this.state.bubbleTextWidth=n}networkKey(e,t){this.lastPacket=game.timeNetwork,1==this.status&&this.revive(),null!=t.posX&&(this.reducedFactor=Tools.reducedFactor(),this.pos.x=t.posX,this.pos.y=t.posY,this.rot=t.rot,this.speed.x=t.speedX,this.speed.y=t.speedY);var n=this.stealthed;null!=t.keystate&&Tools.decodeKeystate(this,t.keystate),null!=t.upgrades&&(Tools.decodeUpgrades(this,t.upgrades),this.updatePowerups()),null!=t.energy&&(this.energy=t.energy,this.energyRegen=t.energyRegen),null!=t.boost&&(this.boost=t.boost),this.team!=game.myTeam&&(this.stealthed||n&&!this.stealthed)&&this.unstealth(),this.me()||!n||this.stealthed||this.unstealth(),t.c==Network.SERVERPACKET.EVENT_BOUNCE&&game.time-this.state.lastBounceSound>300&&(this.state.lastBounceSound=game.time,Sound.playerImpact(this.pos,this.type,this.speed.length()/config.ships[this.type].maxSpeed))}updateLevel(e){this.me()&&(1==e.type&&Games.showLevelUp(e.level),UI.updateMyLevel(e.level)),this.level=e.level,this.setupLevelPlate()}setupLevelPlate(){let t=this.bot?"bot":this.level+"";null==this.sprites.level?(this.sprites.level=new e.Text(t,{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:(this.bot?24:28)*config.airmashRefugees.fontSizeMul+"px",fill:"rgb(200, 200, 200)",dropShadow:!0,dropShadowBlur:6,dropShadowDistance:0,padding:4}),this.sprites.level.scale.set(.5,.5),this.sprites.levelBorder=Textures.sprite("levelborder"),this.sprites.levelBorder.alpha=.4,game.graphics.layers.playernames.addChild(this.sprites.levelBorder),game.graphics.layers.playernames.addChild(this.sprites.level)):this.sprites.level.text=t,this.sprites.levelBorder.scale.set((this.sprites.level.width+10)/32,.65),this.sprites.level.visible=this.render,this.sprites.levelBorder.visible=this.render}powerup(e){UI.addPowerup(e.type,e.duration)}resetPowerups(){this.powerupActive&&(this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1),this.powerups.shield=!1,this.powerupsShown.shield=!1,this.powerups.rampage=!1,this.powerupsShown.rampage=!1,this.powerupActive=!1,this.state.powerupFade=0,this.state.powerupFadeState=0}updatePowerups(){var e=!1;this.powerups.shield!=this.powerupsShown.shield&&(this.powerupsShown.shield=this.powerups.shield,this.powerups.shield&&(this.sprites.powerup.texture=Textures.get("powerup_shield"),this.sprites.powerupCircle.tint=16777215),e=!0),this.powerups.rampage!=this.powerupsShown.rampage&&(this.powerupsShown.rampage=this.powerups.rampage,this.powerups.rampage&&(this.sprites.powerup.texture=Textures.get("powerup_rampage"),this.sprites.powerupCircle.tint=16712448),e=!0),e&&(this.powerupActive=this.powerups.shield||this.powerups.rampage,this.powerupActive?(this.state.powerupFade=0,this.state.powerupFadeState=0,this.sprites.powerup.visible=!0,this.sprites.powerupCircle.visible=!0):(this.powerupActive=!0,this.state.powerupFade=0,this.state.powerupFadeState=1))}impact(e,t,n,r){this.health=n,this.healthRegen=r,this.stealthed&&this.unstealth(),200!=e&&Mobs.explosion(t,e),this.me()&&0==this.status&&Graphics.shakeCamera(t,8)}changeType(e){this.type!=e.type&&(this.destroy(!1),this.type=e.type,this.setupGraphics(!0),this.visibilityUpdate(!0))}respawn(e){this.lastPacket=game.timeNetwork,this.status=0,this.spectate=!1,this.keystate={},this.pos.x=e.posX,this.pos.y=e.posY,this.rot=e.rot,this.speed.x=0,this.speed.y=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.state.thrustLevel=0,this.state.thrustDir=0,this.hidden=!1,this.timedout=!1,this.visibilityUpdate(),this.me()&&UI.resetPowerups(),Tools.decodeUpgrades(this,e.upgrades),this.updatePowerups(),(this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.stealthed&&this.unstealth(),this.me()&&(game.myType=this.type,game.spectatingID=null,UI.aircraftSelected(this.type),UI.visibilityHUD(!0),UI.hideSpectator()),this.updateGraphics(1),Sound.playerRespawn(this),UI.updateGameInfo()}revive(){this.status=0,this.spectate=!1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.hidden=!1,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.stealthed&&this.unstealth(),UI.updateGameInfo()}changeFlag(e){this.flag=e.flag,this.sprites.flag.texture=Textures.get("flag_"+e.flag)}changeBadge(e){this.sprites.badge.texture=Textures.get(e)}updateNameplate(){if(!this.reel){let e=(this.sprites.name.width+this.sprites.flag.width+10)/2,t=this.pos.x-e+(this.state.hasBadge?12:0)-(this.sprites.level?this.sprites.level.width/2+8:0),n=this.pos.y+this.state.nameplateDist*this.scale;this.sprites.flag.position.set(t+15,n+10),this.sprites.name.position.set(t+40,n),this.sprites.level&&(this.sprites.level.position.set(t+2*e+13,n+(this.bot?3:2)),this.sprites.levelBorder.position.set(t+2*e+7.75,n-.5)),this.state.hasBadge&&this.sprites.badge.position.set(t-28,n)}}updateBubble(){this.sprites.bubble.visible=this.render,this.state.bubbleProgress+=.015*game.timeFactor,this.state.bubbleProgress>=1&&(this.state.bubbleProgress=1),game.time-this.state.bubbleTime>4e3?(this.state.bubbleFade+=.08*game.timeFactor,this.state.bubbleFade>=1&&(this.state.bubbleFade=1),this.sprites.bubble.scale.set(1+.2*this.state.bubbleFade),this.sprites.bubble.alpha=1*(1-this.state.bubbleFade),this.state.bubbleFade>=1&&(this.state.bubble=!1,this.sprites.bubble.visible=!1)):(this.sprites.bubble.scale.set(Tools.easing.outElastic(this.state.bubbleProgress,.5)),this.sprites.bubble.alpha=1);var e=(this.state.bubbleTextWidth+game.screenX)%2==0?.5:0,t=game.screenY%2==0?0:.5,n=this.state.nameplateDist*this.scale;this.powerupActive&&(n+=60),this.sprites.bubble.position.set(this.pos.x*game.scale+e,(this.pos.y-n)*game.scale+t)}detectTimeout(){if(!this.me()){var e=this.timedout;this.timedout=!game.lagging&&game.timeNetwork-this.lastPacket>3e3,this.timedout&&!e&&(this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=r.a.zero(),this.keystate={},this.resetPowerups())}}leaveHorizon(){this.me()||this.timedout||(this.lastPacket=-1e4,this.timedout=!0,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=r.a.zero(),this.keystate={},this.resetPowerups())}update(e){if(this.reel)this.clientCalcs(e);else{if(this.detectTimeout(),this.visibilityUpdate(),!this.render)return this.health+=e*this.healthRegen,void(this.health>=1&&(this.health=1));if(!(!1!==this.reducedFactor&&(e-=this.reducedFactor,this.reducedFactor=!1,e<=0))){for(var t=e>.51?Math.round(e):1,n=e/t,r=2*Math.PI,i=this.boost?1.5:1,o=0;o<t;o++){this.energy+=n*this.energyRegen,this.energy>=1&&(this.energy=1),this.health+=n*this.healthRegen,this.health>=1&&(this.health=1);var s=-999;this.strafe?(this.keystate.LEFT&&(s=this.rot-.5*Math.PI),this.keystate.RIGHT&&(s=this.rot+.5*Math.PI)):(this.keystate.LEFT&&(this.rot+=-n*config.ships[this.type].turnFactor),this.keystate.RIGHT&&(this.rot+=n*config.ships[this.type].turnFactor));var a=this.speed.x,l=this.speed.y;this.keystate.UP?-999==s?s=this.rot:s+=Math.PI*(this.keystate.RIGHT?-.25:.25):this.keystate.DOWN&&(-999==s?s=this.rot+Math.PI:s+=Math.PI*(this.keystate.RIGHT?.25:-.25)),-999!==s&&(this.speed.x+=Math.sin(s)*config.ships[this.type].accelFactor*n*i,this.speed.y-=Math.cos(s)*config.ships[this.type].accelFactor*n*i);var u=this.speed.length(),c=config.ships[this.type].maxSpeed*i*config.upgrades.speed.factor[this.speedupgrade],h=config.ships[this.type].minSpeed;this.powerups.rampage&&(c*=.75),this.flagspeed&&(c=5),u>c?this.speed.multiply(c/u):this.speed.x>h||this.speed.x<-h||this.speed.y>h||this.speed.y<-h?(this.speed.x*=1-config.ships[this.type].brakeFactor*n,this.speed.y*=1-config.ships[this.type].brakeFactor*n):(this.speed.x=0,this.speed.y=0),this.pos.x+=n*a+.5*(this.speed.x-a)*n*n,this.pos.y+=n*l+.5*(this.speed.y-l)*n*n,this.clientCalcs(n)}this.rot=(this.rot%r+r)%r,-1!=game.gameType?(this.pos.x<-16352&&(this.pos.x=-16352),this.pos.x>16352&&(this.pos.x=16352),this.pos.y<-8160&&(this.pos.y=-8160),this.pos.y>8160&&(this.pos.y=8160)):(this.pos.x<-16384&&(this.pos.x+=32768),this.pos.x>16384&&(this.pos.x-=32768),this.pos.y<-8192&&(this.pos.y+=16384),this.pos.y>8192&&(this.pos.y-=16384)),Sound.updateThruster(0,this)}}}clientCalcs(e){switch(this.type){case PlaneType.Predator:case PlaneType.Goliath:case PlaneType.Tornado:case PlaneType.Prowler:var t,n=!1,r=this.boost?1.5:1;!1!==(t=this.keystate.LEFT?.3:this.keystate.RIGHT?-.3:0)&&(this.state.thrustDir=Tools.converge(this.state.thrustDir,t,.1*e)),!1!==(n=this.keystate.UP?1:this.keystate.DOWN?-1:0)&&(this.state.thrustLevel=Tools.converge(this.state.thrustLevel,n*r,.2*e));break;case PlaneType.Mohawk:this.state.thrustDir+=(.2+this.speed.length()/50)*e}this.culled||this.render&&(!this.stealthed&&this.health<.4&&Particles.planeDamage(this),!this.stealthed&&this.health<.2&&Particles.planeDamage(this),this.boost&&Particles.planeBoost(this,n>=0),PlaneType.Prowler==this.type&&this.stealthed&&(this.state.stealthLevel+=.03*e,this.state.stealthLevel=Tools.clamp(this.state.stealthLevel,0,this.team==game.myTeam?.5:1),this.opacity(1-this.state.stealthLevel)),this.state.scaleLevel+=.005*e,this.state.scaleLevel>=1?(this.state.scaleLevel=1,this.scale=1):this.scale=Tools.easing.outElastic(this.state.scaleLevel,.5),this.powerupActive&&(this.state.powerupAngle+=.075*e,0==this.state.powerupFadeState?(this.state.powerupFade+=.05*e,this.state.powerupFade>=1&&(this.state.powerupFade=1)):(this.state.powerupFade+=.05*e,this.state.powerupFade>=1&&(this.powerupActive=!1,this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1))))}updateGraphics(e){var t=Tools.oscillator(.025,1e3,this.randomness)*this.scale,n=1.5*this.state.thrustLevel,r=this.rot,i=Graphics.shadowCoords(this.pos);if(Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,r,t*this.state.baseScale,t*this.state.baseScale),Graphics.transform(this.sprites.shadow,i.x,i.y,r,this.state.baseScale*(2.4/config.shadowScaling)*this.scale,this.state.baseScale*(2.4/config.shadowScaling)*this.scale),this.powerupActive){var o=.35*(0==this.state.powerupFadeState?2*(1-this.state.powerupFade)+1:1-this.state.powerupFade)*Tools.oscillator(.075,100,this.randomness),s=.75*(0==this.state.powerupFadeState?Tools.clamp(2*this.state.powerupFade,0,1):Tools.clamp(1-1.3*this.state.powerupFade,0,1))*this.alpha;Graphics.transform(this.sprites.powerup,this.pos.x,this.pos.y-80,0,o,o,s),Graphics.transform(this.sprites.powerupCircle,this.pos.x,this.pos.y-80,this.state.powerupAngle,1.35*o,1.35*o,s)}var a=Tools.oscillator(.1,.5,this.randomness),l=Math.abs(this.state.thrustLevel)<.01?0:this.state.thrustLevel/2+(this.state.thrustLevel>0?.5:-.5),u=Tools.clamp(2*Math.abs(this.state.thrustLevel)-.1,0,1);switch(this.type){case PlaneType.Predator:Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-r)*(20*t),this.pos.y+Math.cos(-r)*(20*t),r+(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale,.5*a*l*this.scale,u),Graphics.transform(this.sprites.thrusterShadow,i.x+Math.sin(-r)*(20*t)/config.shadowScaling,i.y+Math.cos(-r)*(20*t)/config.shadowScaling,r+(this.state.thrustLevel>0?this.state.thrustDir:0),.4*a*l*this.scale*(4/config.shadowScaling),.5*a*l*this.scale*(4/config.shadowScaling),u/2.5),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-r-.5*this.state.thrustDir)*(40*t),this.pos.y+Math.cos(-r-.5*this.state.thrustDir)*(40*t),null,1.5*n*this.scale,1*n*this.scale,.3*this.state.thrustLevel);break;case PlaneType.Goliath:this.state.thrustLevel<0&&(a*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-r-.5)*(32*t),this.pos.y+Math.cos(-r-.5)*(32*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.4*a*l*this.scale,.6*a*l*this.scale,u),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.5-r)*(32*t),this.pos.y+Math.cos(.5-r)*(32*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.4*a*l*this.scale,.6*a*l*this.scale,u),Graphics.transform(this.sprites.thruster1Shadow,i.x+Math.sin(-r-.5)*(32*t)/config.shadowScaling,i.y+Math.cos(-r-.5)*(32*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.5*a*l*this.scale*(4/config.shadowScaling),.6*a*l*this.scale*(4/config.shadowScaling),u/2.5),Graphics.transform(this.sprites.thruster2Shadow,i.x+Math.sin(.5-r)*(32*t)/config.shadowScaling,i.y+Math.cos(.5-r)*(32*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.5*a*l*this.scale*(4/config.shadowScaling),.6*a*l*this.scale*(4/config.shadowScaling),u/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-r-.3)*(50*t),this.pos.y+Math.cos(-r-.3)*(50*t),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.3-r)*(50*t),this.pos.y+Math.cos(.3-r)*(50*t),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel);break;case PlaneType.Mohawk:Graphics.transform(this.sprites.rotor,this.pos.x,this.pos.y,this.state.thrustDir,t*this.state.baseScale*2,t*this.state.baseScale*2,.8),Graphics.transform(this.sprites.rotorShadow,i.x,i.y,this.state.thrustDir,this.state.baseScale*(2.4/config.shadowScaling)*this.scale*2,this.state.baseScale*(2.4/config.shadowScaling)*this.scale*2);break;case PlaneType.Tornado:this.state.thrustLevel<0&&(a*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-r-.15)*(28*t),this.pos.y+Math.cos(-r-.15)*(28*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale,.5*a*l*this.scale,u),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.15-r)*(28*t),this.pos.y+Math.cos(.15-r)*(28*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale,.5*a*l*this.scale,u),Graphics.transform(this.sprites.thruster1Shadow,i.x+Math.sin(-r-.15)*(28*t)/config.shadowScaling,i.y+Math.cos(-r-.15)*(28*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale*(4/config.shadowScaling),.5*a*l*this.scale*(4/config.shadowScaling),u/2.5),Graphics.transform(this.sprites.thruster2Shadow,i.x+Math.sin(.15-r)*(28*t)/config.shadowScaling,i.y+Math.cos(.15-r)*(28*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale*(4/config.shadowScaling),.5*a*l*this.scale*(4/config.shadowScaling),u/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-r-.2)*(45*t),this.pos.y+Math.cos(-r-.2)*(45*t),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-r)*(45*t),this.pos.y+Math.cos(.2-r)*(45*t),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel);break;case PlaneType.Prowler:this.state.thrustLevel<0&&(a*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-r-.35)*(20*t),this.pos.y+Math.cos(-r-.35)*(20*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale,.4*a*l*this.scale,u*this.alpha),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.35-r)*(20*t),this.pos.y+Math.cos(.35-r)*(20*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale,.4*a*l*this.scale,u*this.alpha),Graphics.transform(this.sprites.thruster1Shadow,i.x+Math.sin(-r-.35)*(20*t)/config.shadowScaling,i.y+Math.cos(-r-.35)*(20*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.4*a*l*this.scale*(4/config.shadowScaling),.4*a*l*this.scale*(4/config.shadowScaling),u*this.alpha/2.5),Graphics.transform(this.sprites.thruster2Shadow,i.x+Math.sin(.35-r)*(20*t)/config.shadowScaling,i.y+Math.cos(.35-r)*(20*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.4*a*l*this.scale*(4/config.shadowScaling),.4*a*l*this.scale*(4/config.shadowScaling),u*this.alpha/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-r-.2-0*this.state.thrustDir)*(35*t),this.pos.y+Math.cos(-r-.2-0*this.state.thrustDir)*(35*t),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-r-0*this.state.thrustDir)*(35*t),this.pos.y+Math.cos(.2-r-0*this.state.thrustDir)*(35*t),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha)}this.updateNameplate(),this.state.bubble&&this.updateBubble(),config.debug.collisions&&this.col&&(this.col.position.set(this.pos.x,this.pos.y),this.col.rotation=this.rot)}isSpectating(){return this.spectate}}}).call(this,n(13))},function(e,t,n){e.exports=n(231)},function(e,t,n){(function(e,t){window.DEVELOPMENT=/^http:\/\/127\.0\.0\.1:[0-9]{1,5}\/?$/.test(window.origin)||-1!=(window.location.search||"").indexOf("dev"),window.game={protocol:5,version:`v${n(204)}`,state:0,focus:!0,screenX:0,screenY:0,halfScreenX:0,halfScreenY:0,scale:1,spectatingID:null,myID:null,myType:null,myTeam:null,myUserID:"",myName:"",myOriginalName:"",myScore:0,myPlace:0,myLevel:0,myToken:"",myFlag:"xx",loggedIn:!1,roomName:"",roomNameShort:"",regionName:"",playRegion:"derp",playRoom:"ffa",playHost:"",playPath:"",playInvited:!1,gameType:null,inviteLink:"",lastFlagSet:"xx",reloading:!1,ping:0,lagging:!1,timeFactor:1,timeFactorUncapped:1,time:0,timeNetwork:0,jitter:0,frames:0,shadowX:0,shadowY:0,graphics:{},debug:{},buckets:[],customServerUrl:null,backendHost:"data.airmash.online",server:{}},window.config={airmashRefugees:{fontSizeMul:1,unicodeWorkaround:!1},settings:{},auth:{},ships:[{},{name:"raptor",turnFactor:.065,accelFactor:.225,maxSpeed:5.5,minSpeed:.001,brakeFactor:.025,energyLight:.6,collisions:[[0,5,23],[0,-15,15],[0,-25,12]]},{name:"spirit",turnFactor:.04,accelFactor:.15,maxSpeed:3.5,minSpeed:.001,brakeFactor:.015,energyLight:.9,collisions:[[0,0,35],[50,14,16],[74,26,14],[30,8,23],[63,22,15],[-50,14,16],[-74,26,14],[-30,8,23],[-63,22,15]]},{name:"mohawk",turnFactor:.07,accelFactor:.275,maxSpeed:6,minSpeed:.001,brakeFactor:.025,energyLight:.3,collisions:[[0,-12,15],[0,0,17],[0,13,15],[0,26,15]]},{name:"tornado",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.5,collisions:[[0,8,18],[14,12,13],[-14,12,13],[0,-12,16],[0,-26,14],[0,-35,12]]},{name:"prowler",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.75,collisions:[[0,11,25],[0,-8,18],[19,20,10],[-19,20,10],[0,-20,14]]}],mobs:[{},{exhaust:20,thruster:[.2,.4]},{exhaust:30,thruster:[.3,.6]},{exhaust:18,thruster:[.14,.3]},{},{exhaust:20,thruster:[.2,.4]},{exhaust:20,thruster:[.2,.4]},{exhaust:20,thruster:[.2,.4]},{},{},{},{},{exhaust:18,thruster:[.15,.3],thrusterGlowAlpha:.5,smokeGlowAlpha:.5,thrusterAlpha:.5}],upgrades:{speed:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},defense:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},energy:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},missile:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]}},doodads:[[1009,-2308,1,.9,.2,null,null],[1241,-2490,4,.5,-.2,null,null],[1157,-2379,2,.7,-.1,null,null],[622,-2126,3,.4,null,null,null],[669,-2187,2,.6,null,null,null],[-392,-1669,1,1.1,.1,null,null],[-273,-1746,4,.5,-.1,null,null],[-252,-1504,2,1,null,null,null],[1553,-2016,2,.4,.2,null,null],[1637,-1972,1,.5,.1,null,null],[1736,-1922,2,.5,.7,null,null],[2150,-2406,2,.6,null,null,null],[2238,-2318,3,.9,null,null,null],[2364,-2391,4,.6,0,null,null],[2491,-2682,1,.6,-.1,null,null],[2596,-2671,2,.9,.2,null,null],[-150,-3147,4,.4,-.4,null,null],[-155,-3044,2,.7,0,null,null],[-427,-3600,2,.4,null,null,null],[-259,-2982,2,.5,null,null,null],[-379,-3529,1,.6,.1,1,null],[-665,-3052,2,.5,null,null,null],[20,-1816,4,.5,.3,null,null],[127,-1799,1,.5,null,null,null],[263,-2572,3,.4,.4,null,null],[405,-2570,1,.9,-.2,null,null],[851,-4183,1,1,null,null,null],[754,-3971,2,.9,-.1,1,null],[1757,-5065,4,1.1,null,null,null],[1169,-4453,3,.9,null,null,null],[2054,-5244,3,.9,null,null,null],[1631,-4901,1,.9,0,null,null],[2305,-5281,2,.9,.2,1,null],[1007,-4281,1,.8,.1,null,null],[2766,-5202,1,.8,.1,1,null],[2927,-5204,2,.7,null,1,null],[3206,-5218,2,.3,.6,1,null],[3099,-5193,4,.6,.1,1,null],[1417,-4726,2,1,null,null,null],[2844,-1513,4,.5,.1,null,null],[3206,-1464,1,1,.1,1,null],[2881,-1403,2,.9,null,null,null],[3804,-2025,1,.7,-.1,null,null],[4116,-1778,2,.9,-.3,null,null],[3715,-1508,3,.6,.1,null,null],[4247,-1126,1,.6,.1,1,null],[3860,268,1,.5,.5,1,null],[4334,-1011,2,1.1,-.1,null,null],[3849,349,3,.6,null,null,null],[3956,490,4,.8,-.4,null,null],[4073,667,2,.9,-.5,null,null],[3583,-864,4,.8,.1,.8,15723705],[4135,836,2,1,-.2,null,null],[4785,-743,2,1,.1,null,null],[4993,-839,1,.9,.3,1,null],[5224,-482,3,.7,null,null,null],[5235,-1238,4,1.1,null,1,null],[5419,-1346,2,.6,-.5,.8,null],[6075,-5099,1,.8,null,null,null],[5767,-4953,2,.9,-.3,1,null],[5896,-4967,2,.9,.1,1,null],[5384,-4642,4,.9,null,null,null],[5704,-4857,4,.9,null,null,null],[5563,-4697,2,.9,null,null,null],[5406,-4470,1,1.1,null,null,null],[5352,-3964,3,.9,null,null,null],[5309,-3665,1,1.1,null,null,null],[5247,-3464,4,.9,-.5,null,null],[5300,-3121,1,.9,null,null,null],[3524,-3340,1,1.1,0,null,null],[3661,-3589,2,.9,-.7,null,null],[7236,-1376,2,.6,-.3,null,null],[7624,-1610,2,.8,null,null,null],[7403,-1555,2,.7,null,null,null],[7514,-1568,2,.9,0,null,null],[3660,-2705,1,.9,.2,null,null],[3374,-2813,2,.8,null,null,null],[7347,-1447,1,.9,.1,null,null],[7236,-775,4,.5,-.9,null,null],[7207,-631,2,.9,0,null,null],[7303,-468,1,.9,-.3,null,null],[7262,-1263,4,.9,-.6,null,null],[7404,-350,2,1,.6,null,null],[7589,-305,3,.9,.6,null,null],[7741,-1589,4,1,.2,null,null],[7949,-1594,1,1,-.2,null,null],[8152,-1599,2,1.1,.1,null,null],[8378,-1602,4,1.2,0,null,null],[7873,-321,2,.6,.3,null,null],[8543,-1661,1,.7,0,null,null],[7790,-259,1,1,.1,null,null],[8675,-1573,2,1,.1,null,null],[8163,-245,2,.7,.3,null,null],[8329,-311,2,.7,.5,null,null],[8275,-229,1,1,.1,null,null],[8447,-277,3,1,0,null,null],[8824,-1447,1,.9,-.4,null,null],[7221,-1140,1,.5,-.2,null,null],[8924,-1273,2,.9,-.5,null,null],[6844,-950,3,1,.1,null,null],[8949,-1060,3,1.1,-.3,null,null],[8904,-920,4,.8,-.7,null,null],[8582,-338,2,.7,null,null,null],[8963,-803,1,1,-.4,null,null],[8680,-322,4,.9,0,null,null],[8811,-449,1,.9,-.3,null,null],[8910,-610,2,.9,-.4,null,null],[6855,114,1,.8,null,null,null],[6971,241,2,1,-.1,null,null],[6852,656,2,.5,.3,null,null],[6980,706,1,.9,-.4,null,null],[6946,939,4,1,-.2,null,null],[6027,-560,1,.6,0,null,null],[7521,425,2,.4,.1,null,null],[7599,389,1,.5,-.5,null,null],[5863,-431,2,.9,.1,null,null],[9392,262,2,.9,-.1,null,null],[7521,512,3,.6,null,null,null],[9807,1027,1,.5,-.1,null,null],[9554,237,1,1,-.2,1,null],[9346,392,4,1.2,-.3,null,null],[9789,1142,3,.7,null,null,null],[9747,-532,4,.8,.2,1,null],[8591,347,4,.6,-.2,null,null],[9951,-509,1,1,null,null,null],[9308,2417,1,.5,.1,null,null],[10185,-522,2,.9,null,1,null],[10330,2147,1,.6,0,null,null],[9350,2480,3,.7,null,null,null],[10503,2124,2,.9,null,null,null],[12500,2628,4,.5,.3,null,null],[13188,2864,4,.5,-.1,null,null],[12637,2659,2,.7,.1,null,null],[13262,2899,1,.5,null,null,null],[13777,5168,1,.5,-.3,null,null],[15709,6399,1,.4,null,null,null],[13539,5664,3,.5,null,1,null],[15660,6474,2,.4,-.3,null,null],[13743,5248,2,.7,-.1,null,null],[15482,6600,2,.4,-.1,null,null],[15591,6525,4,.3,null,null,null],[13487,5738,4,.7,null,null,null],[15407,6702,1,.6,.1,null,null],[8171,-2568,2,.5,.1,null,null],[16001,6015,3,.6,null,null,null],[16017,6110,1,.4,null,1,null],[6496,-1491,1,.5,.3,null,null],[6626,-1480,2,.7,null,null,null],[6190,-1022,4,.8,null,null,null],[8325,-2615,2,1,-.3,null,null],[8222,-2412,4,1,null,null,null],[9204,-2288,1,.9,-.1,null,null],[9279,-2216,2,1,null,null,null],[10375,-1558,2,.8,-.3,null,null],[10309,-1421,1,.9,null,null,null],[10247,-1216,4,1.2,-.5,null,null],[10079,-2310,4,.9,.3,null,null],[10320,-2330,3,1,null,null,null],[10942,-2963,2,.9,-.3,null,null],[10807,-2778,4,1.1,-.5,null,null],[12989,-1929,3,.6,null,null,null],[12613,-1181,1,.4,0,1,null],[12559,-1120,2,.5,null,null,null],[11642,-1900,4,.7,-.5,null,null],[11558,-1692,1,.9,-.2,null,null],[11509,-1479,2,.5,null,null,null],[12559,-2673,1,.8,null,null,null],[12446,-2487,4,1,-.5,null,null],[12375,-2303,3,.9,-.2,null,null],[10363,-3514,4,.7,-.4,null,null],[10290,-3340,1,.9,-.2,null,null],[10162,-3207,2,.7,null,null,null],[9003,-3048,4,.9,-.1,null,null],[9161,-3119,1,.6,null,null,null],[14550,-3462,2,.9,-.2,null,null],[14407,-3335,4,.9,-.2,null,null],[14366,-4493,2,.9,.5,null,null],[14477,-4437,3,1,null,null,null],[15305,-4230,4,.9,.1,null,null],[15481,-4283,2,.9,null,null,null],[15349,-5009,4,.4,.3,null,null],[11874,-4879,2,.6,null,null,null],[15453,-4984,1,.7,null,null,null],[11907,-4742,4,.8,-.6,null,null],[12440,-4278,4,.5,.3,null,null],[11980,-4582,2,.9,null,null,null],[12131,-4387,1,1.1,null,null,null],[15681,-4973,4,1,null,null,null],[12591,-4252,1,.8,null,null,null],[12777,-4244,2,.9,.2,null,null],[12969,-4227,3,.9,null,null,null],[15897,-5071,2,.9,-.2,null,null],[13204,-4228,4,1,null,null,null],[11592,-5261,1,.7,.2,null,null],[12743,-4826,1,.4,.3,null,null],[10102,-5078,2,.7,.4,null,null],[12854,-4782,3,.9,.1,null,null],[10191,-5033,1,.7,null,null,null],[10523,-5133,2,1,null,null,null],[10336,-4977,4,1.1,-.3,null,null],[10667,-5250,2,.8,-.1,null,null],[9665,-6403,4,.7,.3,null,null],[10798,-5379,1,.5,null,null,null],[9670,-5547,1,.9,-.1,null,null],[9834,-6369,3,1,null,null,null],[9864,-5572,2,1.1,-.1,null,null],[11362,-3957,2,.9,null,1,null],[11162,-3830,4,1,-.1,null,null],[8922,-6173,4,1,null,null,null],[9003,-5368,1,.5,null,null,null],[8453,-6153,1,.6,.2,null,null],[8954,-5229,3,.9,-.2,null,null],[8905,-5072,1,.8,-.3,null,null],[8704,-3873,3,.9,null,null,null],[8578,-6105,2,.8,.4,null,null],[8508,-3710,1,.7,0,null,null],[8614,-5400,4,.5,null,null,null],[8788,-4922,4,1.1,null,null,null],[8936,-3905,4,.6,.3,null,null],[9701,-4613,4,.9,-.1,null,null],[6973,-4776,2,.6,null,null,null],[7016,-4674,1,.9,null,null,null],[9124,-3853,1,.9,.2,null,null],[7253,-4648,4,.8,.2,null,null],[6602,-4591,1,.6,.2,null,null],[8510,-5322,2,.9,null,null,null],[6687,-3810,4,.7,.3,null,null],[9525,-4492,3,1.1,null,null,null],[7461,-4705,2,.9,null,null,null],[9280,-3812,2,.8,-.3,null,null],[6467,-2811,1,.3,null,null,null],[6842,-3820,1,.8,.3,null,null],[6483,-2725,4,.6,.3,null,null],[7675,-4864,1,1.1,null,null,null],[6991,-2885,4,.9,.2,null,null],[6610,-2664,4,.9,null,null,null],[6822,-2736,2,.9,null,null,null],[6763,-4582,3,.9,null,null,null],[6509,-2490,2,.9,-.3,null,null],[7216,-3865,4,1.1,.2,1,null],[7018,-3708,2,1,.2,null,null],[2254,-3301,1,.8,.5,null,null],[6378,-2310,1,.8,.2,null,null],[7197,-2857,2,.9,null,null,null],[2609,-3483,4,.5,null,null,null],[2449,-3385,2,.9,.3,1,null],[4585,-2889,4,.7,-.2,null,null],[4470,-2768,3,.8,.2,null,null],[4083,-4033,1,.9,.5,1,null],[1568,-2869,1,.4,null,null,null],[4336,-4105,2,1.2,null,null,null],[1977,-1678,2,.5,null,null,null],[1412,-3642,1,.5,0,1,null],[1570,-2792,4,.6,null,null,null],[1932,-1586,1,.6,null,null,null],[1310,-3547,2,.6,0,null,null],[3611,1391,2,1,null,null,null],[3558,2174,2,.9,null,null,null],[3431,1563,1,.9,.3,null,null],[3142,2813,2,.7,null,null,null],[3330,2296,4,1.1,null,null,null],[3001,2818,1,.6,.3,null,null],[3703,2044,1,.4,null,null,null],[2872,3863,1,.9,-.2,null,null],[3125,2942,3,1.1,null,null,null],[2841,4018,4,1.1,.1,null,null],[2402,5140,4,.6,.3,null,null],[2511,5167,3,.8,null,null,null],[-14607,-5112,4,.9,.1,null,null],[-14430,-5180,1,.9,0,null,null],[-14197,-5222,2,1.2,-.1,null,null],[-14895,-4703,4,.5,.2,null,null],[-14797,-4728,2,.4,null,null,null],[-14697,-4739,1,.4,null,null,null],[-13919,-5281,1,1.1,0,null,null],[-13646,-5170,3,.7,null,null,null],[-13400,-5068,2,1.2,.2,null,null],[-13099,-5108,4,1.1,.2,null,null],[-12824,-5092,1,.9,null,null,null],[-12631,-5044,2,.9,-.2,null,null],[-12427,-4914,1,.9,null,null,null],[-12270,-4816,2,.7,-.3,null,null],[-11772,-4983,2,.7,0,null,null],[-11940,-4867,1,.9,null,null,null],[-12091,-4699,3,.9,null,null,null],[-12270,-4529,4,.7,null,null,null],[-12460,-4396,1,.9,.4,null,null],[-13058,-4252,1,.9,null,null,null],[-12894,-4096,4,.7,.2,null,null],[-12738,-4077,2,.7,null,null,null],[-13546,-4341,1,.4,null,null,null],[-13428,-4299,3,.9,null,null,null],[-14679,-4192,1,.7,-.1,null,null],[-14368,-4308,4,.7,-.2,null,null],[-14495,-4133,2,1.1,-.1,null,null],[-12072,-3824,2,.8,-.1,null,null],[-11904,-3648,1,1,0,null,null],[-11654,-3569,3,.7,null,null,null],[-11648,-3357,4,.9,0,null,null],[-11420,-3359,1,.9,null,null,null],[-11296,-3135,2,.7,null,null,null],[-10782,-2838,1,.8,-.1,null,null],[-11410,-3039,1,.3,.6,null,null],[-10581,-2773,2,1.1,.1,null,null],[-11118,-5114,4,.8,.2,null,null],[-10675,-5079,1,.9,null,null,null],[-10205,-4890,1,.8,.1,null,null],[-11543,-4164,4,.8,.3,null,null],[-11287,-4244,2,.5,null,null,null],[-10018,-4747,2,1,-.2,null,null],[-9278,419,3,.5,null,null,null],[-9341,470,4,.5,.3,null,null],[-9180,496,1,.8,.6,null,null],[-11365,-4131,3,1,null,null,null],[-9353,0,3,.6,.3,null,null],[-8975,528,2,1,.1,null,null],[-9413,89,4,.9,null,null,null],[-8230,770,1,.4,null,null,null],[-9231,17,1,.7,0,null,null],[-6808,1667,3,.5,-.2,null,null],[-6694,1622,2,.8,-.4,null,null],[-8285,855,3,.6,null,null,null],[-6793,1796,2,.8,.4,null,null],[-6865,1935,1,.5,-.1,null,null],[-7043,2222,3,.6,-.2,null,null],[-7083,2368,1,.6,-.2,null,null],[-7103,2533,4,.7,-.4,null,null],[-7099,2721,2,.8,-.3,null,null],[-7178,2874,1,.4,null,null,null],[-6964,3110,4,.7,.2,null,null],[-6246,4191,1,.6,-.1,null,null],[-6735,3446,1,.4,.1,null,null],[-6722,3537,4,.7,.4,null,null],[-6396,3388,4,.9,null,null,null],[-6787,3140,2,.9,null,null,null],[-6227,4488,2,.7,-.5,null,null],[-6281,3953,1,.6,.2,null,null],[-6530,3576,1,1.1,null,null,null],[-6147,3994,3,1.1,null,null,null],[-6141,4292,2,1.2,-.3,null,null],[-6377,5578,2,.7,-.5,null,null],[-6152,4569,1,.9,-.2,null,null],[-6222,4769,4,.7,-.5,null,null],[-6266,4956,1,.6,-.2,null,null],[-6233,5414,1,.9,-.4,null,null],[-6347,5646,3,.7,-.1,1,null],[-6400,6066,2,.7,-.2,null,null],[-6411,6261,1,.8,null,null,null],[-6565,7043,1,.6,-.3,null,null],[-6377,6415,4,.9,-.3,null,null],[-6440,6614,1,.7,-.2,null,null],[-5944,1954,3,.5,-.4,null,null],[-6001,2039,1,.8,.2,null,null],[-6467,7070,3,.9,null,null,null],[-4963,3608,1,.6,-.3,1,null],[-4776,3510,2,.4,-.1,1,null],[-5785,1998,2,1.1,-.2,null,null],[-3708,3449,1,.6,-.3,null,null],[-3790,3582,1,.9,null,null,null],[-4031,3697,4,.7,-.1,null,null],[-4859,3634,3,1,null,null,null],[-3850,3730,2,1,.2,null,null],[-4689,4605,4,.9,-.2,null,null],[-3492,2892,1,.6,-.2,null,null],[-4507,4483,1,.6,null,null,null],[-4829,2745,1,.9,-.2,null,null],[-4435,4273,2,.9,-.6,null,null],[-3383,2930,2,.9,null,null,null],[-4888,2821,2,.9,.1,null,null],[-5372,5172,1,.5,null,null,null],[-5036,2981,4,.9,.3,null,null],[-9895,-1942,1,1,.1,null,null],[-9371,-2159,4,.6,null,null,null],[-9995,-1773,4,.9,-.5,null,null],[-5280,5218,4,.9,0,null,null],[-5079,5183,1,.9,-.3,null,null],[-5149,3079,1,.6,.2,null,null],[-9695,-2048,2,1,-.1,null,null],[-5063,5374,2,.9,-.2,null,null],[-9504,-2059,1,1,.2,null,null],[-8948,-2140,4,.7,.3,null,null],[-9262,-2081,2,1.1,.4,null,null],[-9068,-2071,4,1,.2,null,null],[-8861,-2045,2,1.1,0,null,null],[-8654,-2083,1,1,.3,null,null],[-8473,-2048,3,1,0,null,null],[-8283,-1965,1,1,.5,null,null],[-8182,-1863,2,.9,-.2,null,null],[-10037,-1579,1,.9,-.4,null,null],[-10063,-1365,2,.9,-.1,null,null],[-10074,-1190,1,.9,-.4,null,null],[-8167,-1225,1,.5,-.7,null,null],[-8188,-1087,4,.8,-.5,null,null],[-9975,-1022,1,.9,.3,null,null],[-9835,-910,2,1,.1,null,null],[-9709,-848,4,1,.3,null,null],[-9532,-792,2,1,.1,null,null],[-9348,-779,1,1,0,null,null],[-9131,-784,2,1.1,.1,null,null],[-8754,-795,3,.7,null,null,null],[-8587,-797,4,1,0,null,null],[-8424,-856,1,.9,null,null,null],[-8246,-921,2,.9,-.4,null,null],[-8153,-1701,4,.7,-.7,null,null],[-6447,-2137,1,.6,-.2,null,null],[-8153,-1591,1,.5,-.6,null,null],[-7694,-1393,4,1,-.1,null,null],[-6541,-2030,2,.7,null,null,null],[-7135,-1547,2,.7,.1,null,null],[-5885,-2958,1,.6,.3,null,null],[-7171,-1440,1,.8,-.2,null,null],[-5620,-3123,2,.6,-.4,null,null],[-6631,-1866,4,.8,null,null,null],[-5882,-3696,2,.8,-.4,null,null],[-5716,-2944,3,.9,null,null,null],[-5949,-3528,1,.5,-.1,null,null],[-6869,-4052,4,.8,null,null,null],[-7081,-2673,3,.5,null,null,null],[-6725,-4069,1,.6,-.2,null,null],[-10487,-2295,2,.5,.1,1,null],[-7032,-2749,2,.6,-.4,null,null],[-10769,-3817,3,.6,-.2,null,null],[-6607,-4081,2,.5,null,null,null],[-10849,-1824,1,.7,.1,null,null],[-10479,-2146,4,.9,-.1,null,null],[-7003,-2611,4,.9,-.2,null,null],[-10749,-1511,2,.6,-.4,null,null],[-10697,-1953,2,1,.1,null,null],[-10848,-1330,3,.9,null,null,null],[-10912,-1220,4,.5,0,null,null],[-9843,-2685,4,.7,null,null,null],[-10823,-3717,2,.7,null,null,null],[-9697,-2713,1,.6,.3,null,null],[-10080,-3431,2,.4,null,null,null],[-10648,-3844,1,.9,null,null,null],[-9530,-2695,2,1,null,null,null],[-2387,-6791,1,.9,null,null,null],[-8465,-5037,2,.7,null,null,null],[-2550,-6627,2,.9,-.1,null,null],[-9325,-2822,1,.7,-.1,null,null],[-10140,-3346,1,.8,null,null,null],[-8461,-4908,4,.9,null,null,null],[8116,-1076,2,.8,-.3,null,null],[8115,-940,4,.8,-.3,null,null],[-2503,-6359,4,1.4,-.6,null,null],[-9062,-1580,2,.8,-.5,null,null],[8120,-790,1,.8,null,null,null],[-9065,-1444,4,.8,-.3,null,null],[-2615,-6159,1,1,null,null,null],[-2744,-5943,2,1.1,null,null,null],[-3713,-4955,3,.9,null,null,null],[-9061,-1292,1,.8,0,null,null],[-1551,-4718,4,.5,null,null,null],[5251,-6249,1,.5,null,1,null],[5192,-6181,2,.4,-.1,null,null],[-2898,-5732,3,.9,null,null,null],[-1705,-4629,3,.8,null,null,null],[1618,-7035,1,.5,null,null,null],[-3829,-4776,4,.9,null,null,null],[-2851,-5589,4,1.1,-.2,null,null],[-2974,-5399,2,1.1,null,null,null],[-3952,-4568,1,.9,null,null,null],[-4135,-4368,2,1.1,.1,1,null],[-3428,-5104,1,1.1,null,null,null],[-3167,-5254,4,.9,.1,null,null],[-3049,-6916,2,1,null,null,null],[-3097,-6722,1,.9,-.3,null,null],[-3190,-6493,3,1,null,null,null],[-3318,-6284,4,1.1,null,null,null],[-4672,-5861,1,1.1,1,null,null],[-4480,-5668,1,1,null,null,null],[-4294,-5548,2,.9,1.1,null,null],[-3433,-6072,1,1,-.2,null,null],[-3568,-5881,3,1,null,null,null],[-3736,-5698,2,1.2,null,null,null],[-3978,-7517,3,.9,.1,null,null],[-3956,-5572,4,1,null,null,null],[-4103,-5400,1,1,null,null,null],[-4281,-5240,2,1,null,null,null],[-4409,-5034,3,1,null,null,null],[-4475,-4808,4,.9,null,null,null],[-2777,-7546,3,1,.8,null,null],[-2542,-7502,2,.9,.4,null,null],[-2398,-7364,1,.9,-.7,null,null],[-2350,-7151,2,.9,-.4,null,null],[-2315,-6976,4,.8,-.8,null,null],[-3749,-7488,4,1,null,null,null],[-2995,-7596,2,1.2,.5,null,null],[-3253,-7558,3,1.1,.3,null,null],[-3468,-7472,4,1,null,null,null],[-5028,-6473,2,1,.4,null,null],[-3604,-7301,1,1.1,null,null,null],[-3678,-7078,2,1.1,null,null,null],[-3835,-6826,3,1.1,null,null,null],[-3935,-6595,2,1,null,null,null],[-5214,-7381,3,1,null,null,null],[-4065,-6416,3,1.1,null,null,null],[-4174,-6231,4,.7,null,null,null],[-4556,-6940,3,1,null,null,null],[-4663,-6781,4,1,null,null,null],[-4748,-6548,2,1.3,null,null,null],[-4847,-6257,2,1.1,-.4,null,null],[-4806,-6016,4,.9,1.2,null,null],[-4950,-7410,1,1.4,.2,null,null],[-5470,-7251,4,1.3,-.2,null,null],[-5637,-7038,2,1,-.3,null,null],[-5593,-6819,4,1,null,null,null],[-5406,-6727,3,1,.6,null,null],[-5263,-6580,1,1,.4,null,null],[-4636,-7476,2,1,.2,null,null],[-4399,-7496,2,.9,-.2,null,null],[-6769,-7571,2,.9,-.4,null,null],[-6853,-7377,1,.9,null,null,null],[-8273,-7231,4,.5,.4,null,null],[-4182,-7512,4,.9,.1,null,null],[-7525,-5855,2,.9,null,null,null],[-7495,-6329,3,.5,null,null,null],[-7297,-6946,2,.9,null,null,null],[-8148,-7137,1,.7,null,null,null],[-7030,-7301,4,.7,null,null,null]],walls:[[1009,-2308,108],[1241,-2490,60],[1157,-2379,84],[622,-2126,48],[669,-2187,72],[-392,-1669,132],[-273,-1746,60],[-252,-1504,120],[1553,-2016,48],[1637,-1972,60],[1736,-1922,60],[2150,-2406,72],[2238,-2318,108],[2364,-2391,72],[2491,-2682,72],[2596,-2671,108],[-150,-3147,48],[-155,-3044,84],[-427,-3600,48],[-259,-2982,60],[-379,-3529,72],[-665,-3052,60],[20,-1816,60],[127,-1799,60],[263,-2572,48],[405,-2570,108],[851,-4183,120],[754,-3971,108],[1757,-5065,132],[1169,-4453,108],[2054,-5244,108],[1631,-4901,108],[2305,-5281,108],[1007,-4281,96],[2766,-5202,96],[2927,-5204,84],[3206,-5218,36],[3099,-5193,72],[1417,-4726,120],[2844,-1513,60],[3206,-1464,120],[2881,-1403,108],[3804,-2025,84],[4116,-1778,108],[3715,-1508,72],[4247,-1126,72],[3860,268,60],[4334,-1011,132],[3849,349,72],[3956,490,96],[4073,667,108],[3583,-864,96],[4135,836,120],[4785,-743,120],[4993,-839,108],[5224,-482,84],[5235,-1238,132],[5419,-1346,72],[6075,-5099,96],[5767,-4953,108],[5896,-4967,108],[5384,-4642,108],[5704,-4857,108],[5563,-4697,108],[5406,-4470,132],[5352,-3964,108],[5309,-3665,132],[5247,-3464,108],[5300,-3121,108],[3524,-3340,132],[3661,-3589,108],[7236,-1376,72],[7624,-1610,96],[7403,-1555,84],[7514,-1568,108],[3660,-2705,108],[3374,-2813,96],[7347,-1447,108],[7236,-775,60],[7207,-631,108],[7303,-468,108],[7262,-1263,108],[7404,-350,120],[7589,-305,108],[7741,-1589,120],[7949,-1594,120],[8152,-1599,132],[8378,-1602,144],[7873,-321,72],[8543,-1661,84],[7790,-259,120],[8675,-1573,120],[8163,-245,84],[8329,-311,84],[8275,-229,120],[8447,-277,120],[8824,-1447,108],[7221,-1140,60],[8924,-1273,108],[6844,-950,120],[8949,-1060,132],[8904,-920,96],[8582,-338,84],[8963,-803,120],[8680,-322,108],[8811,-449,108],[8910,-610,108],[6855,114,96],[6971,241,120],[6852,656,60],[6980,706,108],[6946,939,120],[6027,-560,72],[7521,425,48],[7599,389,60],[5863,-431,108],[9392,262,108],[7521,512,72],[9807,1027,60],[9554,237,120],[9346,392,144],[9789,1142,84],[9747,-532,96],[8591,347,72],[9951,-509,120],[9308,2417,60],[10185,-522,108],[10330,2147,72],[9350,2480,84],[10503,2124,108],[12500,2628,60],[13188,2864,60],[12637,2659,84],[13262,2899,60],[13777,5168,60],[15709,6399,48],[13539,5664,60],[15660,6474,48],[13743,5248,84],[15482,6600,48],[15591,6525,36],[13487,5738,84],[15407,6702,72],[8171,-2568,60],[16001,6015,72],[16017,6110,48],[6496,-1491,60],[6626,-1480,84],[6190,-1022,96],[8325,-2615,120],[8222,-2412,120],[9204,-2288,108],[9279,-2216,120],[10375,-1558,96],[10309,-1421,108],[10247,-1216,144],[10079,-2310,108],[10320,-2330,120],[10942,-2963,108],[10807,-2778,132],[12989,-1929,72],[12613,-1181,48],[12559,-1120,60],[11642,-1900,84],[11558,-1692,108],[11509,-1479,60],[12559,-2673,96],[12446,-2487,120],[12375,-2303,108],[10363,-3514,84],[10290,-3340,108],[10162,-3207,84],[9003,-3048,108],[9161,-3119,72],[14550,-3462,108],[14407,-3335,108],[14366,-4493,108],[14477,-4437,120],[15305,-4230,108],[15481,-4283,108],[15349,-5009,48],[11874,-4879,72],[15453,-4984,84],[11907,-4742,96],[12440,-4278,60],[11980,-4582,108],[12131,-4387,132],[15681,-4973,120],[12591,-4252,96],[12777,-4244,108],[12969,-4227,108],[15897,-5071,108],[13204,-4228,120],[11592,-5261,84],[12743,-4826,48],[10102,-5078,84],[12854,-4782,108],[10191,-5033,84],[10523,-5133,120],[10336,-4977,132],[10667,-5250,96],[9665,-6403,84],[10798,-5379,60],[9670,-5547,108],[9834,-6369,120],[9864,-5572,132],[11362,-3957,108],[11162,-3830,120],[8922,-6173,120],[9003,-5368,60],[8453,-6153,72],[8954,-5229,108],[8905,-5072,96],[8704,-3873,108],[8578,-6105,96],[8508,-3710,84],[8614,-5400,60],[8788,-4922,132],[8936,-3905,72],[9701,-4613,108],[6973,-4776,72],[7016,-4674,108],[9124,-3853,108],[7253,-4648,96],[6602,-4591,72],[8510,-5322,108],[6687,-3810,84],[9525,-4492,132],[7461,-4705,108],[9280,-3812,96],[6467,-2811,36],[6842,-3820,96],[6483,-2725,72],[7675,-4864,132],[6991,-2885,108],[6610,-2664,108],[6822,-2736,108],[6763,-4582,108],[6509,-2490,108],[7216,-3865,132],[7018,-3708,120],[2254,-3301,96],[6378,-2310,96],[7197,-2857,108],[2609,-3483,60],[2449,-3385,108],[4585,-2889,84],[4470,-2768,96],[4083,-4033,108],[1568,-2869,48],[4336,-4105,144],[1977,-1678,60],[1412,-3642,60],[1570,-2792,72],[1932,-1586,72],[1310,-3547,72],[3611,1391,120],[3558,2174,108],[3431,1563,108],[3142,2813,84],[3330,2296,132],[3001,2818,72],[3703,2044,48],[2872,3863,108],[3125,2942,132],[2841,4018,132],[2402,5140,72],[2511,5167,96],[-14607,-5112,108],[-14430,-5180,108],[-14197,-5222,144],[-14895,-4703,60],[-14797,-4728,48],[-14697,-4739,48],[-13919,-5281,132],[-13646,-5170,84],[-13400,-5068,144],[-13099,-5108,132],[-12824,-5092,108],[-12631,-5044,108],[-12427,-4914,108],[-12270,-4816,84],[-11772,-4983,84],[-11940,-4867,108],[-12091,-4699,108],[-12270,-4529,84],[-12460,-4396,108],[-13058,-4252,108],[-12894,-4096,84],[-12738,-4077,84],[-13546,-4341,48],[-13428,-4299,108],[-14679,-4192,84],[-14368,-4308,84],[-14495,-4133,132],[-12072,-3824,96],[-11904,-3648,120],[-11654,-3569,84],[-11648,-3357,108],[-11420,-3359,108],[-11296,-3135,84],[-10782,-2838,96],[-11410,-3039,36],[-10581,-2773,132],[-11118,-5114,96],[-10675,-5079,108],[-10205,-4890,96],[-11543,-4164,96],[-11287,-4244,60],[-10018,-4747,120],[-9278,419,60],[-9341,470,60],[-9180,496,96],[-11365,-4131,120],[-9353,0,72],[-8975,528,120],[-9413,89,108],[-8230,770,48],[-9231,17,84],[-6808,1667,60],[-6694,1622,96],[-8285,855,72],[-6793,1796,96],[-6865,1935,60],[-7043,2222,72],[-7083,2368,72],[-7103,2533,84],[-7099,2721,96],[-7178,2874,48],[-6964,3110,84],[-6246,4191,72],[-6735,3446,48],[-6722,3537,84],[-6396,3388,108],[-6787,3140,108],[-6227,4488,84],[-6281,3953,72],[-6530,3576,132],[-6147,3994,132],[-6141,4292,144],[-6377,5578,84],[-6152,4569,108],[-6222,4769,84],[-6266,4956,72],[-6233,5414,108],[-6347,5646,84],[-6400,6066,84],[-6411,6261,96],[-6565,7043,72],[-6377,6415,108],[-6440,6614,84],[-5944,1954,60],[-6001,2039,96],[-6467,7070,108],[-4963,3608,72],[-4776,3510,48],[-5785,1998,132],[-3708,3449,72],[-3790,3582,108],[-4031,3697,84],[-4859,3634,120],[-3850,3730,120],[-4689,4605,108],[-3492,2892,72],[-4507,4483,72],[-4829,2745,108],[-4435,4273,108],[-3383,2930,108],[-4888,2821,108],[-5372,5172,60],[-5036,2981,108],[-9895,-1942,120],[-9371,-2159,72],[-9995,-1773,108],[-5280,5218,108],[-5079,5183,108],[-5149,3079,72],[-9695,-2048,120],[-5063,5374,108],[-9504,-2059,120],[-8948,-2140,84],[-9262,-2081,132],[-9068,-2071,120],[-8861,-2045,132],[-8654,-2083,120],[-8473,-2048,120],[-8283,-1965,120],[-8182,-1863,108],[-10037,-1579,108],[-10063,-1365,108],[-10074,-1190,108],[-8167,-1225,60],[-8188,-1087,96],[-9975,-1022,108],[-9835,-910,120],[-9709,-848,120],[-9532,-792,120],[-9348,-779,120],[-9131,-784,132],[-8754,-795,84],[-8587,-797,120],[-8424,-856,108],[-8246,-921,108],[-8153,-1701,84],[-6447,-2137,72],[-8153,-1591,60],[-7694,-1393,120],[-6541,-2030,84],[-7135,-1547,84],[-5885,-2958,72],[-7171,-1440,96],[-5620,-3123,72],[-6631,-1866,96],[-5882,-3696,96],[-5716,-2944,108],[-5949,-3528,60],[-6869,-4052,96],[-7081,-2673,60],[-6725,-4069,72],[-10487,-2295,60],[-7032,-2749,72],[-10769,-3817,72],[-6607,-4081,60],[-10849,-1824,84],[-10479,-2146,108],[-7003,-2611,108],[-10749,-1511,72],[-10697,-1953,120],[-10848,-1330,108],[-10912,-1220,60],[-9843,-2685,84],[-10823,-3717,84],[-9697,-2713,72],[-10080,-3431,48],[-10648,-3844,108],[-9530,-2695,120],[-2387,-6791,108],[-8465,-5037,84],[-2550,-6627,108],[-9325,-2822,84],[-10140,-3346,96],[-8461,-4908,108],[8116,-1076,96],[8115,-940,96],[-2503,-6359,168],[-9062,-1580,96],[8120,-790,96],[-9065,-1444,96],[-2615,-6159,120],[-2744,-5943,132],[-3713,-4955,108],[-9061,-1292,96],[-1551,-4718,60],[5251,-6249,60],[5192,-6181,48],[-2898,-5732,108],[-1705,-4629,96],[1618,-7035,60],[-3829,-4776,108],[-2851,-5589,132],[-2974,-5399,132],[-3952,-4568,108],[-4135,-4368,132],[-3428,-5104,132],[-3167,-5254,108],[-3049,-6916,120],[-3097,-6722,108],[-3190,-6493,120],[-3318,-6284,132],[-4672,-5861,132],[-4480,-5668,120],[-4294,-5548,108],[-3433,-6072,120],[-3568,-5881,120],[-3736,-5698,144],[-3978,-7517,108],[-3956,-5572,120],[-4103,-5400,120],[-4281,-5240,120],[-4409,-5034,120],[-4475,-4808,108],[-2777,-7546,120],[-2542,-7502,108],[-2398,-7364,108],[-2350,-7151,108],[-2315,-6976,96],[-3749,-7488,120],[-2995,-7596,144],[-3253,-7558,132],[-3468,-7472,120],[-5028,-6473,120],[-3604,-7301,132],[-3678,-7078,132],[-3835,-6826,132],[-3935,-6595,120],[-5214,-7381,120],[-4065,-6416,132],[-4174,-6231,84],[-4556,-6940,120],[-4663,-6781,120],[-4748,-6548,156],[-4847,-6257,132],[-4806,-6016,108],[-4950,-7410,168],[-5470,-7251,156],[-5637,-7038,120],[-5593,-6819,120],[-5406,-6727,120],[-5263,-6580,120],[-4636,-7476,120],[-4399,-7496,108],[-6769,-7571,108],[-6853,-7377,108],[-8273,-7231,60],[-4182,-7512,108],[-7525,-5855,108],[-7495,-6329,60],[-7297,-6946,108],[-8148,-7137,84],[-7030,-7301,84]],groundDoodads:[[-9670,-1470,"doodadField",.5,0,null,null],[8600,-940,"doodadField",.5,0,null,null],[920,-2800,"doodadField",.5,0,null,null]],debug:{show:!0,collisions:!1},mobile:!1,ios:!1,phone:!1,tablet:!1,mouse:!1,resolution:1,overdrawOptimize:!0,overdraw:256,scalingFactor:2500,altScalingFactor:4e3,minimapPaddingX:16,minimapPaddingY:16,minimapSize:240,maxChatLines:50,maxScoreboard:12,shadowScaling:2,shadowOffsetX:20,shadowOffsetY:40,ackFrequency:10,bucketSize:512,mapWidth:32768,mapHeight:16384},window.Tools={},window.Textures={},window.Graphics={},window.Network={},window.Input={},window.Players={},window.Mobs={},window.Particles={},window.UI={},window.Games={},window.Sound={};var r,i=function(e,t){Tools.updateTime(e),Tools.debugStartFrame(),game.state==Network.STATE.PLAYING?(Input.update(),Network.detectConnectivity(),Players.update(),Mobs.update(),Particles.update(),Games.update(),Sound.update()):game.state==Network.STATE.LOGIN?Tools.updateReel():Sound.update(),Graphics.update(),t||Graphics.render(),Tools.debugEndFrame()},o=function(){var e=performance.now()-game.time;e>450&&!game.focus&&i(e/16.666,!0)};e((function(){game.state=Network.STATE.LOGIN,Tools.startupMsg(),Tools.loadSettings(),Tools.detectCapabilities(),Tools.setupDebug(),Graphics.setup(),Tools.initBuckets(),Particles.setup(),UI.setup(),Input.setup(),Games.setup(),Sound.setup();var e=new t.ticker.Ticker;e.add(i),e.start(),setInterval(o,500);DEVELOPMENT&&window.location.hash.startsWith("#connect#")&&(game.playRegion="custom",game.playRoom="custom",game.playInvited=!0,game.myOriginalName=config.settings.name||Tools.randomID(6),game.customServerUrl=window.location.hash.substr("#connect#".length),Games.start(game.myOriginalName,!0))})),setInterval((function(){r!==game.server.id&&game.state===Network.STATE.PLAYING&&game.server.config&&game.server.config.sf&&config.scalingFactor>game.server.config.sf&&(console.log(`%c⚠️ The maximum scalingFactor on this server (${game.server.id}) is ${game.server.config.sf}.\nThis is enforced by the server. Objects past the horizon limit will not be visible.`,"color:red"),r=game.server.id)}),100)}).call(this,n(10),n(13))},function(e,t,n){"use strict";n(103),n(105),n(106),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(e,t,n){"use strict";var r,i=n(104),o=(r=i)&&r.__esModule?r:{default:r};Object.assign||(Object.assign=o.default)},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,l=s(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(l[c]=n[c]);if(r){a=r(n);for(var h=0;h<a.length;h++)o.call(n,a[h])&&(l[a[h]]=n[a[h]])}}return l}},function(e,t,n){"use strict";(function(e){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!e.performance||!e.performance.now){var t=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-t}}for(var n=Date.now(),r=["ms","moz","webkit","o"],i=0;i<r.length&&!e.requestAnimationFrame;++i){var o=r[i];e.requestAnimationFrame=e[o+"RequestAnimationFrame"],e.cancelAnimationFrame=e[o+"CancelAnimationFrame"]||e[o+"CancelRequestAnimationFrame"]}e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),r=16+n-t;return r<0&&(r=0),n=t,setTimeout((function(){n=Date.now(),e(performance.now())}),r)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){return clearTimeout(e)})}).call(this,n(24))},function(e,t,n){"use strict";Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1})},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(31),o=(r=i)&&r.__esModule?r:{default:r},s=n(2);var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.radius=r,this.type=s.SHAPES.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-e,i=this.y-t;return(r*=r)+(i*=i)<=n},e.prototype.getBounds=function(){return new o.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(31),o=(r=i)&&r.__esModule?r:{default:r},s=n(2);var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.type=s.SHAPES.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return(n*=n)+(r*=r)<=1},e.prototype.getBounds=function(){return new o.default(this.x-this.width,this.y-this.height,this.width,this.height)},e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(29),o=(r=i)&&r.__esModule?r:{default:r},s=n(2);var a=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Array.isArray(n[0])&&(n=n[0]),n[0]instanceof o.default){for(var i=[],a=0,l=n.length;a<l;a++)i.push(n[a].x,n[a].y);n=i}this.closed=!0,this.points=n,this.type=s.SHAPES.POLY}return e.prototype.clone=function(){return new e(this.points.slice())},e.prototype.close=function(){var e=this.points;e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1])},e.prototype.contains=function(e,t){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var s=this.points[2*i],a=this.points[2*i+1],l=this.points[2*o],u=this.points[2*o+1];a>t!=u>t&&e<(t-a)/(u-a)*(l-s)+s&&(n=!n)}return n},e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r=n(2);var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.width=i,this.height=o,this.radius=s,this.type=r.SHAPES.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var n=e-(this.x+this.radius),r=t-(this.y+this.radius),i=this.radius*this.radius;if(n*n+r*r<=i)return!0;if((n=e-(this.x+this.width-this.radius))*n+r*r<=i)return!0;if(n*n+(r=t-(this.y+this.height-this.radius))*r<=i)return!0;if((n=e-(this.x+this.radius))*n+r*r<=i)return!0}return!1},e}();t.default=i},function(e,t){e.exports=function(e,t){var n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!n)throw new Error("This browser does not support webGL. Try using the canvas renderer");return n}},function(e,t){var n=new ArrayBuffer(0),r=function(e,t,r,i){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=i||e.STATIC_DRAW,this.data=n,r&&this.upload(r),this._updateID=0};r.prototype.upload=function(e,t,n){n||this.bind();var r=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?r.bufferSubData(this.type,t,e):r.bufferData(this.type,e,this.drawType),this.data=e},r.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(e,t,n){return new r(e,e.ARRAY_BUFFER,t,n)},r.createIndexBuffer=function(e,t,n){return new r(e,e.ELEMENT_ARRAY_BUFFER,t,n)},r.create=function(e,t,n,i){return new r(e,t,n,i)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=r},function(e,t,n){var r=n(50),i=function(e,t,n){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=n||100};i.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new r(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(e,t,n,r){this.bind();var i=this.gl;i.clearColor(e,t,n,r),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},i.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},i.prototype.resize=function(e,t){var n=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,this.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,t))},i.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(e,t,n,o){var s=r.fromData(e,null,t,n);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(e,t,n);return a.enableTexture(s),a.unbind(),a},i.createFloat32=function(e,t,n,o){var s=new r.fromData(e,o,t,n);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(e,t,n);return a.enableTexture(s),a.unbind(),a},e.exports=i},function(e,t,n){var r=n(51),i=n(52),o=n(54),s=n(56),a=n(57),l=function(e,t,n,l,u){this.gl=e,l&&(t=s(t,l),n=s(n,l)),this.program=r(e,t,n,u),this.attributes=i(e,this.program),this.uniformData=o(e,this.program),this.uniforms=a(e,this.uniformData)};l.prototype.bind=function(){return this.gl.useProgram(this.program),this},l.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=l},function(e,t,n){var r=n(49);function i(e,t){if(this.nativeVaoExtension=null,i.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var n=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(n),attribState:new Array(n)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}i.prototype.constructor=i,e.exports=i,i.FORCE_NATIVE=!1,i.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},i.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},i.prototype.activate=function(){for(var e=this.gl,t=null,n=0;n<this.attributes.length;n++){var i=this.attributes[n];t!==i.buffer&&(i.buffer.bind(),t=i.buffer),e.vertexAttribPointer(i.attribute.location,i.attribute.size,i.type||e.FLOAT,i.normalized||!1,i.stride||0,i.start||0)}return r(e,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},i.prototype.addAttribute=function(e,t,n,r,i,o){return this.attributes.push({buffer:e,attribute:t,location:t.location,type:n||this.gl.FLOAT,normalized:r||!1,stride:i||0,start:o||0}),this.dirty=!0,this},i.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},i.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},i.prototype.draw=function(e,t,n){var r=this.gl;return this.indexBuffer?r.drawElements(e,t||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(n||0)):r.drawArrays(e,n,t||this.getSize()),this},i.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},i.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}},function(e,t,n){e.exports={compileProgram:n(51),defaultValue:n(55),extractAttributes:n(52),extractUniforms:n(54),generateUniformAccessObject:n(57),setPrecision:n(56),mapSize:n(53),mapType:n(32)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){if(o.default.tablet||o.default.phone)return 4;return e};var r,i=n(34),o=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},function(e,t,n){"use strict";t.__esModule=!0,t.default={mixin:function(e){!function(e){e.__plugins={},e.registerPlugin=function(t,n){e.__plugins[t]=n},e.prototype.initPlugins=function(){for(var t in this.plugins=this.plugins||{},e.__plugins)this.plugins[t]=new e.__plugins[t](this)},e.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}(e)}}},function(e,t,n){"use strict";function r(e,t){if(e&&t)for(var n=Object.keys(t),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}}t.__esModule=!0,t.mixin=r,t.delayMixin=function(e,t){i.push(e,t)},t.performMixins=function(){for(var e=0;e<i.length;e+=2)r(i[e],i[e+1]);i.length=0};var i=[]},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var o=i-(n=t+n>i?i-t:n);for(r=t;r<o;++r)e[r]=e[r+n];e.length=o}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){for(var e=[],t=[],n=0;n<32;n++)e[n]=n,t[n]=n;e[r.BLEND_MODES.NORMAL_NPM]=r.BLEND_MODES.NORMAL,e[r.BLEND_MODES.ADD_NPM]=r.BLEND_MODES.ADD,e[r.BLEND_MODES.SCREEN_NPM]=r.BLEND_MODES.SCREEN,t[r.BLEND_MODES.NORMAL]=r.BLEND_MODES.NORMAL_NPM,t[r.BLEND_MODES.ADD]=r.BLEND_MODES.ADD_NPM,t[r.BLEND_MODES.SCREEN]=r.BLEND_MODES.SCREEN_NPM;var i=[];return i.push(t),i.push(e),i};var r=n(2)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===e.indexOf("data:"))return"";t=t||window.location,s||(s=document.createElement("a"));s.href=e;var n=!(e=o.default.parse(s.href)).port&&""===t.port||e.port===t.port;if(e.hostname!==t.hostname||!n||e.protocol!==t.protocol)return"anonymous";return""};var r,i=n(61),o=(r=i)&&r.__esModule?r:{default:r};var s=void 0},function(e,t,n){(function(e,r){var i;!function(o){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,l=2147483647,u=36,c=1,h=26,d=38,p=700,f=72,g=128,m="-",v=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=u-c,x=Math.floor,w=String.fromCharCode;function E(e){throw new RangeError(_[e])}function S(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function M(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+S((e=e.replace(b,".")).split("."),t).join(".")}function I(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function P(e){return S(e,(function(e){var t="";return e>65535&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=w(e)})).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,n){var r=0;for(e=n?x(e/p):e>>1,e+=x(e/t);e>T*h>>1;r+=u)e=x(e/T);return x(r+(T+1)*e/(e+d))}function C(e){var t,n,r,i,o,s,a,d,p,v,y,b=[],_=e.length,T=0,w=g,S=f;for((n=e.lastIndexOf(m))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&E("not-basic"),b.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<_;){for(o=T,s=1,a=u;i>=_&&E("invalid-input"),((d=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:u)>=u||d>x((l-T)/s))&&E("overflow"),T+=d*s,!(d<(p=a<=S?c:a>=S+h?h:a-S));a+=u)s>x(l/(v=u-p))&&E("overflow"),s*=v;S=O(T-o,t=b.length+1,0==o),x(T/t)>l-w&&E("overflow"),w+=x(T/t),T%=t,b.splice(T++,0,w)}return P(b)}function R(e){var t,n,r,i,o,s,a,d,p,v,y,b,_,T,S,M=[];for(b=(e=I(e)).length,t=g,n=0,o=f,s=0;s<b;++s)(y=e[s])<128&&M.push(w(y));for(r=i=M.length,i&&M.push(m);r<b;){for(a=l,s=0;s<b;++s)(y=e[s])>=t&&y<a&&(a=y);for(a-t>x((l-n)/(_=r+1))&&E("overflow"),n+=(a-t)*_,t=a,s=0;s<b;++s)if((y=e[s])<t&&++n>l&&E("overflow"),y==t){for(d=n,p=u;!(d<(v=p<=o?c:p>=o+h?h:p-o));p+=u)S=d-v,T=u-v,M.push(w(A(v+S%T,0))),d=x(S/T);M.push(w(A(d,0))),o=O(n,_,r==i),n=0,++r}++n,++t}return M.join("")}a={version:"1.4.1",ucs2:{decode:I,encode:P},decode:C,encode:R,toASCII:function(e){return M(e,(function(e){return y.test(e)?"xn--"+R(e):e}))},toUnicode:function(e){return M(e,(function(e){return v.test(e)?C(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(125)(e),n(24))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(128),t.encode=t.stringify=n(129)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var h,d,p,f,g=e[c].replace(a,"%20"),m=g.indexOf(n);m>=0?(h=g.substr(0,m),d=g.substr(m+1)):(h=g,d=""),p=decodeURIComponent(h),f=decodeURIComponent(d),r(s,p)?i(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),(function(s){var a=encodeURIComponent(r(s))+n;return i(e[s])?o(e[s],(function(e){return a+encodeURIComponent(r(e))})).join(t):a+encodeURIComponent(r(e[s]))})).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(4)),o=n(2),s=a(n(131));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._head=new s.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/i.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(e,t,n))},e.prototype.addOnce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(e,t,n,!0))},e.prototype._addListener=function(e){var t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var n=this._head.next;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},e.prototype.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){(t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*i.default.TARGET_FPMS*this.speed;for(var n=this._head,r=n.next;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},r(e,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,i.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),e}();t.default=l},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fn=t,this.context=n,this.priority=r,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(e,t){return t=t||null,this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.previous;return this.next=e?null:t,this.previous=null,t},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(19)),i=n(2),o=n(5),s=a(n(40));function a(e){return e&&e.__esModule?e:{default:e}}var l=new o.Matrix,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.render=function(e){var t=e._texture,n=this.renderer,r=t._frame.width,a=t._frame.height,u=e.transform.worldTransform,c=0,h=0;if(!(t.orig.width<=0||t.orig.height<=0)&&t.baseTexture.source&&(n.setBlendMode(e.blendMode),t.valid)){n.context.globalAlpha=e.worldAlpha;var d=t.baseTexture.scaleMode===i.SCALE_MODES.LINEAR;n.smoothProperty&&n.context[n.smoothProperty]!==d&&(n.context[n.smoothProperty]=d),t.trim?(c=t.trim.width/2+t.trim.x-e.anchor.x*t.orig.width,h=t.trim.height/2+t.trim.y-e.anchor.y*t.orig.height):(c=(.5-e.anchor.x)*t.orig.width,h=(.5-e.anchor.y)*t.orig.height),t.rotate&&(u.copy(l),u=l,o.GroupD8.matrixAppendRotationInv(u,t.rotate,c,h),c=0,h=0),c-=r/2,h-=a/2,n.roundPixels?(n.context.setTransform(u.a,u.b,u.c,u.d,u.tx*n.resolution|0,u.ty*n.resolution|0),c|=0,h|=0):n.context.setTransform(u.a,u.b,u.c,u.d,u.tx*n.resolution,u.ty*n.resolution);var p=t.baseTexture.resolution;16777215!==e.tint?(e.cachedTint===e.tint&&e.tintedTexture.tintId===e._texture._updateID||(e.cachedTint=e.tint,e.tintedTexture=s.default.getTintedTexture(e,e.tint)),n.context.drawImage(e.tintedTexture,0,0,r*p,a*p,c*n.resolution,h*n.resolution,r*n.resolution,a*n.resolution)):n.context.drawImage(t.baseTexture.source,t._frame.x*p,t._frame.y*p,r*p,a*p,c*n.resolution,h*n.resolution,r*n.resolution,a*n.resolution)}},e.prototype.destroy=function(){this.renderer=null},e}();t.default=u,r.default.registerPlugin("sprite",u)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(2);var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.pushMask=function(e){var t=this.renderer;t.context.save();var n=e.alpha,r=e.transform.worldTransform,i=t.resolution;t.context.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),e._texture||(this.renderGraphicsShape(e),t.context.clip()),e.worldAlpha=n},e.prototype.renderGraphicsShape=function(e){var t=this.renderer.context,n=e.graphicsData.length;if(0!==n){t.beginPath();for(var i=0;i<n;i++){var o=e.graphicsData[i],s=o.shape;if(o.type===r.SHAPES.POLY){var a=s.points;t.moveTo(a[0],a[1]);for(var l=1;l<a.length/2;l++)t.lineTo(a[2*l],a[2*l+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&t.closePath()}else if(o.type===r.SHAPES.RECT)t.rect(s.x,s.y,s.width,s.height),t.closePath();else if(o.type===r.SHAPES.CIRC)t.arc(s.x,s.y,s.radius,0,2*Math.PI),t.closePath();else if(o.type===r.SHAPES.ELIP){var u=2*s.width,c=2*s.height,h=s.x-u/2,d=s.y-c/2,p=u/2*.5522848,f=c/2*.5522848,g=h+u,m=d+c,v=h+u/2,y=d+c/2;t.moveTo(h,y),t.bezierCurveTo(h,y-f,v-p,d,v,d),t.bezierCurveTo(v+p,d,g,y-f,g,y),t.bezierCurveTo(g,y+f,v+p,m,v,m),t.bezierCurveTo(v-p,m,h,y+f,h,y),t.closePath()}else if(o.type===r.SHAPES.RREC){var b=s.x,_=s.y,T=s.width,x=s.height,w=s.radius,E=Math.min(T,x)/2|0;w=w>E?E:w,t.moveTo(b,_+w),t.lineTo(b,_+x-w),t.quadraticCurveTo(b,_+x,b+w,_+x),t.lineTo(b+T-w,_+x),t.quadraticCurveTo(b+T,_+x,b+T,_+x-w),t.lineTo(b+T,_+w),t.quadraticCurveTo(b+T,_,b+T-w,_),t.lineTo(b+w,_),t.quadraticCurveTo(b,_,b,_+w),t.closePath()}}}},e.prototype.popMask=function(e){e.context.restore(),e.invalidateBlendMode()},e.prototype.destroy=function(){},e}();t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,s.default)()?(e[i.BLEND_MODES.NORMAL]="source-over",e[i.BLEND_MODES.ADD]="lighter",e[i.BLEND_MODES.MULTIPLY]="multiply",e[i.BLEND_MODES.SCREEN]="screen",e[i.BLEND_MODES.OVERLAY]="overlay",e[i.BLEND_MODES.DARKEN]="darken",e[i.BLEND_MODES.LIGHTEN]="lighten",e[i.BLEND_MODES.COLOR_DODGE]="color-dodge",e[i.BLEND_MODES.COLOR_BURN]="color-burn",e[i.BLEND_MODES.HARD_LIGHT]="hard-light",e[i.BLEND_MODES.SOFT_LIGHT]="soft-light",e[i.BLEND_MODES.DIFFERENCE]="difference",e[i.BLEND_MODES.EXCLUSION]="exclusion",e[i.BLEND_MODES.HUE]="hue",e[i.BLEND_MODES.SATURATION]="saturate",e[i.BLEND_MODES.COLOR]="color",e[i.BLEND_MODES.LUMINOSITY]="luminosity"):(e[i.BLEND_MODES.NORMAL]="source-over",e[i.BLEND_MODES.ADD]="lighter",e[i.BLEND_MODES.MULTIPLY]="source-over",e[i.BLEND_MODES.SCREEN]="source-over",e[i.BLEND_MODES.OVERLAY]="source-over",e[i.BLEND_MODES.DARKEN]="source-over",e[i.BLEND_MODES.LIGHTEN]="source-over",e[i.BLEND_MODES.COLOR_DODGE]="source-over",e[i.BLEND_MODES.COLOR_BURN]="source-over",e[i.BLEND_MODES.HARD_LIGHT]="source-over",e[i.BLEND_MODES.SOFT_LIGHT]="source-over",e[i.BLEND_MODES.DIFFERENCE]="source-over",e[i.BLEND_MODES.EXCLUSION]="source-over",e[i.BLEND_MODES.HUE]="source-over",e[i.BLEND_MODES.SATURATION]="source-over",e[i.BLEND_MODES.COLOR]="source-over",e[i.BLEND_MODES.LUMINOSITY]="source-over");return e[i.BLEND_MODES.NORMAL_NPM]=e[i.BLEND_MODES.NORMAL],e[i.BLEND_MODES.ADD_NPM]=e[i.BLEND_MODES.ADD],e[i.BLEND_MODES.SCREEN_NPM]=e[i.BLEND_MODES.SCREEN],e};var r,i=n(2),o=n(67),s=(r=o)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";t.__esModule=!0;var r=p(n(25)),i=p(n(26)),o=p(n(41)),s=p(n(148)),a=p(n(149)),l=p(n(150)),u=p(n(4)),c=n(3),h=p(n(7)),d=p(n(37));function p(e){return e&&e.__esModule?e:{default:e}}var f=0,g=0,m=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=u.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var i=1;i<=d.default.nextPow2(r.size);i*=2)r.buffers.push(new l.default(4*i*r.vertByteSize));r.indices=(0,o.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var s=0;s<r.size;s++)r.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,a.default)(this.MAX_TEXTURES,e)),this.shader=(0,s.default)(e,this.MAX_TEXTURES),this.indexBuffer=h.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,n=0;n<this.vaoMax;n++){var r=this.vertexBuffers[n]=h.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(r,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&i.addAttribute(r,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[n]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},t.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,t=this.MAX_TEXTURES,n=d.default.nextPow2(this.currentIndex),r=d.default.log2(n),i=this.buffers[r],o=this.sprites,s=this.groups,a=i.float32View,l=i.uint32View,p=this.boundTextures,m=this.renderer.boundTextures,v=this.renderer.textureGC.count,y=0,b=void 0,_=void 0,T=1,x=0,w=s[0],E=void 0,S=void 0,M=c.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];w.textureCount=0,w.start=0,w.blend=M,f++;var I=void 0;for(I=0;I<t;++I)p[I]=m[I],p[I]._virtalBoundId=I;for(I=0;I<this.currentIndex;++I){var P=o[I];b=P._texture.baseTexture;var A=c.premultiplyBlendMode[Number(b.premultipliedAlpha)][P.blendMode];if(M!==A&&(M=A,_=null,x=t,f++),_!==b&&(_=b,b._enabled!==f)){if(x===t&&(f++,w.size=I-w.start,x=0,(w=s[T++]).blend=M,w.textureCount=0,w.start=I),b.touched=v,-1===b._virtalBoundId)for(var O=0;O<t;++O){var C=(O+g)%t,R=p[C];if(R._enabled!==f){g++,R._virtalBoundId=-1,b._virtalBoundId=C,p[C]=b;break}}b._enabled=f,w.textureCount++,w.ids[x]=b._virtalBoundId,w.textures[x++]=b}if(E=P.vertexData,S=P._texture._uvs.uvsUint32,this.renderer.roundPixels){var k=this.renderer.resolution;a[y]=(E[0]*k|0)/k,a[y+1]=(E[1]*k|0)/k,a[y+5]=(E[2]*k|0)/k,a[y+6]=(E[3]*k|0)/k,a[y+10]=(E[4]*k|0)/k,a[y+11]=(E[5]*k|0)/k,a[y+15]=(E[6]*k|0)/k,a[y+16]=(E[7]*k|0)/k}else a[y]=E[0],a[y+1]=E[1],a[y+5]=E[2],a[y+6]=E[3],a[y+10]=E[4],a[y+11]=E[5],a[y+15]=E[6],a[y+16]=E[7];l[y+2]=S[0],l[y+7]=S[1],l[y+12]=S[2],l[y+17]=S[3];var D=Math.min(P.worldAlpha,1),L=D<1&&b.premultipliedAlpha?(0,c.premultiplyTint)(P._tintRGB,D):P._tintRGB+(255*D<<24);l[y+3]=l[y+8]=l[y+13]=l[y+18]=L,a[y+4]=a[y+9]=a[y+14]=a[y+19]=b._virtalBoundId,y+=20}if(w.size=I-w.start,u.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var N=this.shader.attributes,U=this.vertexBuffers[this.vertexCount]=h.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),F=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(U,N.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(U,N.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(U,N.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);N.aTextureId&&F.addAttribute(U,N.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=F}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(I=0;I<t;++I)m[I]._virtalBoundId=-1;for(I=0;I<T;++I){for(var B=s[I],G=B.textureCount,j=0;j<G;j++)_=B.textures[j],m[B.ids[j]]!==_&&this.renderer.bindTexture(_,B.ids[j],!0),_._virtalBoundId=-1;this.renderer.state.setBlendMode(B.blend),e.drawElements(e.TRIANGLES,6*B.size,e.UNSIGNED_SHORT,6*B.start*2)}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader),u.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var n=0;n<this.buffers.length;++n)this.buffers[n].destroy()},t}(r.default);t.default=m,i.default.registerPlugin("sprite",m)},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(20)),i=o(n(68));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.pushMask=function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var n=t.worldTransform,r=Math.atan2(n.b,n.a);(r=Math.round(r*(180/Math.PI)))%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)},t.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},t.prototype.pushSpriteMask=function(e,t){var n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new i.default(t)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=t,e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,n),this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(e,t){t.renderable=!0;var n=this.renderer._activeRenderTarget,r=t.getBounds();r.fit(n.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(r.x*i,(n.root?n.size.height-r.y-r.height:r.y)*i,r.width*i,r.height*i),this.scissorRenderTarget=n,this.scissorData=t,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},t}(r.default);t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){var r=s(e),i=s(t);return Object.assign(r,i)};var r,i=n(7);var o=((r=i)&&r.__esModule?r:{default:r}).default.shader.defaultValue;function s(e){for(var t=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),n={},r=void 0,i=e.replace(/\s+/g," ").split(/\s*;\s*/),s=0;s<i.length;s++){var a=i[s].trim();if(a.indexOf("uniform")>-1){var l=a.split(" "),u=l[1],c=l[2],h=1;c.indexOf("[")>-1&&(r=c.split(/\[|]/),c=r[0],h*=Number(r[1])),c.match(t)||(n[c]={value:o(u,h),name:c,type:u})}}return n}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&p())}function p(){if(!c){var e=a(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(20),o=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.stencilMaskStack=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,n=this.stencilMaskStack.length;0===n&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(e),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,n,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),this._useCurrent()},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){o.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(o.default);t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var r=c(n(20)),i=c(n(27)),o=c(n(70)),s=n(5),a=c(n(21)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(141)),u=c(n(37));function c(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function e(){h(this,e),this.renderTarget=null,this.sourceFrame=new s.Rectangle,this.destinationFrame=new s.Rectangle,this.filters=[],this.target=null,this.resolution=1},p=function(e){function t(n){h(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.gl=r.renderer.gl,r.quad=new o.default(r.gl,n.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r.managedFilters=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.pushFilter=function(e,t){var n=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var i=new d;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=n._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[i]},this.filterData=r}var o=r.stack[++r.index];o||(o=r.stack[r.index]=new d);var s=t[0].resolution,a=0|t[0].padding,l=e.filterArea||e.getBounds(!0),u=o.sourceFrame,c=o.destinationFrame;u.x=(l.x*s|0)/s,u.y=(l.y*s|0)/s,u.width=(l.width*s|0)/s,u.height=(l.height*s|0)/s,r.stack[0].renderTarget.transform||t[0].autoFit&&u.fit(r.stack[0].destinationFrame),u.pad(a),c.width=u.width,c.height=u.height;var h=this.getPotRenderTarget(n.gl,u.width,u.height,s);o.target=e,o.filters=t,o.resolution=s,o.renderTarget=h,h.setFrame(c,u),n.bindRenderTarget(h),h.clear()},t.prototype.popFilter=function(){var e=this.filterData,t=e.stack[e.index-1],n=e.stack[e.index];this.quad.map(n.renderTarget.size,n.sourceFrame).upload();var r=n.filters;if(1===r.length)r[0].apply(this,n.renderTarget,t.renderTarget,!1,n),this.freePotRenderTarget(n.renderTarget);else{var i=n.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,n.resolution);o.setFrame(n.destinationFrame,n.sourceFrame),o.clear();var s=0;for(s=0;s<r.length-1;++s){r[s].apply(this,i,o,!0,n);var a=i;i=o,o=a}r[s].apply(this,i,t.renderTarget,!1,n),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}e.index--,0===e.index&&(this.filterData=null)},t.prototype.applyFilter=function(e,t,n,r){var i=this.renderer,o=i.gl,s=e.glShaders[i.CONTEXT_UID];s||(e.glShaderKey?(s=this.shaderCache[e.glShaderKey])||(s=new a.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[i.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=s):s=e.glShaders[i.CONTEXT_UID]=new a.default(this.gl,e.vertexSrc,e.fragmentSrc),this.managedFilters.push(e),i.bindVao(null),this.quad.initVao(s)),i.bindVao(this.quad.vao),i.bindRenderTarget(n),r&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),n===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(s);var l=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=l,this.syncUniforms(s,e),i.state.setBlendMode(e.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,l._glTextures[this.renderer.CONTEXT_UID].texture)},t.prototype.syncUniforms=function(e,t){var n=t.uniformData,r=t.uniforms,i=1,o=void 0;if(e.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=e.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,e.uniforms.filterArea=s}if(e.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=e.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,e.uniforms.filterClamp=a}for(var l in n){var u=n[l].type;if("sampler2d"===u&&0!==r[l]){if(r[l].baseTexture)e.uniforms[l]=this.renderer.bindTexture(r[l].baseTexture,i);else{e.uniforms[l]=i;var c=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],c.activeTexture(c.TEXTURE0+i),r[l].texture.bind()}i++}else if("mat3"===u)void 0!==r[l].a?e.uniforms[l]=r[l].toArray(!0):e.uniforms[l]=r[l];else if("vec2"===u)if(void 0!==r[l].x){var h=e.uniforms[l]||new Float32Array(2);h[0]=r[l].x,h[1]=r[l].y,e.uniforms[l]=h}else e.uniforms[l]=r[l];else"float"===u?e.uniforms.data[l].value!==n[l]&&(e.uniforms[l]=r[l]):e.uniforms[l]=r[l]}},t.prototype.getRenderTarget=function(e,t){var n=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,t||n.resolution);return r.setFrame(n.destinationFrame,n.sourceFrame),r},t.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},t.prototype.calculateScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return l.calculateScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size)},t.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return l.calculateNormalizedScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},t.prototype.calculateSpriteMatrix=function(e,t){var n=this.filterData.stack[this.filterData.index];return l.calculateSpriteMatrix(e,n.sourceFrame,n.renderTarget.size,t)},t.prototype.destroy=function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.renderer,n=this.managedFilters,r=0;r<n.length;r++)e||n[r].glShaders[t.CONTEXT_UID].destroy(),delete n[r].glShaders[t.CONTEXT_UID];this.shaderCache={},e?this.pool={}:this.emptyPool()},t.prototype.getPotRenderTarget=function(e,t,n,r){var o=(65535&(t=u.default.nextPow2(t*r)))<<16|65535&(n=u.default.nextPow2(n*r));this.pool[o]||(this.pool[o]=[]);var s=this.pool[o].pop();if(!s){var a=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),s=new i.default(e,t,n,null,1),e.bindTexture(e.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return s.resolution=r,s.defaultFrame.width=s.size.width=t/r,s.defaultFrame.height=s.size.height=n/r,s},t.prototype.emptyPool=function(){for(var e in this.pool){var t=this.pool[e];if(t)for(var n=0;n<t.length;n++)t[n].destroy(!0)}this.pool={}},t.prototype.freePotRenderTarget=function(e){var t=(65535&e.size.width*e.resolution)<<16|65535&e.size.height*e.resolution;this.pool[t].push(e)},t}(r.default);t.default=p},function(e,t,n){"use strict";t.__esModule=!0,t.calculateScreenSpaceMatrix=function(e,t,n){var r=e.identity();return r.translate(t.x/n.width,t.y/n.height),r.scale(n.width,n.height),r},t.calculateNormalizedScreenSpaceMatrix=function(e,t,n){var r=e.identity();r.translate(t.x/n.width,t.y/n.height);var i=n.width/t.width,o=n.height/t.height;return r.scale(i,o),r},t.calculateSpriteMatrix=function(e,t,n,i){var o=i._texture.baseTexture,s=e.set(n.width,0,0,n.height,t.x,t.y),a=i.worldTransform.copy(r.Matrix.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(i.anchor.x,i.anchor.y),s};var r=n(5)},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(7),o=n(2),s=n(27),a=(r=s)&&r.__esModule?r:{default:r},l=n(3);var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return e.prototype.bindTexture=function(){},e.prototype.getTexture=function(){},e.prototype.updateTexture=function(e,t){var n=this.gl,r=!!e._glRenderTargets;if(!e.hasLoaded)return null;var s=this.renderer.boundTextures;if(void 0===t){t=0;for(var l=0;l<s.length;++l)if(s[l]===e){t=l;break}}s[t]=e,n.activeTexture(n.TEXTURE0+t);var u=e._glTextures[this.renderer.CONTEXT_UID];if(u)r?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):u.upload(e.source);else{if(r){var c=new a.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);c.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=c,u=c.texture}else(u=new i.GLTexture(this.gl,null,null,null,null)).bind(t),u.premultiplyAlpha=!0,u.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=u,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&u.enableMipmap(),e.wrapMode===o.WRAP_MODES.CLAMP?u.enableWrapClamp():e.wrapMode===o.WRAP_MODES.REPEAT?u.enableWrapRepeat():u.enableWrapMirrorRepeat()):u.enableWrapClamp(),e.scaleMode===o.SCALE_MODES.NEAREST?u.enableNearestScaling():u.enableLinearScaling()}return u},e.prototype.destroyTexture=function(e,t){if((e=e.baseTexture||e).hasLoaded){var n=this.renderer.CONTEXT_UID,r=e._glTextures,i=e._glRenderTargets;if(r[n]&&(this.renderer.unbindTexture(e),r[n].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete r[n],!t)){var o=this._managedTextures.indexOf(e);-1!==o&&(0,l.removeItems)(this._managedTextures,o,1)}i&&i[n]&&(i[n].destroy(),delete i[n])}},e.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]}},e.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this)}this._managedTextures=null},e}();t.default=u},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(2),o=n(4),s=(r=o)&&r.__esModule?r:{default:r};var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=s.default.GC_MAX_IDLE,this.checkCountMax=s.default.GC_MAX_CHECK_COUNT,this.mode=s.default.GC_MODE}return e.prototype.update=function(){this.count++,this.mode!==i.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},e.prototype.run=function(){for(var e=this.renderer.textureManager,t=e._managedTextures,n=!1,r=0;r<t.length;r++){var i=t[r];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[r]=null,n=!0)}if(n){for(var o=0,s=0;s<t.length;s++)null!==t[s]&&(t[o++]=t[s]);t.length=o}},e.prototype.unload=function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var n=e.children.length-1;n>=0;n--)this.unload(e.children[n])},e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(145),o=(r=i)&&r.__esModule?r:{default:r};var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,o.default)(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}return e.prototype.push=function(){var e=this.stack[this.stackIndex];e||(e=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var t=0;t<this.activeState.length;t++)e[t]=this.activeState[t]},e.prototype.pop=function(){var e=this.stack[--this.stackIndex];this.setState(e)},e.prototype.setState=function(e){this.setBlend(e[0]),this.setDepthTest(e[1]),this.setFrontFace(e[2]),this.setCullFace(e[3]),this.setBlendMode(e[4])},e.prototype.setBlend=function(e){e=e?1:0,this.activeState[0]!==e&&(this.activeState[0]=e,this.gl[e?"enable":"disable"](this.gl.BLEND))},e.prototype.setBlendMode=function(e){if(e!==this.activeState[4]){this.activeState[4]=e;var t=this.blendModes[e];2===t.length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}},e.prototype.setDepthTest=function(e){e=e?1:0,this.activeState[1]!==e&&(this.activeState[1]=e,this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST))},e.prototype.setCullFace=function(e){e=e?1:0,this.activeState[3]!==e&&(this.activeState[3]=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE))},e.prototype.setFrontFace=function(e){e=e?1:0,this.activeState[2]!==e&&(this.activeState[2]=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))},e.prototype.resetAttributes=function(){for(var e=0;e<this.attribState.tempAttribState.length;e++)this.attribState.tempAttribState[e]=0;for(var t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(var n=1;n<this.maxAttribs;n++)this.gl.disableVertexAttribArray(n)},e.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[r.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.ADD]=[e.ONE,e.DST_ALPHA],t[r.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR],t[r.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.LUMINOSITY]=[e.ZERO,e.SRC_ALPHA],t[r.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.DST_ALPHA,e.ONE,e.DST_ALPHA],t[r.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_COLOR],t};var r=n(2)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t[r.DRAW_MODES.POINTS]=e.POINTS,t[r.DRAW_MODES.LINES]=e.LINES,t[r.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,t[r.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,t[r.DRAW_MODES.TRIANGLES]=e.TRIANGLES,t[r.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,t[r.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN,t};var r=n(2)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=s;n=(n=n.replace(/%count%/gi,t)).replace(/%forloop%/gi,function(e){var t="";t+="\n",t+="\n";for(var n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+="if(textureId == "+n+".0)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"}(t));for(var r=new o.default(e,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",n),i=[],a=0;a<t;a++)i[a]=a;return r.bind(),r.uniforms.uSamplers=i,r};var r,i=n(21),o=(r=i)&&r.__esModule?r:{default:r};n(8);var s=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n")},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=!t;if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(n){var r=document.createElement("canvas");r.width=1,r.height=1,t=o.default.createContext(r)}var i=t.createShader(t.FRAGMENT_SHADER);for(;;){var l=s.replace(/%forloop%/gi,a(e));if(t.shaderSource(i,l),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))break;e=e/2|0}n&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext();return e};var r,i=n(7),o=(r=i)&&r.__esModule?r:{default:r};var s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function a(e){for(var t="",n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+="if(test == "+n+".0){}");return t}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return e.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=p(n(36)),o=p(n(15)),s=n(5),a=n(3),l=n(2),u=p(n(4)),c=p(n(71)),h=p(n(72)),d=p(n(152));function p(e){return e&&e.__esModule?e:{default:e}}var f={texture:!0,children:!1,baseTexture:!0},g=function(e){function t(n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=i||document.createElement("canvas")).width=3,i.height=3;var a=o.default.fromCanvas(i,u.default.SCALE_MODE,"text");a.orig=new s.Rectangle,a.trim=new s.Rectangle;var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return o.default.addToCache(l._texture,l._texture.baseTexture.textureCacheIds[0]),l.canvas=i,l.context=l.canvas.getContext("2d"),l.resolution=u.default.RESOLUTION,l._text=null,l._style=null,l._styleListener=null,l._font="",l.text=n,l.style=r,l.localStyleID=-1,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var n=this.context,r=h.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=r.width,o=r.height,s=r.lines,a=r.lineHeight,l=r.lineWidths,u=r.maxLineWidth,c=r.fontProperties;this.canvas.width=Math.ceil((i+2*t.padding)*this.resolution),this.canvas.height=Math.ceil((o+2*t.padding)*this.resolution),n.scale(this.resolution,this.resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.strokeStyle=t.stroke,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;var d=void 0,p=void 0;if(t.dropShadow){n.fillStyle=t.dropShadowColor,n.globalAlpha=t.dropShadowAlpha,n.shadowBlur=t.dropShadowBlur,t.dropShadowBlur>0&&(n.shadowColor=t.dropShadowColor);for(var f=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,g=Math.sin(t.dropShadowAngle)*t.dropShadowDistance,m=0;m<s.length;m++)d=t.strokeThickness/2,p=t.strokeThickness/2+m*a+c.ascent,"right"===t.align?d+=u-l[m]:"center"===t.align&&(d+=(u-l[m])/2),t.fill&&(this.drawLetterSpacing(s[m],d+f+t.padding,p+g+t.padding),t.stroke&&t.strokeThickness&&(n.strokeStyle=t.dropShadowColor,this.drawLetterSpacing(s[m],d+f+t.padding,p+g+t.padding,!0),n.strokeStyle=t.stroke))}n.shadowBlur=0,n.globalAlpha=1,n.fillStyle=this._generateFillStyle(t,s);for(var v=0;v<s.length;v++)d=t.strokeThickness/2,p=t.strokeThickness/2+v*a+c.ascent,"right"===t.align?d+=u-l[v]:"center"===t.align&&(d+=(u-l[v])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(s[v],d+t.padding,p+t.padding,!0),t.fill&&this.drawLetterSpacing(s[v],d+t.padding,p+t.padding);this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style,o=i.letterSpacing;if(0!==o)for(var s=String.prototype.split.call(e,""),a=t,l=0,u="";l<e.length;)u=s[l++],r?this.context.strokeText(u,a,n):this.context.fillText(u,a,n),a+=this.context.measureText(u).width+o;else r?this.context.strokeText(e,t,n):this.context.fillText(e,t,n)},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=(0,d.default)(e);e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0)}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=e.width,o.realHeight=e.height,o.width=e.width/this.resolution,o.height=e.height/this.resolution,n.trim.width=n._frame.width=e.width/this.resolution,n.trim.height=n._frame.height=e.height/this.resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},t.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,t)},t.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._onStyleChange=function(){this.dirty=!0},t.prototype._generateFillStyle=function(e,t){if(!Array.isArray(e.fill))return e.fill;if(navigator.isCocoonJS)return e.fill[0];var n=void 0,r=void 0,i=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,u=e.fill.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var h=u.length+1,d=1;d<h;++d)c.push(d/h);if(u.unshift(e.fill[0]),c.unshift(0),u.push(e.fill[e.fill.length-1]),c.push(1),e.fillGradientType===l.TEXT_GRADIENT.LINEAR_VERTICAL){n=this.context.createLinearGradient(s/2,0,s/2,a),r=(u.length+1)*t.length,i=0;for(var p=0;p<t.length;p++){i+=1;for(var f=0;f<u.length;f++)o="number"==typeof c[f]?c[f]/t.length+p/t.length:i/r,n.addColorStop(o,u[f]),i++}}else{n=this.context.createLinearGradient(0,a/2,s,a/2),r=u.length+1,i=1;for(var g=0;g<u.length;g++)o="number"==typeof c[g]?c[g]:i/r,n.addColorStop(o,u[g]),i++}return n},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},f,t),e.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},r(t,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=(0,a.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=(0,a.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){(e=e||{})instanceof c.default?this._style=e:this._style=new c.default(e),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(e){e=String(""===e||null==e?" ":e),this._text!==e&&(this._text=e,this.dirty=!0)}}]),t}(i.default);t.default=g},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.width,n=e.height,r=e.getContext("2d"),i=r.getImageData(0,0,t,n).data,o=i.length,s={top:null,left:null,right:null,bottom:null},a=void 0,l=void 0,u=void 0;for(a=0;a<o;a+=4)0!==i[a+3]&&(l=a/4%t,u=~~(a/4/t),null===s.top&&(s.top=u),null===s.left?s.left=l:l<s.left&&(s.left=l),null===s.right?s.right=l+1:s.right<l&&(s.right=l+1),null===s.bottom?s.bottom=u:s.bottom<u&&(s.bottom=u));t=s.right-s.left,n=s.bottom-s.top+1;var c=r.getImageData(s.left,s.top,t,n);return{height:n,width:t,data:c}}},function(e,t,n){"use strict";t.__esModule=!0;var r=f(n(18)),i=f(n(39)),o=f(n(15)),s=f(n(73)),a=f(n(36)),l=n(5),u=n(3),c=n(2),h=f(n(33)),d=f(n(154)),p=f(n(19));function f(e){return e&&e.__esModule?e:{default:e}}var g=void 0,m=new l.Matrix,v=new l.Point,y=new Float32Array(4),b=new Float32Array(4),_=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=n,r.lineColor=0,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=c.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new h.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.clone=function(){var e=new t;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var n=0;n<this.graphicsData.length;++n)e.graphicsData.push(this.graphicsData[n].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},t.prototype.lineStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=e,this.lineColor=t,this.lineAlpha=n,this.currentPath)if(this.currentPath.shape.points.length){var r=new l.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},t.prototype.moveTo=function(e,t){var n=new l.Polygon([e,t]);return n.closed=!1,this.drawShape(n),this},t.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty++,this},t.prototype.quadraticCurveTo=function(e,t,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i=this.currentPath.shape.points,o=0,s=0;0===i.length&&this.moveTo(0,0);for(var a=i[i.length-2],l=i[i.length-1],u=1;u<=20;++u){var c=u/20;o=a+(e-a)*c,s=l+(t-l)*c,i.push(o+(e+(n-e)*c-o)*c,s+(t+(r-t)*c-s)*c)}return this.dirty++,this},t.prototype.bezierCurveTo=function(e,t,n,r,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,a=s[s.length-2],l=s[s.length-1];return s.length-=2,(0,d.default)(a,l,e,t,n,r,i,o,s),this.dirty++,this},t.prototype.arcTo=function(e,t,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1]-t,l=s-e,u=r-t,c=n-e,h=Math.abs(a*c-l*u);if(h<1e-8||0===i)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var d=a*a+l*l,p=u*u+c*c,f=a*u+l*c,g=i*Math.sqrt(d)/h,m=i*Math.sqrt(p)/h,v=g*f/d,y=m*f/p,b=g*c+m*l,_=g*u+m*a,T=l*(m+v),x=a*(m+v),w=c*(g+y),E=u*(g+y),S=Math.atan2(x-_,T-b),M=Math.atan2(E-_,w-b);this.arc(b+e,_+t,i,S,M,l*u>c*a)}return this.dirty++,this},t.prototype.arc=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===i)return this;!o&&i<=r?i+=2*Math.PI:o&&r<=i&&(r+=2*Math.PI);var s=i-r,a=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0===s)return this;var l=e+Math.cos(r)*n,u=t+Math.sin(r)*n,c=this.currentPath?this.currentPath.shape.points:null;c?c[c.length-2]===l&&c[c.length-1]===u||c.push(l,u):(this.moveTo(l,u),c=this.currentPath.shape.points);for(var h=s/(2*a),d=2*h,p=Math.cos(h),f=Math.sin(h),g=a-1,m=g%1/g,v=0;v<=g;++v){var y=v+m*v,b=h+r+d*y,_=Math.cos(b),T=-Math.sin(b);c.push((p*_+f*T)*n+e,(p*-T+f*_)*n+t)}return this.dirty++,this},t.prototype.beginFill=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=e,this.fillAlpha=t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},t.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},t.prototype.drawRect=function(e,t,n,r){return this.drawShape(new l.Rectangle(e,t,n,r)),this},t.prototype.drawRoundedRect=function(e,t,n,r,i){return this.drawShape(new l.RoundedRectangle(e,t,n,r,i)),this},t.prototype.drawCircle=function(e,t,n){return this.drawShape(new l.Circle(e,t,n)),this},t.prototype.drawEllipse=function(e,t,n,r){return this.drawShape(new l.Ellipse(e,t,n,r)),this},t.prototype.drawPolygon=function(e){var t=e,n=!0;if(t instanceof l.Polygon&&(n=t.closed,t=t.points),!Array.isArray(t)){t=new Array(arguments.length);for(var r=0;r<t.length;++r)t[r]=arguments[r]}var i=new l.Polygon(t);return i.closed=n,this.drawShape(i),this},t.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},t.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===c.SHAPES.RECT&&!this.graphicsData[0].lineWidth},t.prototype._renderWebGL=function(e){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(e):(e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this))},t.prototype._renderSpriteRect=function(e){var t=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new a.default(new o.default(o.default.WHITE)));var n=this._spriteRect;if(16777215===this.tint)n.tint=this.graphicsData[0].fillColor;else{var r=y,i=b;(0,u.hex2rgb)(this.graphicsData[0].fillColor,r),(0,u.hex2rgb)(this.tint,i),r[0]*=i[0],r[1]*=i[1],r[2]*=i[2],n.tint=(0,u.rgb2hex)(r)}n.alpha=this.graphicsData[0].fillAlpha,n.worldAlpha=this.worldAlpha*n.alpha,n.blendMode=this.blendMode,n._texture._frame.width=t.width,n._texture._frame.height=t.height,n.transform.worldTransform=this.transform.worldTransform,n.anchor.set(-t.x/t.width,-t.y/t.height),n._onAnchorUpdate(),n._renderWebGL(e)},t.prototype._renderCanvas=function(e){!0!==this.isMask&&e.plugins.graphics.render(this)},t.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var e=this._localBounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,v);for(var t=this.graphicsData,n=0;n<t.length;++n){var r=t[n];if(r.fill&&(r.shape&&r.shape.contains(v.x,v.y))){if(r.holes)for(var i=0;i<r.holes.length;i++){if(r.holes[i].contains(v.x,v.y))return!1}return!0}}return!1},t.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0;if(this.graphicsData.length)for(var i=0,o=0,s=0,a=0,l=0,u=0;u<this.graphicsData.length;u++){var h=this.graphicsData[u],d=h.type,p=h.lineWidth;if(i=h.shape,d===c.SHAPES.RECT||d===c.SHAPES.RREC)o=i.x-p/2,s=i.y-p/2,e=o<e?o:e,t=o+(a=i.width+p)>t?o+a:t,n=s<n?s:n,r=s+(l=i.height+p)>r?s+l:r;else if(d===c.SHAPES.CIRC)o=i.x,s=i.y,e=o-(a=i.radius+p/2)<e?o-a:e,t=o+a>t?o+a:t,n=s-(l=i.radius+p/2)<n?s-l:n,r=s+l>r?s+l:r;else if(d===c.SHAPES.ELIP)o=i.x,s=i.y,e=o-(a=i.width+p/2)<e?o-a:e,t=o+a>t?o+a:t,n=s-(l=i.height+p/2)<n?s-l:n,r=s+l>r?s+l:r;else for(var f=i.points,g=0,m=0,v=0,y=0,b=0,_=0,T=0,x=0,w=0;w+2<f.length;w+=2)o=f[w],s=f[w+1],g=f[w+2],m=f[w+3],v=Math.abs(g-o),y=Math.abs(m-s),l=p,(a=Math.sqrt(v*v+y*y))<1e-9||(e=(T=(g+o)/2)-(b=(l/a*y+v)/2)<e?T-b:e,t=T+b>t?T+b:t,n=(x=(m+s)/2)-(_=(l/a*v+y)/2)<n?x-_:n,r=x+_>r?x+_:r)}else e=0,t=0,n=0,r=0;var E=this.boundsPadding;this._localBounds.minX=e-E,this._localBounds.maxX=t+E,this._localBounds.minY=n-E,this._localBounds.maxY=r+E},t.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new s.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,e);return this.graphicsData.push(t),t.type===c.SHAPES.POLY&&(t.shape.closed=t.shape.closed||this.filling,this.currentPath=t),this.dirty++,t},t.prototype.generateCanvasTexture=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getLocalBounds(),r=i.default.create(n.width,n.height,e,t);g||(g=new p.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(m),m.invert(),m.tx-=n.x,m.ty-=n.y,g.render(this,r,!0,m);var s=o.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,e,"graphics");return s.baseTexture.resolution=t,s.baseTexture.update(),s},t.prototype.closePath=function(){var e=this.currentPath;return e&&e.shape&&e.shape.close(),this},t.prototype.addHole=function(){var e=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(e.shape),this.currentPath=null,this},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t);for(var n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();for(var r in this._webgl)for(var i=0;i<this._webgl[r].data.length;++i)this._webgl[r].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},t}(r.default);t.default=_,_._SPRITE_TEXTURE=null},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,r,i,o,s,a){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],u=0,c=0,h=0,d=0,p=0;l.push(e,t);for(var f=1,g=0;f<=20;++f)h=(c=(u=1-(g=f/20))*u)*u,p=(d=g*g)*g,l.push(h*e+3*c*g*n+3*u*d*i+p*s,h*t+3*c*g*r+3*u*d*o+p*a);return l}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(3),i=n(2),o=p(n(25)),s=p(n(26)),a=p(n(156)),l=p(n(157)),u=p(n(158)),c=p(n(159)),h=p(n(160)),d=p(n(161));function p(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=n.gl,r.CONTEXT_UID=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new l.default(this.gl)},t.prototype.destroy=function(){o.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},t.prototype.render=function(e){var t=this.renderer,n=t.gl,i=void 0,o=e._webGL[this.CONTEXT_UID];o&&e.dirty===o.dirty||(this.updateGraphics(e),o=e._webGL[this.CONTEXT_UID]);var s=this.primitiveShader;t.bindShader(s),t.state.setBlendMode(e.blendMode);for(var a=0,l=o.data.length;a<l;a++){var u=(i=o.data[a]).shader;t.bindShader(u),u.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,r.hex2rgb)(e.tint),u.uniforms.alpha=e.worldAlpha,t.bindVao(i.vao),i.nativeLines?n.drawArrays(n.LINES,0,i.points.length/6):i.vao.draw(n.TRIANGLE_STRIP,i.indices.length)}},t.prototype.updateGraphics=function(e){var t=this.renderer.gl,n=e._webGL[this.CONTEXT_UID];if(n||(n=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),n.dirty=e.dirty,e.clearDirty!==n.clearDirty){n.clearDirty=e.clearDirty;for(var r=0;r<n.data.length;r++)this.graphicsDataPool.push(n.data[r]);n.data.length=0,n.lastIndex=0}for(var o=void 0,s=void 0,a=n.lastIndex;a<e.graphicsData.length;a++){var l=e.graphicsData[a];o=this.getWebGLData(n,0),l.nativeLines&&l.lineWidth&&(s=this.getWebGLData(n,0,!0),n.lastIndex++),l.type===i.SHAPES.POLY&&(0,u.default)(l,o,s),l.type===i.SHAPES.RECT?(0,c.default)(l,o,s):l.type===i.SHAPES.CIRC||l.type===i.SHAPES.ELIP?(0,d.default)(l,o,s):l.type===i.SHAPES.RREC&&(0,h.default)(l,o,s),n.lastIndex++}this.renderer.bindVao(null);for(var p=0;p<n.data.length;p++)(o=n.data[p]).dirty&&o.upload()},t.prototype.getWebGLData=function(e,t,n){var r=e.data[e.data.length-1];return(!r||r.nativeLines!==n||r.points.length>32e4)&&((r=this.graphicsDataPool.pop()||new a.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=n,r.reset(t),e.data.push(r)),r.dirty=!0,r},t}(o.default);t.default=f,s.default.registerPlugin("graphics",f)},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(7),o=(r=i)&&r.__esModule?r:{default:r};var s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=o.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=n,this.vao=new o.default.VertexArrayObject(t,r).addIndex(this.indexBuffer).addAttribute(this.buffer,n.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,n.attributes.aColor,t.FLOAT,!1,24,8)}return e.prototype.reset=function(){this.points.length=0,this.indices.length=0},e.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},e.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(21);var o=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){e.points=e.shape.points.slice();var s=e.points;if(e.fill&&s.length>=6){for(var a=[],l=e.holes,u=0;u<l.length;u++){var c=l[u];a.push(s.length/2),s=s.concat(c.points)}var h=t.points,d=t.indices,p=s.length/2,f=(0,i.hex2rgb)(e.fillColor),g=e.fillAlpha,m=f[0]*g,v=f[1]*g,y=f[2]*g,b=(0,o.default)(s,a,2);if(!b)return;for(var _=h.length/6,T=0;T<b.length;T+=3)d.push(b[T]+_),d.push(b[T]+_),d.push(b[T+1]+_),d.push(b[T+2]+_),d.push(b[T+2]+_);for(var x=0;x<p;x++)h.push(s[2*x],s[2*x+1],m,v,y,g)}e.lineWidth>0&&(0,r.default)(e,t,n)};var r=s(n(28)),i=n(3),o=s(n(74));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){var r=e.shape,i=r.x,a=r.y,l=r.width,u=r.height;if(e.fill){var c=(0,s.hex2rgb)(e.fillColor),h=e.fillAlpha,d=c[0]*h,p=c[1]*h,f=c[2]*h,g=t.points,m=t.indices,v=g.length/6;g.push(i,a),g.push(d,p,f,h),g.push(i+l,a),g.push(d,p,f,h),g.push(i,a+u),g.push(d,p,f,h),g.push(i+l,a+u),g.push(d,p,f,h),m.push(v,v,v+1,v+2,v+3,v+3)}if(e.lineWidth){var y=e.points;e.points=[i,a,i+l,a,i+l,a+u,i,a+u,i,a],(0,o.default)(e,t,n),e.points=y}};var r,i=n(28),o=(r=i)&&r.__esModule?r:{default:r},s=n(3)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){var s=e.shape,a=s.x,u=s.y,c=s.width,h=s.height,d=s.radius,p=[];if(p.push(a,u+d),l(a,u+h-d,a,u+h,a+d,u+h,p),l(a+c-d,u+h,a+c,u+h,a+c,u+h-d,p),l(a+c,u+d,a+c,u,a+c-d,u,p),l(a+d,u,a,u,a,u+d+1e-10,p),e.fill){for(var f=(0,o.hex2rgb)(e.fillColor),g=e.fillAlpha,m=f[0]*g,v=f[1]*g,y=f[2]*g,b=t.points,_=t.indices,T=b.length/6,x=(0,r.default)(p,null,2),w=0,E=x.length;w<E;w+=3)_.push(x[w]+T),_.push(x[w]+T),_.push(x[w+1]+T),_.push(x[w+2]+T),_.push(x[w+2]+T);for(var S=0,M=p.length;S<M;S++)b.push(p[S],p[++S],m,v,y,g)}if(e.lineWidth){var I=e.points;e.points=p,(0,i.default)(e,t,n),e.points=I}};var r=s(n(74)),i=s(n(28)),o=n(3);function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return e+(t-e)*n}function l(e,t,n,r,i,o){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=0,u=0,c=0,h=0,d=0,p=0,f=0,g=0;f<=20;++f)l=a(e,n,g=f/20),u=a(t,r,g),c=a(n,i,g),h=a(r,o,g),d=a(l,c,g),p=a(u,h,g),s.push(d,p);return s}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){var r=e.shape,i=r.x,l=r.y,u=void 0,c=void 0;e.type===s.SHAPES.CIRC?(u=r.radius,c=r.radius):(u=r.width,c=r.height);if(0===u||0===c)return;var h=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),d=2*Math.PI/h;if(e.fill){var p=(0,a.hex2rgb)(e.fillColor),f=e.fillAlpha,g=p[0]*f,m=p[1]*f,v=p[2]*f,y=t.points,b=t.indices,_=y.length/6;b.push(_);for(var T=0;T<h+1;T++)y.push(i,l,g,m,v,f),y.push(i+Math.sin(d*T)*u,l+Math.cos(d*T)*c,g,m,v,f),b.push(_++,_++);b.push(_-1)}if(e.lineWidth){var x=e.points;e.points=[];for(var w=0;w<h+1;w++)e.points.push(i+Math.sin(d*w)*u,l+Math.cos(d*w)*c);(0,o.default)(e,t,n),e.points=x}};var r,i=n(28),o=(r=i)&&r.__esModule?r:{default:r},s=n(2),a=n(3)},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(19),o=(r=i)&&r.__esModule?r:{default:r},s=n(2);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,n=t.context,r=e.worldAlpha,i=e.transform.worldTransform,o=t.resolution;this._prevTint!==this.tint&&(this.dirty=!0),n.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1),t.setBlendMode(e.blendMode);for(var a=0;a<e.graphicsData.length;a++){var l=e.graphicsData[a],u=l.shape,c=l._fillTint,h=l._lineTint;if(n.lineWidth=l.lineWidth,l.type===s.SHAPES.POLY){n.beginPath(),this.renderPolygon(u.points,u.closed,n);for(var d=0;d<l.holes.length;d++)this.renderPolygon(l.holes[d].points,!0,n);l.fill&&(n.globalAlpha=l.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),l.lineWidth&&(n.globalAlpha=l.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}else if(l.type===s.SHAPES.RECT)(l.fillColor||0===l.fillColor)&&(n.globalAlpha=l.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fillRect(u.x,u.y,u.width,u.height)),l.lineWidth&&(n.globalAlpha=l.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.strokeRect(u.x,u.y,u.width,u.height));else if(l.type===s.SHAPES.CIRC)n.beginPath(),n.arc(u.x,u.y,u.radius,0,2*Math.PI),n.closePath(),l.fill&&(n.globalAlpha=l.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),l.lineWidth&&(n.globalAlpha=l.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke());else if(l.type===s.SHAPES.ELIP){var p=2*u.width,f=2*u.height,g=u.x-p/2,m=u.y-f/2;n.beginPath();var v=p/2*.5522848,y=f/2*.5522848,b=g+p,_=m+f,T=g+p/2,x=m+f/2;n.moveTo(g,x),n.bezierCurveTo(g,x-y,T-v,m,T,m),n.bezierCurveTo(T+v,m,b,x-y,b,x),n.bezierCurveTo(b,x+y,T+v,_,T,_),n.bezierCurveTo(T-v,_,g,x+y,g,x),n.closePath(),l.fill&&(n.globalAlpha=l.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),l.lineWidth&&(n.globalAlpha=l.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}else if(l.type===s.SHAPES.RREC){var w=u.x,E=u.y,S=u.width,M=u.height,I=u.radius,P=Math.min(S,M)/2|0;I=I>P?P:I,n.beginPath(),n.moveTo(w,E+I),n.lineTo(w,E+M-I),n.quadraticCurveTo(w,E+M,w+I,E+M),n.lineTo(w+S-I,E+M),n.quadraticCurveTo(w+S,E+M,w+S,E+M-I),n.lineTo(w+S,E+I),n.quadraticCurveTo(w+S,E,w+S-I,E),n.lineTo(w+I,E),n.quadraticCurveTo(w,E,w,E+I),n.closePath(),(l.fillColor||0===l.fillColor)&&(n.globalAlpha=l.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),l.lineWidth&&(n.globalAlpha=l.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}}},e.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint;for(var t=(e.tint>>16&255)/255,n=(e.tint>>8&255)/255,r=(255&e.tint)/255,i=0;i<e.graphicsData.length;++i){var o=e.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255,o._lineTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255}},e.prototype.renderPolygon=function(e,t,n){n.moveTo(e[0],e[1]);for(var r=1;r<e.length/2;++r)n.lineTo(e[2*r],e[2*r+1]);t&&n.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();t.default=a,o.default.registerPlugin("graphics",a)},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=n(3);var s=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseTexture=t,this.textures={},this.data=n,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(e,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),e.prototype._updateResolution=function(e){var t=this.data.meta.scale,n=(0,o.getResolutionOfUrl)(e,null);return null===n&&(n=void 0!==t?parseFloat(t):1),1!==n&&(this.baseTexture.resolution=n,this.baseTexture.update()),n},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var n=t,r=e.BATCH_SIZE,o=this.baseTexture.sourceScale;n-t<r&&n<this._frameKeys.length;){var s=this._frameKeys[n],a=this._frames[s].frame;if(a){var l=null,u=null,c=new i.Rectangle(0,0,Math.floor(this._frames[s].sourceSize.w*o)/this.resolution,Math.floor(this._frames[s].sourceSize.h*o)/this.resolution);l=this._frames[s].rotated?new i.Rectangle(Math.floor(a.x*o)/this.resolution,Math.floor(a.y*o)/this.resolution,Math.floor(a.h*o)/this.resolution,Math.floor(a.w*o)/this.resolution):new i.Rectangle(Math.floor(a.x*o)/this.resolution,Math.floor(a.y*o)/this.resolution,Math.floor(a.w*o)/this.resolution,Math.floor(a.h*o)/this.resolution),this._frames[s].trimmed&&(u=new i.Rectangle(Math.floor(this._frames[s].spriteSourceSize.x*o)/this.resolution,Math.floor(this._frames[s].spriteSourceSize.y*o)/this.resolution,Math.floor(a.w*o)/this.resolution,Math.floor(a.h*o)/this.resolution)),this.textures[s]=new i.Texture(this.baseTexture,l,c,u,this._frames[s].rotated?2:0),i.Texture.addToCache(this.textures[s],s)}n++}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():t._parseComplete()}),0)},e.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},e}();t.default=s},function(e,t,n){"use strict";function r(e){var t=(new Error).stack;void 0===t?console.warn("Deprecation Warning: ",e):(t=t.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",e),console.warn(t)))}t.__esModule=!0,t.default=function(e){var t=e.mesh,n=e.particles,i=e.extras,o=e.filters,s=e.prepare,a=e.loaders,l=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return r("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return r("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return r("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return r("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return r("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),n.ParticleContainer}},MovieClip:{get:function(){return r("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),i.AnimatedSprite}},TilingSprite:{get:function(){return r("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),i.TilingSprite}},BitmapText:{get:function(){return r("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),i.BitmapText}},blendModes:{get:function(){return r("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return r("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return r("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return r("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return r("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return r("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{get:function(){return r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(t){r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(t){r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(t){r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(t){r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(t){r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(t){r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(t){r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return r("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],c=function(t){var n=u[t];Object.defineProperty(e[n.parent],"DEFAULT",{get:function(){return r("PIXI."+n.parent+".DEFAULT has been deprecated, please use PIXI.settings."+n.target),e.settings[n.target]},set:function(t){r("PIXI."+n.parent+".DEFAULT has been deprecated, please use PIXI.settings."+n.target),e.settings[n.target]=t}})},h=0;h<u.length;h++)c(h);Object.defineProperties(e.settings,{PRECISION:{get:function(){return r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT},set:function(t){r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT=t}}}),i.AnimatedSprite&&Object.defineProperties(i,{MovieClip:{get:function(){return r("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),i.AnimatedSprite}}});e.DisplayObject.prototype.generateTexture=function(e,t,n){return r("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),e.generateTexture(this,t,n)},e.Graphics.prototype.generateTexture=function(e,t){return r("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(e,t)},e.RenderTexture.prototype.render=function(e,t,n,i){this.legacyRenderer.render(e,this,n,t,!i),r("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(e){return r("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},e.RenderTexture.prototype.getBase64=function(e){return r("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},e.RenderTexture.prototype.getCanvas=function(e){return r("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},e.RenderTexture.prototype.getPixels=function(e){return r("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},e.Sprite.prototype.setTexture=function(e){this.texture=e,r("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},i.BitmapText&&(i.BitmapText.prototype.setText=function(e){this.text=e,r("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});e.Text.prototype.setText=function(e){this.text=e,r("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.calculateFontProperties=function(t){return r("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),e.TextMetrics.measureFont(t)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return r("Text.fontPropertiesCache is deprecated"),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return r("Text.fontPropertiesCanvas is deprecated"),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return r("Text.fontPropertiesContext is deprecated"),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(e){this.style=e,r("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(t){return r("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),e.TextMetrics.measureFont(t)},e.Text.getFontStyle=function(t){return r("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(t=t||{})instanceof e.TextStyle||(t=new e.TextStyle(t)),t.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){r("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(e){r("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),e.indexOf("italic")>1?this._fontStyle="italic":e.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",e.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var t=e.split(" "),n=-1;this._fontSize=26;for(var i=0;i<t.length;++i)if(t[i].match(/(px|pt|em|%)/)){n=i,this._fontSize=t[i];break}this._fontWeight="normal";for(var o=0;o<n;++o)if(t[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[o];break}if(n>-1&&n<t.length-1){this._fontFamily="";for(var s=n+1;s<t.length;++s)this._fontFamily+=t[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(e){this.frame=e,r("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},e.Texture.addTextureToCache=function(t,n){e.Texture.addToCache(t,n),r("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},e.Texture.removeTextureFromCache=function(t){return r("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),e.BaseTexture.removeFromCache(t),e.Texture.removeFromCache(t)},Object.defineProperties(o,{AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return r("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}}}),e.utils.uuid=function(){return r("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return r("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var d=!0;Object.defineProperty(e.utils,"_saidHello",{set:function(e){e&&(r("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),d=e},get:function(){return d}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(e,t){return r("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),e&&this.registerFindHook(e),t&&this.registerUploadHook(t),this});s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});if(a.Loader){var p=a.Resource,f=a.Loader;Object.defineProperties(p.prototype,{isJson:{get:function(){return r("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===p.TYPE.JSON}},isXml:{get:function(){return r("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===p.TYPE.XML}},isImage:{get:function(){return r("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===p.TYPE.IMAGE}},isAudio:{get:function(){return r("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===p.TYPE.AUDIO}},isVideo:{get:function(){return r("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===p.TYPE.VIDEO}}}),Object.defineProperties(f.prototype,{before:{get:function(){return r("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return r("The after() method is deprecated, please use use()."),this.use}}})}l.interactiveTarget&&Object.defineProperty(l.interactiveTarget,"defaultCursor",{set:function(e){r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}});l.InteractionManager&&(Object.defineProperty(l.InteractionManager,"defaultCursorStyle",{set:function(e){r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(l.InteractionManager,"currentCursorStyle",{set:function(e){r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(77);Object.defineProperty(t,"accessibleTarget",{enumerable:!0,get:function(){return o(r).default}});var i=n(166);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"AccessibilityManager",{enumerable:!0,get:function(){return o(i).default}})},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=s(n(34)),o=s(n(77));function s(e){return e&&e.__esModule?e:{default:e}}r.utils.mixins.delayMixin(r.DisplayObject.prototype,o.default);var a=100,l=0,u=0,c=2,h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!i.default.tablet&&!i.default.phone||navigator.isCocoonJS||this.createTouchHook();var n=document.createElement("div");n.style.width=a+"px",n.style.height=a+"px",n.style.position="absolute",n.style.top=l+"px",n.style.left=u+"px",n.style.zIndex=c,this.div=n,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",(function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)})),document.body.appendChild(t)},e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,n=t.length-1;n>=0;n--)this.updateAccessibleObjects(t[n])}},e.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,n=e.height/this.renderer.height,i=this.div;i.style.left=e.left+"px",i.style.top=e.top+"px",i.style.width=this.renderer.width+"px",i.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,r.utils.removeItems(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{i=s._accessibleDiv;var a=s.hitArea,l=s.worldTransform;s.hitArea?(i.style.left=(l.tx+a.x*l.a)*t+"px",i.style.top=(l.ty+a.y*l.d)*n+"px",i.style.width=a.width*l.a*t+"px",i.style.height=a.height*l.d*n+"px"):(a=s.getBounds(),this.capHitArea(a),i.style.left=a.x*t+"px",i.style.top=a.y*n+"px",i.style.width=a.width*t+"px",i.style.height=a.height*n+"px")}}this.renderId++}},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width=a+"px",t.style.height=a+"px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=c,t.style.borderStyle="none",t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleTitle||e.accessibleHint||(t.title="displayObject "+this.tabIndex),e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},e.prototype._onFocus=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},e.prototype._onFocusOut=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},e.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},e.prototype._onMouseMove=function(){this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();t.default=h,r.WebGLRenderer.registerPlugin("accessibility",h),r.CanvasRenderer.registerPlugin("accessibility",h)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(168);Object.defineProperty(t,"webgl",{enumerable:!0,get:function(){return o(r).default}});var i=n(169);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"canvas",{enumerable:!0,get:function(){return o(i).default}})},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));var i=new r.Rectangle,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,n=void 0,o=void 0,s=void 0,a=!1,l=void 0;e&&(l=e instanceof r.RenderTexture?e:this.renderer.generateTexture(e)),l?(o=(n=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=l.frame,a=!1):(o=(n=this.renderer.rootRenderTarget).resolution,a=!0,(s=i).width=n.size.width,s.height=n.size.height);var u=s.width*o,c=s.height*o,h=new r.CanvasRenderTarget(u,c);if(n){t.bindRenderTarget(n);var d=new Uint8Array(4*u*c),p=t.gl;p.readPixels(s.x*o,s.y*o,u,c,p.RGBA,p.UNSIGNED_BYTE,d);var f=h.context.getImageData(0,0,u,c);f.data.set(d),h.context.putImageData(f,0,0),a&&(h.context.scale(1,-1),h.context.drawImage(h.canvas,0,-c))}return h.canvas},e.prototype.pixels=function(e){var t=this.renderer,n=void 0,o=void 0,s=void 0,a=void 0;e&&(a=e instanceof r.RenderTexture?e:this.renderer.generateTexture(e)),a?(o=(n=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=a.frame):(o=(n=this.renderer.rootRenderTarget).resolution,(s=i).width=n.size.width,s.height=n.size.height);var l=s.width*o,u=s.height*o,c=new Uint8Array(4*l*u);if(n){t.bindRenderTarget(n);var h=t.gl;h.readPixels(s.x*o,s.y*o,l,u,h.RGBA,h.UNSIGNED_BYTE,c)}return c},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();t.default=o,r.WebGLRenderer.registerPlugin("extract",o)},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));var i=new r.Rectangle,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,n=void 0,o=void 0,s=void 0,a=void 0;e&&(a=e instanceof r.RenderTexture?e:t.generateTexture(e)),a?(n=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(n=t.rootContext,(s=i).width=this.renderer.width,s.height=this.renderer.height);var l=s.width*o,u=s.height*o,c=new r.CanvasRenderTarget(l,u),h=n.getImageData(s.x*o,s.y*o,l,u);return c.context.putImageData(h,0,0),c.canvas},e.prototype.pixels=function(e){var t=this.renderer,n=void 0,o=void 0,s=void 0,a=void 0;return e&&(a=e instanceof r.RenderTexture?e:t.generateTexture(e)),a?(n=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(n=t.rootContext,(s=i).width=t.width,s.height=t.height),n.getImageData(0,0,s.width*o,s.height*o).data},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();t.default=o,r.CanvasRenderer.registerPlugin("extract",o)},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));var o=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n[0]instanceof i.Texture?n[0]:n[0].texture));return o._textures=null,o._durations=null,o.textures=n,o._autoUpdate=!1!==r,o.animationSpeed=1,o.loop=!0,o.onComplete=null,o.onFrameChange=null,o.onLoop=null,o._currentTime=0,o.playing=!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&i.ticker.shared.remove(this.update,this))},t.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&i.ticker.shared.add(this.update,this,i.UPDATE_PRIORITY.HIGH))},t.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){var t=this.animationSpeed*e,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=t/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())},t.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},t.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t)},t.fromFrames=function(e){for(var n=[],r=0;r<e.length;++r)n.push(i.Texture.fromFrame(e[r]));return new t(n)},t.fromImages=function(e){for(var n=[],r=0;r<e.length;++r)n.push(i.Texture.fromImage(e[r]));return new t(n)},r(t,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(e){if(e[0]instanceof i.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}}]),t}(i.Sprite);t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=a(n(40)),s=a(n(42));function a(e){return e&&e.__esModule?e:{default:e}}var l=new i.Point,u=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.tileTransform=new i.TransformStatic,a._width=r,a._height=o,a._canvasPattern=null,a.uvTransform=n.transform||new s.default(n),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},t.prototype._renderWebGL=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var n=e.context,r=this.worldTransform,s=e.resolution,a=t.baseTexture,l=a.resolution,u=this.tilePosition.x/this.tileScale.x%t._frame.width*l,c=this.tilePosition.y/this.tileScale.y%t._frame.height*l;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var h=new i.CanvasRenderTarget(t._frame.width,t._frame.height,l);16777215!==this.tint?(this.tintedTexture=o.default.getTintedTexture(this,this.tint),h.context.drawImage(this.tintedTexture,0,0)):h.context.drawImage(a.source,-t._frame.x*l,-t._frame.y*l),this.cachedTint=this.tint,this._canvasPattern=h.context.createPattern(h.canvas,"repeat")}n.globalAlpha=this.worldAlpha,n.setTransform(r.a*s,r.b*s,r.c*s,r.d*s,r.tx*s,r.ty*s),e.setBlendMode(this.blendMode),n.fillStyle=this._canvasPattern,n.scale(this.tileScale.x/l,this.tileScale.y/l);var d=this.anchor.x*-this._width,p=this.anchor.y*-this._height;this.uvRespectAnchor?(n.translate(u,c),n.fillRect(-u+d,-c+p,this._width/this.tileScale.x*l,this._height/this.tileScale.y*l)):(n.translate(u+d,c+p),n.fillRect(-u,-c,this._width/this.tileScale.x*l,this._height/this.tileScale.y*l))}},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,n,r)},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,l);var t=this._width,n=this._height,r=-t*this.anchor._x;if(l.x>=r&&l.x<r+t){var i=-n*this.anchor._y;if(l.y>=i&&l.y<i+n)return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},t.from=function(e,n,r){return new t(i.Texture.from(e),n,r)},t.fromFrame=function(e,n,r){var o=i.utils.TextureCache[e];if(!o)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new t(o,n,r)},t.fromImage=function(e,n,r,o,s){return new t(i.Texture.fromImage(e,o,s),n,r)},r(t,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(e){this.uvTransform.clampMargin=e,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copy(e)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copy(e)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),t}(i.Sprite);t.default=u},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=n(2);n(8);var o=new r.Matrix,s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.shader=null,r.simpleShader=null,r.quad=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new r.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new r.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new r.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},t.prototype.render=function(e){var t=this.renderer,n=this.quad;t.bindVao(n.vao);var s=n.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&((s=n.uvs)[0]=s[6]=-e.anchor.x,s[1]=s[3]=-e.anchor.y,s[2]=s[4]=1-e.anchor.x,s[5]=s[7]=1-e.anchor.y),n.upload();var a=e._texture,l=a.baseTexture,u=e.tileTransform.localTransform,c=e.uvTransform,h=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;h&&(l._glTextures[t.CONTEXT_UID]?h=l.wrapMode!==i.WRAP_MODES.CLAMP:l.wrapMode===i.WRAP_MODES.CLAMP&&(l.wrapMode=i.WRAP_MODES.REPEAT));var d=h?this.simpleShader:this.shader;t.bindShader(d);var p=a.width,f=a.height,g=e._width,m=e._height;o.set(u.a*p/g,u.b*p/m,u.c*f/g,u.d*f/m,u.tx/g,u.ty/m),o.invert(),h?o.prepend(c.mapCoord):(d.uniforms.uMapCoord=c.mapCoord.toArray(!0),d.uniforms.uClampFrame=c.uClampFrame,d.uniforms.uClampOffset=c.uClampOffset),d.uniforms.uTransform=o.toArray(!0),d.uniforms.uColor=r.utils.premultiplyTintToRgba(e.tint,e.worldAlpha,d.uniforms.uColor,l.premultipliedAlpha),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=t.bindTexture(a),t.setBlendMode(r.utils.correctBlendMode(e.blendMode,l.premultipliedAlpha)),n.vao.draw(this.renderer.gl.TRIANGLES,6,0)},t}(r.ObjectRenderer);t.default=s,r.WebGLRenderer.registerPlugin("tilingSprite",s)},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=a(n(47)),s=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i._textWidth=0,i._textHeight=0,i._glyphs=[],i._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},i.font=r.font,i._text=n,i._maxWidth=0,i._maxLineHeight=0,i._anchor=new o.default((function(){i.dirty=!0}),i,0,0),i.dirty=!1,i.updateText(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateText=function(){for(var e=t.fonts[this._font.name],n=this._font.size/e.size,r=new i.Point,o=[],s=[],a=null,l=0,u=0,c=0,h=-1,d=0,p=0,f=0,g=0;g<this.text.length;g++){var m=this.text.charCodeAt(g);if(/(\s)/.test(this.text.charAt(g))&&(h=g,d=l),/(?:\r\n|\r|\n)/.test(this.text.charAt(g)))s.push(l),u=Math.max(u,l),c++,r.x=0,r.y+=e.lineHeight,a=null;else if(-1!==h&&this._maxWidth>0&&r.x*n>this._maxWidth)i.utils.removeItems(o,h-p,g-h),g=h,h=-1,++p,s.push(d),u=Math.max(u,d),c++,r.x=0,r.y+=e.lineHeight,a=null;else{var v=e.chars[m];v&&(a&&v.kerning[a]&&(r.x+=v.kerning[a]),o.push({texture:v.texture,line:c,charCode:m,position:new i.Point(r.x+v.xOffset,r.y+v.yOffset)}),l=r.x+(v.texture.width+v.xOffset),r.x+=v.xAdvance,f=Math.max(f,v.yOffset+v.texture.height),a=m)}}s.push(l),u=Math.max(u,l);for(var y=[],b=0;b<=c;b++){var _=0;"right"===this._font.align?_=u-s[b]:"center"===this._font.align&&(_=(u-s[b])/2),y.push(_)}for(var T=o.length,x=this.tint,w=0;w<T;w++){var E=this._glyphs[w];E?E.texture=o[w].texture:(E=new i.Sprite(o[w].texture),this._glyphs.push(E)),E.position.x=(o[w].position.x+y[o[w].line])*n,E.position.y=o[w].position.y*n,E.scale.x=E.scale.y=n,E.tint=x,E.parent||this.addChild(E)}for(var S=T;S<this._glyphs.length;++S)this.removeChild(this._glyphs[S]);if(this._textWidth=u*n,this._textHeight=(r.y+e.lineHeight)*n,0!==this.anchor.x||0!==this.anchor.y)for(var M=0;M<T;M++)this._glyphs[M].x-=this._textWidth*this.anchor.x,this._glyphs[M].y-=this._textHeight*this.anchor.y;this._maxLineHeight=f*n},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},t.registerFont=function(e,n){var r={},o=e.getElementsByTagName("info")[0],a=e.getElementsByTagName("common")[0],l=n.baseTexture.resolution||s.default.RESOLUTION;r.font=o.getAttribute("face"),r.size=parseInt(o.getAttribute("size"),10),r.lineHeight=parseInt(a.getAttribute("lineHeight"),10)/l,r.chars={};for(var u=e.getElementsByTagName("char"),c=0;c<u.length;c++){var h=u[c],d=parseInt(h.getAttribute("id"),10),p=new i.Rectangle(parseInt(h.getAttribute("x"),10)/l+n.frame.x/l,parseInt(h.getAttribute("y"),10)/l+n.frame.y/l,parseInt(h.getAttribute("width"),10)/l,parseInt(h.getAttribute("height"),10)/l);r.chars[d]={xOffset:parseInt(h.getAttribute("xoffset"),10)/l,yOffset:parseInt(h.getAttribute("yoffset"),10)/l,xAdvance:parseInt(h.getAttribute("xadvance"),10)/l,kerning:{},texture:new i.Texture(n.baseTexture,p)}}for(var f=e.getElementsByTagName("kerning"),g=0;g<f.length;g++){var m=f[g],v=parseInt(m.getAttribute("first"),10)/l,y=parseInt(m.getAttribute("second"),10)/l,b=parseInt(m.getAttribute("amount"),10)/l;r.chars[y]&&(r.chars[y].kerning[v]=b)}return t.fonts[r.font]=r,r},r(t,[{key:"tint",get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&e>=0?e:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copy(e)}},{key:"font",get:function(){return this._font},set:function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=e.length>=2?parseInt(e[0],10):t.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),t}(i.Container);t.default=l,l.fonts={}},function(e,t,n){"use strict";var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=a(n(15)),o=a(n(17)),s=n(3);function a(e){return e&&e.__esModule?e:{default:e}}var l=r.DisplayObject,u=new r.Matrix;l.prototype._cacheAsBitmap=!1,l.prototype._cacheData=!1;var c=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(l.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t=void 0;e?(this._cacheData||(this._cacheData=new c),(t=this._cacheData).originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this._calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this._calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}}),l.prototype._renderCachedWebGL=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(e))},l.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.currentRenderer.flush();var n=this.getLocalBounds().clone();if(this._filters){var a=this._filters[0].padding;n.pad(a)}var l=e._activeRenderTarget,c=e.filterManager.filterStack,h=r.RenderTexture.create(0|n.width,0|n.height),d="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=d,o.default.addToCache(h.baseTexture,d),i.default.addToCache(h,d);var p=u;p.tx=-n.x,p.ty=-n.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,e.render(this,h,!0,p,!0),e.bindRenderTarget(l),e.filterManager.filterStack=c,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var f=new r.Sprite(h);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-n.x/n.width,f.anchor.y=-n.y/n.height,f.alpha=t,f._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},l.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(e))},l.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(),n=this.alpha;this.alpha=1;var a=e.context,l=r.RenderTexture.create(0|t.width,0|t.height),c="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=c,o.default.addToCache(l.baseTexture,c),i.default.addToCache(l,c);var h=u;this.transform.localTransform.copy(h),h.invert(),h.tx-=t.x,h.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,l,!0,h,!1),e.context=a,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var d=new r.Sprite(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-t.x/t.width,d.anchor.y=-t.y/t.height,d._bounds=this._bounds,d.alpha=n,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=d,this.containsPoint=d.containsPoint.bind(d)}},l.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},l.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},l.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,o.default.removeFromCache(this._cacheData.textureCacheId),i.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},l.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)}},function(e,t,n){"use strict";var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null}},function(e,t,n){"use strict";var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));r.DisplayObject.prototype.getGlobalPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Point,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(178);Object.defineProperty(t,"FXAAFilter",{enumerable:!0,get:function(){return h(r).default}});var i=n(179);Object.defineProperty(t,"NoiseFilter",{enumerable:!0,get:function(){return h(i).default}});var o=n(180);Object.defineProperty(t,"DisplacementFilter",{enumerable:!0,get:function(){return h(o).default}});var s=n(181);Object.defineProperty(t,"BlurFilter",{enumerable:!0,get:function(){return h(s).default}});var a=n(79);Object.defineProperty(t,"BlurXFilter",{enumerable:!0,get:function(){return h(a).default}});var l=n(83);Object.defineProperty(t,"BlurYFilter",{enumerable:!0,get:function(){return h(l).default}});var u=n(182);Object.defineProperty(t,"ColorMatrixFilter",{enumerable:!0,get:function(){return h(u).default}});var c=n(183);function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"VoidFilter",{enumerable:!0,get:function(){return h(c).default}})},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));n(8);var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.Filter);t.default=i},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));n(8);var o=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return i.noise=n,i.seed=r,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),t}(i.Filter);t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));n(8);var o=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=new i.Matrix;n.renderable=!1;var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=n,s.maskMatrix=o,s.uniforms.mapSampler=n._texture,s.uniforms.filterMatrix=o,s.uniforms.scale={x:1,y:1},null==r&&(r=20),s.scale=new i.Point(r,r),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,n){var r=1/n.destinationFrame.width*(n.size.width/t.size.width);this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*r,this.uniforms.scale.y=this.scale.y*r,e.applyFilter(this,t,n)},r(t,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),t}(i.Filter);t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=a(n(79)),s=a(n(83));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(n,r,a,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return u.blurXFilter=new o.default(n,r,a,l),u.blurYFilter=new s.default(n,r,a,l),u.padding=0,u.resolution=a||i.settings.RESOLUTION,u.quality=r||4,u.blur=n||8,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,n){var r=e.getRenderTarget(!0);this.blurXFilter.apply(e,t,r,!0),this.blurYFilter.apply(e,r,n,!1),e.returnRenderTarget(r)},r(t,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(e){this.blurYFilter._blendMode=e}}]),t}(i.Filter);t.default=l},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));n(8);var o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return n.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],n.alpha=1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._loadMatrix=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n},t.prototype._multiply=function(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e},t.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(e,t){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.greyscale=function(e,t){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},t.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var n=Math.cos(e),r=Math.sin(e),i=1/3,o=(0,Math.sqrt)(i),s=[n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(s,t)},t.prototype.contrast=function(e,t){var n=(e||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.saturate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=2*e/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],e)},t.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},t.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},t.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},t.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},t.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},t.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},t.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},t.prototype.colorTone=function(e,t,n,r,i){var o=((n=n||16770432)>>16&255)/255,s=(n>>8&255)/255,a=(255&n)/255,l=((r=r||3375104)>>16&255)/255,u=(r>>8&255)/255,c=(255&r)/255,h=[.3,.59,.11,0,0,o,s,a,e=e||.2,0,l,u,c,t=t||.15,0,o-l,s-u,a-c,0,0];this._loadMatrix(h,i)},t.prototype.night=function(e,t){var n=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.predator=function(e,t){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},r(t,[{key:"matrix",get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),t}(i.Filter);t.default=o,o.prototype.grayscale=o.prototype.greyscale},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));n(8);var i=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return n.glShaderKey="void",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.Filter);t.default=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(84);Object.defineProperty(t,"InteractionData",{enumerable:!0,get:function(){return l(r).default}});var i=n(185);Object.defineProperty(t,"InteractionManager",{enumerable:!0,get:function(){return l(i).default}});var o=n(87);Object.defineProperty(t,"interactiveTarget",{enumerable:!0,get:function(){return l(o).default}});var s=n(86);Object.defineProperty(t,"InteractionTrackingData",{enumerable:!0,get:function(){return l(s).default}});var a=n(85);function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"InteractionEvent",{enumerable:!0,get:function(){return l(a).default}})},function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=c(n(84)),s=c(n(85)),a=c(n(86)),l=c(n(14)),u=c(n(87));function c(e){return e&&e.__esModule?e:{default:e}}i.utils.mixins.delayMixin(i.DisplayObject.prototype,u.default);var h="MOUSE",d={target:null,data:{global:null}},p=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return r=r||{},a.renderer=n,a.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,a.interactionFrequency=r.interactionFrequency||10,a.mouse=new o.default,a.mouse.identifier=h,a.mouse.global.set(-999999),a.activeInteractionData={},a.activeInteractionData[h]=a.mouse,a.interactionDataPool=[],a.eventData=new s.default,a.interactionDOMElement=null,a.moveWhenInside=!1,a.eventsAdded=!1,a.mouseOverRenderer=!1,a.supportsTouchEvents="ontouchstart"in window,a.supportsPointerEvents=!!window.PointerEvent,a.onPointerUp=a.onPointerUp.bind(a),a.processPointerUp=a.processPointerUp.bind(a),a.onPointerCancel=a.onPointerCancel.bind(a),a.processPointerCancel=a.processPointerCancel.bind(a),a.onPointerDown=a.onPointerDown.bind(a),a.processPointerDown=a.processPointerDown.bind(a),a.onPointerMove=a.onPointerMove.bind(a),a.processPointerMove=a.processPointerMove.bind(a),a.onPointerOut=a.onPointerOut.bind(a),a.processPointerOverOut=a.processPointerOverOut.bind(a),a.onPointerOver=a.onPointerOver.bind(a),a.cursorStyles={default:"inherit",pointer:"pointer"},a.currentCursorMode=null,a.cursor=null,a._tempPoint=new i.Point,a.resolution=1,a.setTargetElement(a.renderer.view,a.renderer.resolution),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.hitTest=function(e,t){return d.target=null,d.data.global=e,t||(t=this.renderer._lastObjectRendered),this.processInteractive(d,t,null,!0),d.target},t.prototype.setTargetElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents()},t.prototype.addEvents=function(){this.interactionDOMElement&&(i.ticker.shared.add(this.update,this,i.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){this.interactionDOMElement&&(i.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.update=function(e){if(this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var n=this.activeInteractionData[t];if(n.originalEvent&&"touch"!==n.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(void 0===t?"undefined":r(t)){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,t,n){n.stopped||(n.currentTarget=e,n.type=t,e.emit(t,n),e[t]&&e[t](n))},t.prototype.mapPositionToPoint=function(e,t,n){var r=void 0;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=navigator.isCocoonJS?this.resolution:1/this.resolution;e.x=(t-r.left)*(this.interactionDOMElement.width/r.width)*i,e.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},t.prototype.processInteractive=function(e,t,n,r,i){if(!t||!t.visible)return!1;var o=e.data.global,s=!1,a=i=t.interactive||i;if(t.hitArea?a=!1:r&&t._mask&&(t._mask.containsPoint(o)||(r=!1)),t.interactiveChildren&&t.children)for(var l=t.children,u=l.length-1;u>=0;u--){var c=l[u],h=this.processInteractive(e,c,n,r,a);if(h){if(!c.parent)continue;a=!1,h&&(e.target&&(r=!1),s=!0)}}return i&&(r&&!e.target&&(t.hitArea?(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(s=!0)):t.containsPoint&&t.containsPoint(o)&&(s=!0)),t.interactive&&(s&&!e.target&&(e.target=t),n&&n(e,t,!!s))),s},t.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&e.preventDefault();for(var n=t.length,r=0;r<n;r++){var i=t[r],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(s.data.originalEvent=e,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===i.pointerType)this.emit("touchstart",s);else if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,t,n){var r=e.data,i=e.data.identifier;if(n)if(t.trackedPointers[i]||(t.trackedPointers[i]=new a.default(i)),this.dispatchEvent(t,"pointerdown",e),"touch"===r.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?t.trackedPointers[i].rightDown=!0:t.trackedPointers[i].leftDown=!0,this.dispatchEvent(t,o?"rightdown":"mousedown",e)}},t.prototype.onPointerComplete=function(e,t,n){for(var r=this.normalizeToPointerData(e),i=r.length,o=e.target!==this.interactionDOMElement?"outside":"",s=0;s<i;s++){var a=r[s],l=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(u.data.originalEvent=e,this.processInteractive(u,this.renderer._lastObjectRendered,n,t||!o),this.emit(t?"pointercancel":"pointerup"+o,u),"mouse"===a.pointerType||"pen"===a.pointerType){var c=2===a.button;this.emit(c?"rightup"+o:"mouseup"+o,u)}else"touch"===a.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(a.pointerId,l))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,t){var n=e.data,r=e.data.identifier;void 0!==t.trackedPointers[r]&&(delete t.trackedPointers[r],this.dispatchEvent(t,"pointercancel",e),"touch"===n.pointerType&&this.dispatchEvent(t,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,t,n){var r=e.data,i=e.data.identifier,o=t.trackedPointers[i],s="touch"===r.pointerType;if("mouse"===r.pointerType||"pen"===r.pointerType){var l=2===r.button,u=a.default.FLAGS,c=l?u.RIGHT_DOWN:u.LEFT_DOWN,h=void 0!==o&&o.flags&c;n?(this.dispatchEvent(t,l?"rightup":"mouseup",e),h&&this.dispatchEvent(t,l?"rightclick":"click",e)):h&&this.dispatchEvent(t,l?"rightupoutside":"mouseupoutside",e),o&&(l?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(t,"pointerup",e),s&&this.dispatchEvent(t,"touchend",e),o&&(this.dispatchEvent(t,"pointertap",e),s&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),s&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[i]},t.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"===t[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var n=t.length,r=0;r<n;r++){var i=t[r],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=e;var a="touch"!==i.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===i.pointerType&&this.emit("touchmove",s),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",s)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,t,n){var r=e.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(e,t,n),this.moveWhenInside&&!n||(this.dispatchEvent(t,"pointermove",e),i&&this.dispatchEvent(t,"touchmove",e),o&&this.dispatchEvent(t,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e)[0];"mouse"===t.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},t.prototype.processPointerOverOut=function(e,t,n){var r=e.data,i=e.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,s=t.trackedPointers[i];n&&!s&&(s=t.trackedPointers[i]=new a.default(i)),void 0!==s&&(n&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(t,"pointerover",e),o&&this.dispatchEvent(t,"mouseover",e)),o&&null===this.cursor&&(this.cursor=t.cursor)):s.over&&(s.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),o&&this.dispatchEvent(t,"mouseout",e),s.none&&delete t.trackedPointers[i]))},t.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e)[0],n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,"mouse"===t.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.emit("mouseover",r)},t.prototype.getInteractionDataForPointerId=function(e){var t=e.pointerId,n=void 0;return t===h||"mouse"===e.pointerType?n=this.mouse:this.activeInteractionData[t]?n=this.activeInteractionData[t]:((n=this.interactionDataPool.pop()||new o.default).identifier=t,this.activeInteractionData[t]=n),n._copyEvent(e),n},t.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t._reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(e,t,n){return e.data=n,this.mapPositionToPoint(n.global,t.clientX,t.clientY),navigator.isCocoonJS&&"touch"===t.pointerType&&(n.global.x=n.global.x/this.resolution,n.global.y=n.global.y/this.resolution),"touch"===t.pointerType&&(t.globalX=n.global.x,t.globalY=n.global.y),n.originalEvent=t,e._reset(),e},t.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,r=e.changedTouches.length;n<r;n++){var i=e.changedTouches[n];void 0===i.button&&(i.button=e.touches.length?1:0),void 0===i.buttons&&(i.buttons=e.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),i.twist=0,i.tangentialPressure=0,void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,t.push(i)}else!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent?t.push(e):(void 0===e.isPrimary&&(e.isPrimary=!0),void 0===e.width&&(e.width=1),void 0===e.height&&(e.height=1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="mouse"),void 0===e.pointerId&&(e.pointerId=h),void 0===e.pressure&&(e.pressure=.5),e.twist=0,e.tangentialPressure=0,e.isNormalized=!0,t.push(e));return t},t.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},t}(l.default);t.default=p,i.WebGLRenderer.registerPlugin("interaction",p),i.CanvasRenderer.registerPlugin("interaction",p)},function(e,t,n){"use strict";t.__esModule=!0,t.shared=t.Resource=t.textureParser=t.getResourcePath=t.spritesheetParser=t.parseBitmapFontData=t.bitmapFontParser=t.Loader=void 0;var r=n(88);Object.defineProperty(t,"bitmapFontParser",{enumerable:!0,get:function(){return u(r).default}}),Object.defineProperty(t,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var i=n(93);Object.defineProperty(t,"spritesheetParser",{enumerable:!0,get:function(){return u(i).default}}),Object.defineProperty(t,"getResourcePath",{enumerable:!0,get:function(){return i.getResourcePath}});var o=n(94);Object.defineProperty(t,"textureParser",{enumerable:!0,get:function(){return u(o).default}});var s=n(22);Object.defineProperty(t,"Resource",{enumerable:!0,get:function(){return s.Resource}});var a=u(n(75)),l=u(n(188));function u(e){return e&&e.__esModule?e:{default:e}}t.Loader=l.default;var c=new l.default;c.destroy=function(){},t.shared=c;var h=a.default.prototype;h._loader=null,Object.defineProperty(h,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?c:new l.default}return this._loader}}),h._parentDestroy=h.destroy,h.destroy=function(e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e)}},function(e,t,n){"use strict";t.__esModule=!0,t.Loader=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(89)),s=u(n(90)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(91)),l=n(43);function u(e){return e&&e.__esModule?e:{default:e}}var c=/(#[\w-]+)?$/,h=t.Loader=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=n,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,n){return t._loadResource(e,n)},this._queue=a.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default;for(var i=0;i<e._defaultBeforeMiddleware.length;++i)this.pre(e._defaultBeforeMiddleware[i]);for(var s=0;s<e._defaultAfterMiddleware.length;++s)this.use(e._defaultAfterMiddleware[s])}return e.prototype.add=function(e,t,n,i){if(Array.isArray(e)){for(var o=0;o<e.length;++o)this.add(e[o]);return this}if("object"===(void 0===e?"undefined":r(e))&&(i=t||e.callback||e.onComplete,n=e,t=e.url,e=e.name||e.key||e.url),"string"!=typeof t&&(i=n,n=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(i=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new l.Resource(e,t,n),"function"==typeof i&&this.resources[e].onAfterMiddleware.once(i),this.loading){for(var s=n.parentResource,a=[],u=0;u<s.children.length;++u)s.children[u].isComplete||a.push(s.children[u]);var c=s.progressChunk*(a.length+1)/(a.length+2);s.children.push(this.resources[e]),s.progressChunk=c;for(var h=0;h<a.length;++h)a[h].progressChunk=c;this.resources[e].progressChunk=c}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},e.prototype._prepareUrl=function(e){var t=(0,s.default)(e,{strictMode:!0}),n=void 0;if(n=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var r=c.exec(n)[0];-1!==(n=n.substr(0,n.length-r.length)).indexOf("?")?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=r}return n},e.prototype._loadResource=function(e,t){var n=this;e._dequeue=t,a.eachSeries(this._beforeMiddleware,(function(t,r){t.call(n,e,(function(){r(e.isComplete?{}:null)}))}),(function(){e.isComplete?n._onLoad(e):(e._onLoadBinding=e.onComplete.once(n._onLoad,n),e.load())}),!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),a.eachSeries(this._afterMiddleware,(function(n,r){n.call(t,e,r)}),(function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()}),!0)},i(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),e}();h._defaultBeforeMiddleware=[],h._defaultAfterMiddleware=[],h.pre=function(e){return h._defaultBeforeMiddleware.push(e),h},h.use=function(e){return h._defaultAfterMiddleware.push(e),h}},function(e,t,n){"use strict";t.__esModule=!0;var r=u(n(22)),i=n(189),o=u(n(14)),s=u(n(94)),a=u(n(93)),l=u(n(88));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));o.default.call(i);for(var s=0;s<t._pixiMiddleware.length;++s)i.use(t._pixiMiddleware[s]());return i.onStart.add((function(e){return i.emit("start",e)})),i.onProgress.add((function(e,t){return i.emit("progress",e,t)})),i.onError.add((function(e,t,n){return i.emit("error",e,t,n)})),i.onLoad.add((function(e,t){return i.emit("load",e,t)})),i.onComplete.add((function(e,t){return i.emit("complete",e,t)})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.addPixiMiddleware=function(e){t._pixiMiddleware.push(e)},t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},t}(r.default);for(var h in t.default=c,o.default.prototype)c.prototype[h]=o.default.prototype[h];c._pixiMiddleware=[i.blobMiddlewareFactory,s.default,a.default,l.default];var d=r.default.Resource;d.setExtensionXhrType("fnt",d.XHR_RESPONSE_TYPE.DOCUMENT)},function(e,t,n){"use strict";t.__esModule=!0,t.blobMiddlewareFactory=function(){return function(e,t){if(e.data){if(e.xhr&&e.xhrType===r.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var n=o.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=n,e.type=r.Resource.TYPE.IMAGE,void(e.data.onload=function(){o.revokeObjectURL(n),e.data.onload=null,t()})}}else{var s=e.xhr.getResponseHeader("content-type");if(s&&0===s.indexOf("image"))return e.data=new Image,e.data.src="data:"+s+";base64,"+(0,i.encodeBinary)(e.xhr.responseText),e.type=r.Resource.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}};var r=n(43),i=n(92),o=window.URL||window.webkitURL},function(e,t,n){"use strict";t.__esModule=!0;var r=n(23);Object.defineProperty(t,"Mesh",{enumerable:!0,get:function(){return u(r).default}});var i=n(191);Object.defineProperty(t,"MeshRenderer",{enumerable:!0,get:function(){return u(i).default}});var o=n(192);Object.defineProperty(t,"CanvasMeshRenderer",{enumerable:!0,get:function(){return u(o).default}});var s=n(95);Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return u(s).default}});var a=n(193);Object.defineProperty(t,"NineSlicePlane",{enumerable:!0,get:function(){return u(a).default}});var l=n(194);function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Rope",{enumerable:!0,get:function(){return u(l).default}})},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=s(n(7)),o=s(n(23));n(8);function s(e){return e&&e.__esModule?e:{default:e}}var a=r.Matrix.IDENTITY,l=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.shader=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new r.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},t.prototype.render=function(e){var t=this.renderer,n=t.gl,s=e._texture;if(s.valid){var l=e._glDatas[t.CONTEXT_UID];l||(t.bindVao(null),(l={shader:this.shader,vertexBuffer:i.default.GLBuffer.createVertexBuffer(n,e.vertices,n.STREAM_DRAW),uvBuffer:i.default.GLBuffer.createVertexBuffer(n,e.uvs,n.STREAM_DRAW),indexBuffer:i.default.GLBuffer.createIndexBuffer(n,e.indices,n.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty}).vao=new i.default.VertexArrayObject(n).addIndex(l.indexBuffer).addAttribute(l.vertexBuffer,l.shader.attributes.aVertexPosition,n.FLOAT,!1,8,0).addAttribute(l.uvBuffer,l.shader.attributes.aTextureCoord,n.FLOAT,!1,8,0),e._glDatas[t.CONTEXT_UID]=l),t.bindVao(l.vao),e.dirty!==l.dirty&&(l.dirty=e.dirty,l.uvBuffer.upload(e.uvs)),e.indexDirty!==l.indexDirty&&(l.indexDirty=e.indexDirty,l.indexBuffer.upload(e.indices)),l.vertexBuffer.upload(e.vertices),t.bindShader(l.shader),l.shader.uniforms.uSampler=t.bindTexture(s),t.state.setBlendMode(r.utils.correctBlendMode(e.blendMode,s.baseTexture.premultipliedAlpha)),l.shader.uniforms.uTransform&&(e.uploadUvTransform?l.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):l.shader.uniforms.uTransform=a.toArray(!0)),l.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),l.shader.uniforms.uColor=r.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,l.shader.uniforms.uColor,s.baseTexture.premultipliedAlpha);var u=e.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?n.TRIANGLE_STRIP:n.TRIANGLES;l.vao.draw(u,e.indices.length,0)}},t}(r.ObjectRenderer);t.default=l,r.WebGLRenderer.registerPlugin("mesh",l)},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=n(23),s=(r=o)&&r.__esModule?r:{default:r};var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,n=t.context,r=e.worldTransform,i=t.resolution;t.roundPixels?n.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i|0,r.ty*i|0):n.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),t.setBlendMode(e.blendMode),e.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},e.prototype._renderTriangleMesh=function(e){for(var t=e.vertices.length/2,n=0;n<t-2;n++){var r=2*n;this._renderDrawTriangle(e,r,r+2,r+4)}},e.prototype._renderTriangles=function(e){for(var t=e.indices,n=t.length,r=0;r<n;r+=3){var i=2*t[r],o=2*t[r+1],s=2*t[r+2];this._renderDrawTriangle(e,i,o,s)}},e.prototype._renderDrawTriangle=function(e,t,n,r){var i=this.renderer.context,o=e.uvs,s=e.vertices,a=e._texture;if(a.valid){var l=a.baseTexture,u=l.source,c=l.width,h=l.height,d=void 0,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0;if(e.uploadUvTransform){var y=e._uvTransform.mapCoord;d=(o[t]*y.a+o[t+1]*y.c+y.tx)*l.width,p=(o[n]*y.a+o[n+1]*y.c+y.tx)*l.width,f=(o[r]*y.a+o[r+1]*y.c+y.tx)*l.width,g=(o[t]*y.b+o[t+1]*y.d+y.ty)*l.height,m=(o[n]*y.b+o[n+1]*y.d+y.ty)*l.height,v=(o[r]*y.b+o[r+1]*y.d+y.ty)*l.height}else d=o[t]*l.width,p=o[n]*l.width,f=o[r]*l.width,g=o[t+1]*l.height,m=o[n+1]*l.height,v=o[r+1]*l.height;var b=s[t],_=s[n],T=s[r],x=s[t+1],w=s[n+1],E=s[r+1];if(e.canvasPadding>0){var S=e.canvasPadding/e.worldTransform.a,M=e.canvasPadding/e.worldTransform.d,I=(b+_+T)/3,P=(x+w+E)/3,A=b-I,O=x-P,C=Math.sqrt(A*A+O*O);b=I+A/C*(C+S),x=P+O/C*(C+M),O=w-P,_=I+(A=_-I)/(C=Math.sqrt(A*A+O*O))*(C+S),w=P+O/C*(C+M),O=E-P,T=I+(A=T-I)/(C=Math.sqrt(A*A+O*O))*(C+S),E=P+O/C*(C+M)}i.save(),i.beginPath(),i.moveTo(b,x),i.lineTo(_,w),i.lineTo(T,E),i.closePath(),i.clip();var R=d*m+g*f+p*v-m*f-g*p-d*v,k=b*m+g*T+_*v-m*T-g*_-b*v,D=d*_+b*f+p*T-_*f-b*p-d*T,L=d*m*T+g*_*f+b*p*v-b*m*f-g*p*T-d*_*v,N=x*m+g*E+w*v-m*E-g*w-x*v,U=d*w+x*f+p*E-w*f-x*p-d*E,F=d*m*E+g*w*f+x*p*v-x*m*f-g*p*E-d*w*v;i.transform(k/R,N/R,D/R,U/R,L/R,F/R),i.drawImage(u,0,0,c*l.resolution,h*l.resolution,0,0,c,h),i.restore(),this.renderer.invalidateBlendMode()}},e.prototype.renderMeshFlat=function(e){var t=this.renderer.context,n=e.vertices,r=n.length/2;t.beginPath();for(var i=1;i<r-2;++i){var o=2*i,s=n[o],a=n[o+1],l=n[o+2],u=n[o+3],c=n[o+4],h=n[o+5];t.moveTo(s,a),t.lineTo(l,u),t.lineTo(c,h)}t.fillStyle="#FF0000",t.fill(),t.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();t.default=a,i.CanvasRenderer.registerPlugin("mesh",a)},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(95),s=(r=o)&&r.__esModule?r:{default:r};var a=10,l=function(e){function t(n,r,i,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,4,4));return l._origWidth=n.orig.width,l._origHeight=n.orig.height,l._width=l._origWidth,l._height=l._origHeight,l.leftWidth=void 0!==r?r:a,l.rightWidth=void 0!==o?o:a,l.topHeight=void 0!==i?i:a,l.bottomHeight=void 0!==s?s:a,l.refresh(!0),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateHorizontalVertices=function(){var e=this.vertices;e[9]=e[11]=e[13]=e[15]=this._topHeight,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices;e[2]=e[10]=e[18]=e[26]=this._leftWidth,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._renderCanvas=function(e){var t=e.context;t.globalAlpha=this.worldAlpha;var n=this.worldTransform,r=e.resolution;e.roundPixels?t.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):t.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r);var i=this._texture.baseTexture,o=i.source,s=i.width,a=i.height;this.drawSegment(t,o,s,a,0,1,10,11),this.drawSegment(t,o,s,a,2,3,12,13),this.drawSegment(t,o,s,a,4,5,14,15),this.drawSegment(t,o,s,a,8,9,18,19),this.drawSegment(t,o,s,a,10,11,20,21),this.drawSegment(t,o,s,a,12,13,22,23),this.drawSegment(t,o,s,a,16,17,26,27),this.drawSegment(t,o,s,a,18,19,28,29),this.drawSegment(t,o,s,a,20,21,30,31)},t.prototype.drawSegment=function(e,t,n,r,i,o,s,a){var l=this.uvs,u=this.vertices,c=(l[s]-l[i])*n,h=(l[a]-l[o])*r,d=u[s]-u[i],p=u[a]-u[o];c<1&&(c=1),h<1&&(h=1),d<1&&(d=1),p<1&&(p=1),e.drawImage(t,l[i]*n,l[o]*r,c,h,u[i],u[o],d,p)},t.prototype._refresh=function(){e.prototype._refresh.call(this);var t=this.uvs,n=this._texture;this._origWidth=n.orig.width,this._origHeight=n.orig.height;var r=1/this._origWidth,i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},i(t,[{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(23);var o=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return i.points=r,i.vertices=new Float32Array(4*r.length),i.uvs=new Float32Array(4*r.length),i.colors=new Float32Array(2*r.length),i.indices=new Uint16Array(2*r.length),i.autoUpdate=!0,i.refresh(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length));var t=this.uvs,n=this.indices,r=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,r[0]=1,r[1]=1,n[0]=0,n[1]=1;for(var i=e.length,o=1;o<i;o++){var s=4*o,a=o/(i-1);t[s]=a,t[s+1]=0,t[s+2]=a,t[s+3]=1,r[s=2*o]=1,r[s+1]=1,n[s=2*o]=s,n[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},t.prototype.refreshVertices=function(){var e=this.points;if(!(e.length<1))for(var t=e[0],n=void 0,r=0,i=0,o=this.vertices,s=e.length,a=0;a<s;a++){var l=e[a],u=4*a;i=-((n=a<e.length-1?e[a+1]:l).x-t.x),r=n.y-t.y;var c=10*(1-a/(s-1));c>1&&(c=1);var h=Math.sqrt(r*r+i*i),d=this._texture.height/2;r/=h,i/=h,r*=d,i*=d,o[u]=l.x+r,o[u+1]=l.y+i,o[u+2]=l.x-r,o[u+3]=l.y-i,t=l}},t.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},t}(((r=i)&&r.__esModule?r:{default:r}).default);t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r=n(196);Object.defineProperty(t,"ParticleContainer",{enumerable:!0,get:function(){return o(r).default}});var i=n(197);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"ParticleRenderer",{enumerable:!0,get:function(){return o(i).default}})},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=n(3);var s=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return o>16384&&(o=16384),o>n&&(o=n),a._properties=[!1,!0,!1,!1,!1],a._maxSize=n,a._batchSize=o,a._glBuffers={},a._bufferToUpdate=0,a.interactiveChildren=!1,a.blendMode=i.BLEND_MODES.NORMAL,a.autoResize=s,a.roundPixels=!0,a.baseTexture=null,a.setProperties(r),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]="scale"in e?!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="alpha"in e||"tint"in e?!!e.alpha||!!e.tint:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",(function(){return t.onChildrenChange(0)}))),e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){var t=Math.floor(e/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,n=this.worldTransform,r=!0,i=0,o=0,s=0,a=0;e.setBlendMode(this.blendMode),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var u=this.children[l];if(u.visible){var c=u._texture.frame;if(t.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)r&&(t.setTransform(n.a,n.b,n.c,n.d,n.tx*e.resolution,n.ty*e.resolution),r=!1),i=u.anchor.x*(-c.width*u.scale.x)+u.position.x+.5,o=u.anchor.y*(-c.height*u.scale.y)+u.position.y+.5,s=c.width*u.scale.x,a=c.height*u.scale.y;else{r||(r=!0),u.displayObjectUpdateTransform();var h=u.worldTransform;e.roundPixels?t.setTransform(h.a,h.b,h.c,h.d,h.tx*e.resolution|0,h.ty*e.resolution|0):t.setTransform(h.a,h.b,h.c,h.d,h.tx*e.resolution,h.ty*e.resolution),i=u.anchor.x*-c.width+.5,o=u.anchor.y*-c.height+.5,s=c.width,a=c.height}var d=u._texture.baseTexture.resolution;t.drawImage(u._texture.baseTexture.source,c.x*d,c.y*d,c.width*d,c.height*d,i*e.resolution,o*e.resolution,s*e.resolution,a*e.resolution)}}}},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._buffers)for(var n=0;n<this._buffers.length;++n)this._buffers[n].destroy();this._properties=null,this._buffers=null},r(t,[{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,(0,o.hex2rgb)(e,this.tintRgb)}}]),t}(i.Container);t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=a(n(198)),o=a(n(199)),s=n(3);function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return i.shader=null,i.indexBuffer=null,i.properties=null,i.tempMatrix=new r.Matrix,i.CONTEXT_UID=0,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new i.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(e){var t=e.children,n=e._maxSize,i=e._batchSize,o=this.renderer,s=t.length;if(0!==s){s>n&&(s=n);var a=e._glBuffers[o.CONTEXT_UID];a||(a=e._glBuffers[o.CONTEXT_UID]=this.generateBuffers(e));var l=t[0]._texture.baseTexture;this.renderer.setBlendMode(r.utils.correctBlendMode(e.blendMode,l.premultipliedAlpha));var u=o.gl,c=e.worldTransform.copy(this.tempMatrix);c.prepend(o._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=c.toArray(!0),this.shader.uniforms.uColor=r.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,l.premultipliedAlpha),this.shader.uniforms.uSampler=o.bindTexture(l);for(var h=0,d=0;h<s;h+=i,d+=1){var p=s-h;if(p>i&&(p=i),d>=a.length){if(!e.autoResize)break;a.push(this._generateOneMoreBuffer(e))}var f=a[d];f.uploadDynamic(t,h,p),e._bufferToUpdate===d&&(f.uploadStatic(t,h,p),e._bufferToUpdate=d+1),o.bindVao(f.vao),f.vao.draw(u.TRIANGLES,6*p)}}},t.prototype.generateBuffers=function(e){for(var t=this.renderer.gl,n=[],r=e._maxSize,i=e._batchSize,s=e._properties,a=0;a<r;a+=i)n.push(new o.default(t,this.properties,s,i));return n},t.prototype._generateOneMoreBuffer=function(e){var t=this.renderer.gl,n=e._batchSize,r=e._properties;return new o.default(t,this.properties,r,n)},t.prototype.uploadVertices=function(e,t,n,r,i,o){for(var s=0,a=0,l=0,u=0,c=0;c<n;++c){var h=e[t+c],d=h._texture,p=h.scale.x,f=h.scale.y,g=d.trim,m=d.orig;g?(s=(a=g.x-h.anchor.x*m.width)+g.width,l=(u=g.y-h.anchor.y*m.height)+g.height):(s=m.width*(1-h.anchor.x),a=m.width*-h.anchor.x,l=m.height*(1-h.anchor.y),u=m.height*-h.anchor.y),r[o]=a*p,r[o+1]=u*f,r[o+i]=s*p,r[o+i+1]=u*f,r[o+2*i]=s*p,r[o+2*i+1]=l*f,r[o+3*i]=a*p,r[o+3*i+1]=l*f,o+=4*i}},t.prototype.uploadPosition=function(e,t,n,r,i,o){for(var s=0;s<n;s++){var a=e[t+s].position;r[o]=a.x,r[o+1]=a.y,r[o+i]=a.x,r[o+i+1]=a.y,r[o+2*i]=a.x,r[o+2*i+1]=a.y,r[o+3*i]=a.x,r[o+3*i+1]=a.y,o+=4*i}},t.prototype.uploadRotation=function(e,t,n,r,i,o){for(var s=0;s<n;s++){var a=e[t+s].rotation;r[o]=a,r[o+i]=a,r[o+2*i]=a,r[o+3*i]=a,o+=4*i}},t.prototype.uploadUvs=function(e,t,n,r,i,o){for(var s=0;s<n;++s){var a=e[t+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+i]=a.x1,r[o+i+1]=a.y1,r[o+2*i]=a.x2,r[o+2*i+1]=a.y2,r[o+3*i]=a.x3,r[o+3*i+1]=a.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},t.prototype.uploadTint=function(e,t,n,r,i,o){for(var a=0;a<n;++a){var l=e[t+a],u=l._texture.baseTexture.premultipliedAlpha,c=l.alpha,h=c<1&&u?(0,s.premultiplyTint)(l._tintRGB,c):l._tintRGB+(255*c<<24);r[o]=h,r[o+i]=h,r[o+2*i]=h,r[o+3*i]=h,o+=4*i}},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},t}(r.ObjectRenderer);t.default=l,r.WebGLRenderer.registerPlugin("particle",l)},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(21);var o=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(7)),i=o(n(41));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<n.length;++o){var s=n[o];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},r[o]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.gl,t=0;this.indices=(0,i.default)(this.size),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var o=this.dynamicProperties[n];o.offset=t,t+=o.size,this.dynamicStride+=o.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=r.default.GLBuffer.createVertexBuffer(e,s,e.STREAM_DRAW);var a=0;this.staticStride=0;for(var l=0;l<this.staticProperties.length;++l){var u=this.staticProperties[l];u.offset=a,a+=u.size,this.staticStride+=u.size}var c=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(c),this.staticDataUint32=new Uint32Array(c),this.staticBuffer=r.default.GLBuffer.createVertexBuffer(e,c,e.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(e).addIndex(this.indexBuffer);for(var h=0;h<this.dynamicProperties.length;++h){var d=this.dynamicProperties[h];d.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,d.attribute,e.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*d.offset):this.vao.addAttribute(this.dynamicBuffer,d.attribute,e.FLOAT,!1,4*this.dynamicStride,4*d.offset)}for(var p=0;p<this.staticProperties.length;++p){var f=this.staticProperties[p];f.unsignedByte?this.vao.addAttribute(this.staticBuffer,f.attribute,e.UNSIGNED_BYTE,!0,4*this.staticStride,4*f.offset):this.vao.addAttribute(this.staticBuffer,f.attribute,e.FLOAT,!1,4*this.staticStride,4*f.offset)}},e.prototype.uploadDynamic=function(e,t,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(e,t,n,i.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},e.prototype.uploadStatic=function(e,t,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(e,t,n,i.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},e.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},e}();t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var r=n(201);Object.defineProperty(t,"webgl",{enumerable:!0,get:function(){return l(r).default}});var i=n(202);Object.defineProperty(t,"canvas",{enumerable:!0,get:function(){return l(i).default}});var o=n(44);Object.defineProperty(t,"BasePrepare",{enumerable:!0,get:function(){return l(o).default}});var s=n(96);Object.defineProperty(t,"CountLimiter",{enumerable:!0,get:function(){return l(s).default}});var a=n(203);function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"TimeLimiter",{enumerable:!0,get:function(){return l(a).default}})},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=n(44);var s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.uploadHookHelper=r.renderer,r.registerFindHook(u),r.registerUploadHook(a),r.registerUploadHook(l),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=o)&&r.__esModule?r:{default:r}).default);function a(e,t){return t instanceof i.BaseTexture&&(t._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(t),!0)}function l(e,t){return t instanceof i.Graphics&&((t.dirty||t.clearDirty||!t._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(t),!0)}function u(e,t){return e instanceof i.Graphics&&(t.push(e),!0)}t.default=s,i.WebGLRenderer.registerPlugin("prepare",s)},function(e,t,n){"use strict";t.__esModule=!0;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=n(44),s=(r=o)&&r.__esModule?r:{default:r};var a=16,l=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.uploadHookHelper=r,r.canvas=document.createElement("canvas"),r.canvas.width=a,r.canvas.height=a,r.ctx=r.canvas.getContext("2d"),r.registerUploadHook(u),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(s.default);function u(e,t){if(t instanceof i.BaseTexture){var n=t.source,r=0===n.width?e.canvas.width:Math.min(e.canvas.width,n.width),o=0===n.height?e.canvas.height:Math.min(e.canvas.height,n.height);return e.ctx.drawImage(n,0,0,r,o,0,0,e.canvas.width,e.canvas.height),!0}return!1}t.default=l,i.CanvasRenderer.registerPlugin("prepare",l)},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxMilliseconds=t,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();t.default=r},function(e,t){e.exports="2.0.8"},function(e,t,n){"use strict";(function(e,t){var r=n(0),i=n(97);let o=!1,s=!1,a=!1;const l=["","ffa","ctf","br","dev"],u=["","Free For All","Capture The Flag","Battle Royale","Development"],c=["","Everyone versus everyone deathmatch. No teams.","Players split into 2 teams. 2 flags are placed inside each base. The objective is to move the enemy flag from their base to your base.","Players spawn at random locations all across the map. Destroyed players will not respawn. Last player standing wins.","Game environments for development and testing."];let h={},d=0,p=null,f=null,g=!1,m=null,v=i.a,y=!1,b={},_={},T=null,x=!1,w={radius:0,pos:r.a.zero(),speed:0},E={};let S=0,M=null;Games.setup=function(){e("#playregion").on("click",(function(e){Games.updateRegion(!0,e)})),e("#playtype").on("click",(function(e){Games.updateType(!0,e)})),e("#open-menu").on("click",(function(e){Games.popGames(),e.stopPropagation()})),e("#gameselector").on("click",(function(e){e.stopPropagation()})),e("#invite-copy").on("click",Games.copyInviteLink),e("#loginbutton").on("click",(function(e){UI.openLogin(),e.stopPropagation()})),e("#login-microsoft").on("click",(function(){Games.popupLogin(1)})),e("#login-google").on("click",(function(){Games.popupLogin(2)})),e("#login-twitter").on("click",(function(){Games.popupLogin(3)})),e("#login-reddit").on("click",(function(){Games.popupLogin(4)})),e("#login-twitch").on("click",(function(){Games.popupLogin(5)})),e("#loginselector").on("click",(function(e){e.stopPropagation()})),e("#gotomainpage").on("click",Games.redirRoot),e("#lifetime-signin").on("click",Games.redirRoot),Tools.loadAuth()?Games.playerAuth():Games.playerGuest(),setInterval(Tools.syncRemoteSettings,1e3),Games.updateRegion(!1),Games.updateType(!1),F(),A((function(){O(),y||(k(),Games.updateRegion(!1),Games.updateType(!1))}),!0)};var I=function(e){"https://login.airmash.online"===e.origin?e.data.provider===S?(S=0,e.data.nonce===M?(M=null,window.loginSuccess({tokens:e.data.tokens,identityprovider:e.data.provider,loginname:e.data.loginname})):console.log("nonce does not match: "+e.data.nonce)):console.log("identity provider does not match: "+e.data.provider):console.log("bad origin for login message: "+e.origin)};Games.popupLogin=function(e){window.addEventListener("message",I,{once:!0}),S=e,M=Tools.randomID(32);let t=`https://login.airmash.online/login?provider=${S}&nonce=${M}&origin=${window.origin}`;P(t,"Login",4==e?900:500,5==e?800:600)};var P=function(e,t,n,r){let i=window.screenLeft?window.screenLeft:window.screenX,o=window.screenTop?window.screenTop:window.screenY,s=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-n/2+i,a=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-r/2+o;window.open(e,t,`width=${n}, height=${r}, top=${a}, left=${s}`)};window.loginSuccess=function(e){Tools.setAuth(e),Games.playerAuth(),UI.closeLogin()},window.loginFailure=function(){},Games.playerGuest=function(){UI.show("#playbutton",!0),UI.show("#loginbutton",!0)},Games.playerAuth=function(){Tools.ajaxGet(`https://${game.backendHost}/settings`,config.auth.tokens.settings,(function(t){if(null!=t){game.loggedIn=!0;let n=["","Microsoft","Google","Twitter","Reddit","Twitch"][config.auth.identityprovider||0],r=UI.escapeHTML((config.auth.loginname||"").substr(0,30)),i=(r+=`<span class="grey">(${n})</span>`)+'<span class="link" onclick="Games.logout()">Logout</span>',o="Logged in as "+r+'<span class="button" onclick="Games.logout()">LOG OUT</span>';e("#logout").html(i),e("#logout-mainmenu").html(o),e("#loginbutton").remove(),e("#lifetime-account").remove(),e("#playbutton").html("PLAY"),UI.show("#playbutton",!0),Tools.setSettings(t),Tools.applySettingsToGame()}else Games.playerGuest()}))},Games.logout=function(){Tools.setAuth({}),Tools.removeSetting("flag"),Tools.removeSetting("name"),window.location=window.location};var A=function(t,n){let r=`https://${game.backendHost}/games`;n&&(r+="?main=1"),e.ajax({url:r,dataType:"json",cache:!1,success:function(e){try{v=JSON.parse(e.data)}catch(e){return}"xx"==game.myFlag&&(game.myFlag=e.country),n&&game.protocol!=e.protocol&&("#reload"!==window.location.hash?Tools.ajaxPost(`https://${game.backendHost}/clienterror`,{type:"protocol"},(function(){UI.showMessage("alert",'<span class="mainerror">Protocol update<br>Your client is being updated to the new version</span>',3e4),setTimeout((function(){window.location="/?"+Tools.randomID(10)+"#reload"}),5e3)})):Tools.ajaxPost(`https://${game.backendHost}/clienterror`,{type:"protocolretry"})),t()},error:function(){}})},O=function(){let t=0,n=0;for(let e of v)for(let r of e.games)r.players&&(t+=r.players),r.bots&&(t-=r.bots),n++;if(0===n)y=!0,UI.showMessage("alert",'<span class="mainerror">We are currently performing server maintenance<br>Please try again in a few minutes</span>',3e4);else{let n='<div class="item smallerpad">'+t+"</div>player"+(t>1?"s":"")+" online";e("#gameinfo").html(n)}},C=function(e){if("closest"===e)return{name:"Closest"};for(let t of v)if(t.id===e)return t;return(game.playRegion="closest")?{name:"Closest"}:void 0},R=function(e,t){let n=C(e);if(!n||!n.games)return null;for(let e of n.games)if(e.id===t)return e;let r=l.indexOf(t);if(-1!=r)for(let e of n.games)if(e.type==r)return{name:u[r]};return null},k=function(){let e=window.location.hash;if("#reload"!==e&&null!=e&&!(e.length<4||e.length>20)){let t=(e=e.substr(1)).split("-");if(2==t.length){let[e,n]=t;null!=R(e,n)&&(game.playRegion=e,game.playRoom=n,game.playInvited=!0,history.replaceState(null,null,"/"))}}};Games.selectRegion=function(e,t){e.stopPropagation(),Sound.UIClick(),game.playRegion=t,Games.updateRegion(!1),Games.updateType()},Games.selectGame=function(e,t){e.stopPropagation(),Sound.UIClick(),game.playRoom=t,Games.updateType(!1)},Games.closeDropdowns=function(){s&&Games.updateType(!1),o&&Games.updateRegion(!1)},Games.updateRegion=function(t,n){let r,i="";if(!y){if(n&&(n.stopPropagation(),o||Sound.UIClick()),t&&UI.closeLogin(),null==t&&(t=o),t){s&&Games.updateType(!1),i+='<div class="item">',i+='<div class="region header">REGION</div>',i+='<div class="players header">PLAYERS</div>',i+='<div class="ping header">PING</div>',i+='<div class="clear"></div>',i+="</div>";let t="";null!=f&&(t='<span class="autoregion">('+v[f].name+")</span>"),i+='<div class="item selectable'+("closest"===game.playRegion?" sel":"")+'" onclick="Games.selectRegion(event, &quot;closest&quot;)">',i+='<div class="region chooser">Closest'+t+"</div>",i+='<div class="clear"></div>',i+="</div>";for(let e of v){let t=!1,n=0;for(let r of e.games)r.players&&(n+=r.players,t=!0),r.bots&&(n-=r.bots);t||(n='<span class="playersunknown">?</span>');let r="&nbsp;";e.ping&&(r=Math.round(e.ping)+'<span class="ms">ms</span>'),i+='<div class="item selectable'+(e.id===game.playRegion?" sel":"")+'" onclick="Games.selectRegion(event, &quot;'+e.id+'&quot;)">',i+='<div class="region chooser">'+e.name+"</div>",i+='<div class="players number">'+n+"</div>",i+='<div class="ping chooser nopadding">'+r+"</div>",i+='<div class="clear"></div>',i+="</div>"}i+='<div class="item"></div>',r={width:"240px",height:"auto","z-index":"2"},e("#playregion").removeClass("hoverable")}else i+='<div class="arrowdown"></div>',i+='<div class="playtop">REGION</div>',i+='<div class="playbottom">'+C(game.playRegion).name+"</div>",r={width:"130px",height:"40px","z-index":"auto"},e("#playregion").addClass("hoverable");e("#playregion").html(i),e("#playregion").css(r),o=t}};var D=function(){let e=game.playRegion;if("closest"===e){if(null==f)return null;e=v[f].id}return e},L=function(e){return`<div class="infott">${c[e]}<div class="arrow"></div></div>`};Games.updateType=function(t,n){let r="",i=null;if(!y){if(n&&(n.stopPropagation(),s||Sound.UIClick()),t&&UI.closeLogin(),null==t&&(t=s),t){o&&Games.updateRegion(!1),r+='<div class="item">',r+='<div class="gametype header">GAME</div>',r+='<div class="players header">PLAYERS</div>',r+='<div class="bots header">BOTS</div>',r+='<div class="clear"></div>',r+="</div>";let t=D();if(null==t)return;null==R(t,game.playRoom)&&(game.playRoom=l[1]);let n=[[],[],[],[],[],[],[],[],[]],s=C(t).games;for(let e of s)n[e.type].push(e);for(let e=1;e<l.length;e++)if(n[e].length>0){r+='<div class="item selectable'+(l[e]===game.playRoom?" sel":"")+'" onclick="Games.selectGame(event, &quot;'+l[e]+'&quot;)">',r+='<div class="gametype chooser">'+u[e],r+='<span class="infocontainer">&nbsp;<div class="infoicon">'+L(e)+"</div></span>",r+="</div>",r+='<div class="clear"></div>',r+="</div>";for(let t of n[e])r+='<div class="item selectable'+(t.id===game.playRoom?" sel":"")+'" onclick="Games.selectGame(event, &quot;'+t.id+'&quot;)">',r+='<div class="gametype chooser">'+t.nameShort+"</div>",r+='<div class="players number">'+(null!=t.players?t.players-(t.bots||0):'<span class="playersunknown">?</span>')+"</div>",r+='<div class="bots number">'+(t.bots?`+${t.bots}`:"")+"</div>",r+='<div class="clear"></div>',r+="</div>"}r+='<div class="item"></div>',i={width:"280px",height:"auto","z-index":"2"},e("#playtype").removeClass("hoverable")}else{r+='<div class="arrowdown"></div>',r+='<div class="playtop">GAME</div>';let t=D();if(null==t)return;let n=R(t,game.playRoom);null==n?(name=u[1],game.playRoom=l[1]):name=n.name,r+='<div class="playbottom">'+name+"</div>",i={width:"190px",height:"40px","z-index":"auto"},e("#playtype").addClass("hoverable")}e("#playtype").html(r),e("#playtype").css(i),s=t}},Games.popGames=function(){if(!a){UI.closeAllPanels("games");let t=N();UI.hide("#menu"),e("#gameselector").html(t),UI.show("#gameselector"),a=!0,U(),Sound.UIClick()}};var N=function(){let e="";e+='<div class="header">'+game.roomNameShort,e+='<span class="region">&nbsp;&nbsp;&bull;&nbsp;&nbsp;'+game.regionName+"</span>",e+="</div>",e+='<div class="buttons">',e+='<div class="button" onclick="Games.redirRoot()">CHANGE REGION</div>',e+="</div>";let t=[[],[],[],[],[],[],[],[],[]],n=C(game.playRegion).games;for(let e of n)t[e.type].push(e);for(let n=1;n<l.length;n++)if(t[n].length>0){e+='<div class="item head">',e+='<div class="gametype chooser section">'+u[n],e+='<span class="infocontainer">&nbsp;<div class="infoicon">'+L(n)+"</div></span>",e+="</div>",e+='<div class="clear"></div>',e+="</div>";for(let r of t[n]){let t,n;r.id===game.playRoom?(t=" sel",n=""):(t=" selectable",n=` onclick="Games.switchGame(&quot;${game.playRegion}-${r.id}&quot;)"`),e+='<div class="item'+t+'"'+n+">",e+='<div class="gametype chooser">'+r.nameShort+"</div>",e+='<div class="players number">'+(null!=r.players?r.players-(r.bots||0):'<span class="playersunknown">?</span>')+"</div>",e+='<div class="bots number">'+(r.bots?`+${r.bots}`:"")+"</div>",e+='<div class="clear"></div>',e+="</div>"}}return e};Games.redirRoot=function(){game.reloading=!0,window.location="/"};var U=function(){A((function(){let t=N();e("#gameselector").html(t)}))};Games.closeGames=function(){a&&(UI.hide("#gameselector"),UI.show("#menu"),a=!1,Sound.UIClick())},Games.toggleGames=function(){a?Games.closeGames():Games.popGames()},Games.switchGame=function(e){if(Games.closeGames(),null!=e){let t=e.split("-");2==t.length&&([game.playRegion,game.playRoom]=t)}game.myScore=0,game.server={},game.state=Network.STATE.CONNECTING,Network.shutdown(),Particles.wipe(),Players.wipe(),Mobs.wipe(),UI.reconnection(),Games.start(game.myOriginalName)};var F=function(){h={},d=0;for(let e=0;e<v.length;e++){let t=v[e].games,n=t[Tools.randInt(0,t.length-1)].host;null==h[n]&&(h[n]={ping:9999,num:0,threshold:0,server:e})}Games.performPing(),Games.performPing(),Games.performPing(),p=setInterval(Games.performPing,300)};Games.performPing=function(){if(!g&&d<=3){let e,t=9999;for(let n in h)h[n].num<t&&(t=h[n].num,e=n);if(t>6)p&&clearInterval(p);else{h[e].num++;let t=`https://${e}/ping`;B(e,t,(function(){B(e,t)}))}}};var B=function(e,t,n){if(!g&&null!=h[e]){d++;let r=performance.now();fetch(t,{method:"GET",mode:"no-cors",cache:"no-cache"}).then(t=>{if(d--,!g&&null!=h[e]){let t=performance.now()-r;h[e].threshold++,Math.abs(h[e].ping-t)<.1*t&&h[e].threshold>=2?t<h[e].ping?(v[h[e].server].ping=t,Games.findClosest(),Games.updateRegion()):delete h[e]:t<h[e].ping&&(h[e].ping=t,v[h[e].server].ping=t,Games.findClosest(),Games.updateRegion(),n&&n())}}).catch(e=>{d--})}};Games.findClosest=function(){let e=9999,t=!1;for(let n=0;n<v.length;n++){let r=v[n];r.ping&&r.ping<e&&(e=r.ping,f=n,t=!0)}t&&"closest"===game.playRegion&&Games.updateType()},Games.highlightInput=function(t){e(t).css({transition:"none",transform:"scale(1.1)","background-color":"rgb(90, 30, 30)"}),e(t).width(),e(t).css({transition:"all 0.5s ease-in-out",transform:"scale(1)","background-color":"rgb(30, 30, 30)"}),setTimeout((function(){e(t).focus()}),200)},Games.copyInviteLink=function(){G(game.inviteLink)&&(UI.show("#invite-copied"),m&&clearTimeout(m),m=setTimeout((function(){UI.hide("#invite-copied")}),2e3))};var G=function(e){let t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre";let n=document.createElement("iframe");n.sandbox="allow-same-origin",document.body.appendChild(n);let r=n.contentWindow;r.document.body.appendChild(t);let i=r.getSelection();i||(i=(r=window).getSelection(),document.body.appendChild(t));let o=r.document.createRange();i.removeAllRanges(),o.selectNode(t),i.addRange(o);let s=!1;try{s=r.document.execCommand("copy")}catch(e){}return i.removeAllRanges(),t.remove(),n.remove(),s};Games.start=function(e,t){if(y&&!DEVELOPMENT)return;if(t&&game.state==Network.STATE.CONNECTING)return;let n=game.playRegion;if(!DEVELOPMENT||!game.customServerUrl){let e=D();if(!e)return;game.playRegion=e;let t=function(){let e=game.playRoom,t=l.indexOf(e);if(-1!=t){let n=C(game.playRegion).games,r=[];for(let e of n)e.type==t&&r.push(e.id);e=r[Tools.rand(0,1)<.5?r.length-1:Tools.randInt(0,r.length-1)]}return e}(),n=R(game.playRegion,t);game.playHost=n.host,game.playPath=n.path,game.roomNameShort=n.nameShort,game.regionName=C(game.playRegion).name,game.playRoom=t}null!=p&&clearInterval(p),g=!0,game.state==Network.STATE.LOGIN&&Tools.wipeReel(),game.state=Network.STATE.CONNECTING;let r={name:e};DEVELOPMENT&&game.customServerUrl?game.server={id:`custom-${game.customServerUrl}`}:(game.server={id:`${game.playRegion}-${game.playRoom}`},game.playInvited||(r.region=n)),Tools.setSettings(r),UI.gameStart(e,t),"1"!==navigator.doNotTrack&&Tools.ajaxPost(`https://${game.backendHost}/enter`,{id:config.settings.id,name:e,game:game.server.id,source:null!=document.referrer?document.referrer:"",mode:config.mobile?1:0,version:game.version,switch:!t})},Games.prep=function(){switch(Games.wipe(),game.gameType){case GameType.CTF:e("#gamespecific").html('<div class="blueflag"></div><div id="blueflag-name" class="blueflag-player">&nbsp;</div><div class="redflag"></div><div id="redflag-name" class="redflag-player">&nbsp;</div>'),UI.show("#gamespecific"),b={flagBlue:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:r.a.zero(),basePos:new r.a(-9669,-1471),sprite:Textures.init("ctfFlagBlue",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:.4*1.1,visible:!1}),minimapSprite:Textures.init("minimapFlagBlue"),minimapBase:Textures.init("minimapBaseBlue")},flagRed:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:r.a.zero(),basePos:new r.a(8602,-944),sprite:Textures.init("ctfFlagRed",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:.4*1.1,visible:!1}),minimapSprite:Textures.init("minimapFlagRed"),minimapBase:Textures.init("minimapBaseRed")}},Graphics.minimapMob(b.flagBlue.minimapBase,b.flagBlue.basePos.x,b.flagBlue.basePos.y),Graphics.minimapMob(b.flagRed.minimapBase,b.flagRed.basePos.x,b.flagRed.basePos.y);break;case GameType.BTR:e("#gamespecific").html(""),UI.show("#gamespecific")}},Games.wipe=function(){H(),b.flagBlue&&b.flagRed&&(game.graphics.layers.flags.removeChild(b.flagBlue.sprite),game.graphics.layers.flags.removeChild(b.flagRed.sprite),game.graphics.layers.shadows.removeChild(b.flagBlue.spriteShadow),game.graphics.layers.shadows.removeChild(b.flagRed.spriteShadow),game.graphics.layers.ui3.removeChild(b.flagBlue.minimapSprite),game.graphics.layers.ui3.removeChild(b.flagRed.minimapSprite),game.graphics.layers.ui2.removeChild(b.flagBlue.minimapBase),game.graphics.layers.ui2.removeChild(b.flagRed.minimapBase),b.flagBlue.sprite.destroy(),b.flagRed.sprite.destroy(),b.flagBlue.spriteShadow.destroy(),b.flagRed.spriteShadow.destroy(),b.flagBlue.minimapSprite.destroy(),b.flagRed.minimapSprite.destroy(),b.flagBlue.minimapBase.destroy(),b.flagRed.minimapBase.destroy())},Games.networkFlag=function(t){let n,i,o;1==t.flag?(n=b.flagBlue,i="#blueflag-name",o=t.blueteam):(n=b.flagRed,i="#redflag-name",o=t.redteam),n.momentum=0,n.direction=1,n.sprite.scale.x=.4,n.sprite.rotation=0,n.spriteShadow.scale.x=.4*1.1,n.spriteShadow.rotation=0;let s=`<span class="rounds">${o}<span class="divider">/</span>3</span>`;if(1==t.type){n.playerId=null,n.position.x=t.posX,n.position.y=t.posY,n.sprite.position.set(t.posX,t.posY);let o=Graphics.shadowCoords(new r.a(t.posX,t.posY));n.spriteShadow.position.set(o.x,o.y),Graphics.minimapMob(n.minimapSprite,t.posX,t.posY),e(i).html(s)}else{n.playerId=t.id;let r=Players.get(t.id);null!=r&&(1==t.flag?s=UI.escapeHTML(r.name)+s:s+=UI.escapeHTML(r.name)),n.diffX=r.pos.x,e(i).html(s)}j(n,!1)};var j=function(e,t){if(t&&(Graphics.minimapMob(e.minimapSprite,e.position.x,e.position.y),Graphics.minimapMob(e.minimapBase,e.basePos.x,e.basePos.y)),null!=e.playerId){let t=Players.get(e.playerId);if(null!=t&&(t.render!=e.visible&&(e.visible=t.render,e.sprite.visible=t.render,e.spriteShadow.visible=t.render,t.render&&(e.momentum=0,e.direction=1,e.diffX=t.pos.x)),t.render?Graphics.minimapMob(e.minimapSprite,t.pos.x,t.pos.y):Graphics.minimapMob(e.minimapSprite,t.lowResPos.x,t.lowResPos.y)),e.visible){e.position.x=t.pos.x,e.position.y=t.pos.y,e.sprite.position.set(t.pos.x,t.pos.y);let n=Graphics.shadowCoords(t.pos);e.spriteShadow.position.set(n.x,n.y),e.momentum=Tools.clamp(e.momentum+(t.pos.x-e.diffX)*game.timeFactor,-40,40);let r=e.momentum>0?.1:-.1;e.direction=Tools.clamp(e.direction-r*game.timeFactor,-.4,.4),e.sprite.scale.x=e.direction,e.spriteShadow.scale.x=1.1*e.direction;let i=.04*-(t.pos.x-e.diffX)*game.timeFactor;e.sprite.rotation=i,e.spriteShadow.rotation=i,e.diffX=t.pos.x}}else{let t=Graphics.inScreen(e.position,128);t!=e.visible&&(e.visible=t,e.sprite.visible=t,e.spriteShadow.visible=t)}};Games.spectate=function(e){null==game.spectatingID&&game.gameType!==GameType.BTR&&UI.showMessage("alert",'<span class="info">SPECTATOR MODE</span>Click on Respawn to resume playing',4e3),game.spectatingID=e;let t="",n=Players.get(e);t+='<div id="spectator-tag" class="spectating">Spectating '+(null==n?"":UI.escapeHTML(n.name))+"</div>",t+='<div class="buttons">',t+='<div onclick="Network.spectateNext()" class="changeplayer left"><div class="arrow"></div></div>',t+='<div onclick="Network.spectatePrev()" class="changeplayer right"><div class="arrow"></div></div>',t+="</div>",UI.showSpectator(t)},Games.spectatorSwitch=function(e){setTimeout((function(){e===game.spectatingID&&Network.spectateNext()}),2e3)},Games.playersAlive=function(t){let n="";t>1&&(n=`<div class="playersalive">${t} players alive</div>`),e("#gamespecific").html(n)},Games.showBTRWin=function(t){if(!e("#custom-msg").length){let n="";n+='<div id="custom-msg" class="btrwin">',n+='<div class="trophy"></div>',n+='<div class="winner">',n+='<div class="player"><span class="flag big flag-'+UI.escapeHTML(t.f)+'"></span>'+UI.escapeHTML(t.p)+"</div>",n+="</div>",n+='<div class="bounty">',n+='<span class="stat">'+UI.escapeHTML(t.k)+" KILL"+(1==t.k?"":"S")+"</span>",n+="+"+UI.escapeHTML(t.b)+" BOUNTY",n+="</div>",n+="</div>",e("body").append(n),UI.showPanel("#custom-msg"),setTimeout((function(){UI.hidePanel("#custom-msg",!1,!0)}),1e3*t.t),Sound.gameComplete()}},Games.showCTFWin=function(t){if(!e("#custom-msg").length){let n="";n+='<div id="custom-msg" class="ctfwin">',n+='<div class="trophy"></div>',n+='<div class="winner">'+(1==t.w?'<div class="player blue">BLUE TEAM</div>':'<div class="player red">RED TEAM</div>')+"</div>",n+='<div class="bounty">+'+UI.escapeHTML(t.b)+" BOUNTY</div></div>",e("body").append(n),UI.showPanel("#custom-msg"),setTimeout((function(){UI.hidePanel("#custom-msg",!1,!0)}),1e3*t.t),Sound.gameComplete()}},Games.showLevelUp=function(t){e("#custom-msg").length&&e("#custom-msg").remove();let n="",r=" lvlsmaller";null!=E[t+""]&&(r="",n='<div class="unlocked">FEATURE UNLOCKED<br><div class="unlockedtext">'+E[t+""]+"</div></div>");let i='<div id="custom-msg" class="levelup'+r+'"><div class="leveltext">NEW LEVEL REACHED</div><div class="levelbadge"></div><div class="levelnum">'+t+"</div>"+n+"</div>";e("body").append(i),UI.showPanel("#custom-msg"),setTimeout((function(){UI.hidePanel("#custom-msg",!1,!0,!0)}),2e3),Sound.levelUp()},Games.popFirewall=function(e,n){n<=0&&(n=0),x||(x=!0,T=new t.Graphics,game.graphics.gui.minimap.mask=T),T.clear(),T.beginFill(16777215),T.drawCircle(game.screenX-config.minimapPaddingX-config.minimapSize*(16384-e.x)/32768,game.screenY-config.minimapPaddingY-config.minimapSize/2*(8192-e.y)/16384,2*n/(256/config.minimapSize*256)),T.endFill();let i=Math.ceil((game.halfScreenX+64)/game.scale/64),o=Math.ceil((game.halfScreenY+64)/game.scale/64),s={},a=Graphics.getCamera(),l=new r.a(a.x-game.halfScreenX/game.scale-64,a.y-game.halfScreenY/game.scale-64),u=new r.a(a.x+game.halfScreenX/game.scale+64,a.y-game.halfScreenY/game.scale-64),c=new r.a(a.x-game.halfScreenX/game.scale-64,a.y+game.halfScreenY/game.scale+64),h=new r.a(a.x+game.halfScreenX/game.scale+64,a.y+game.halfScreenY/game.scale+64);if(Tools.distance(e.x,e.y,l.x,l.y)>n||Tools.distance(e.x,e.y,u.x,u.y)>n||Tools.distance(e.x,e.y,c.x,c.y)>n||Tools.distance(e.x,e.y,h.x,h.y)>n)for(let r=-i;r<=i;r++)for(let i=-o;i<=o;i++){let o=64*(Math.floor(a.x/64)+.5)+64*r,l=64*(Math.floor(a.y/64)+.5)+64*i,u=Tools.distance(o,l,e.x,e.y);if(u>=n){let e=`${o}_${l}`;if(s[e]=!0,null==_[e]){let r=Textures.sprite(`hotsmoke_${Tools.randInt(1,4)}`);r.scale.set(Tools.rand(1.5,2.5)),r.anchor.set(.5,.5),r.position.set(o,l);let i=1;Tools.rand(0,1)>.5&&(r.blendMode=t.BLEND_MODES.ADD,i=.5),game.graphics.layers.powerups.addChild(r),_[e]={sprite:r,rotation:Tools.rand(0,100),rotationSpeed:Tools.rand(-.0025,.0025),opacity:0,maxOpacity:i,opacitySpeed:u-n>=64?.02:.0035,color:Tools.rand(0,1),colorDir:Tools.rand(0,1)<.5?-1:1}}}}for(let e in _)s[e]?(_[e].rotation+=_[e].rotationSpeed*game.timeFactor,_[e].opacity+=_[e].opacitySpeed*game.timeFactor,_[e].opacity>_[e].maxOpacity&&(_[e].opacity=_[e].maxOpacity),_[e].color+=.005*_[e].colorDir*game.timeFactor,_[e].color<0&&(_[e].colorDir=1),_[e].color>1&&(_[e].colorDir=-1),_[e].sprite.rotation=_[e].rotation,_[e].sprite.alpha=_[e].opacity,_[e].sprite.tint=Tools.colorLerp(16427014,16404230,_[e].color)):(game.graphics.layers.powerups.removeChild(_[e].sprite),_[e].sprite.destroy(),delete _[e])};var H=function(){if(x){for(let e in _)game.graphics.layers.powerups.removeChild(_[e].sprite),_[e].sprite.destroy();_={},game.graphics.gui.minimap.mask=null,T&&(T.destroy(),T=null),x=!1}};Games.handleFirewall=function(e){0==e.status?H():(w.radius=e.radius,w.pos.x=e.posX,w.pos.y=e.posY,w.speed=e.speed,Games.popFirewall(w.pos,w.radius))},Games.update=function(e){switch(game.gameType){case GameType.CTF:b.flagBlue&&(j(b.flagBlue,e),j(b.flagRed,e));break;case GameType.BTR:x&&(w.radius+=w.speed/60*game.timeFactor,Games.popFirewall(w.pos,w.radius))}}}).call(this,n(10),n(13))},function(e,t,n){"use strict";(function(e,t){var r,i=n(0),o=(n(207),{position:i.a.zero(),center:i.a.zero(),lastOverdraw:i.a.zero(),lastOverdrawTime:0,shake:0}),s={},a={},l={};Graphics.setup=function(){d(window.innerWidth,window.innerHeight),u(),Textures.load(),c(),p(),h(),g(),Mobs.setupDoodads(),UI.setupMinimap(),UI.setupHUD()};var u=function(){e.utils.skipHello(),e.settings.PRECISION_FRAGMENT=e.PRECISION.HIGH;var t={autoResize:!0,clearBeforeRender:!1,preserveDrawingBuffer:!0};config.settings.hidpi&&(t.resolution=2);try{r=new e.WebGLRenderer(game.screenX,game.screenY,t)}catch(n){try{e.settings.SPRITE_MAX_TEXTURES=Math.min(e.settings.SPRITE_MAX_TEXTURES,16),r=new e.WebGLRenderer(game.screenX,game.screenY,t)}catch(e){return void UI.popBigMsg(2)}}document.body.appendChild(r.view)},c=function(){for(var t of["game","ui0","ui1","ui2","ui3","ui4","hudHealth","hudEnergy","flags","doodads","map","sea","objects","groundobjects","fields","shadows","powerups","crates","aircraft","aircraftme","glows","playernames","bubbles","thrusters","projectiles","smoke","explosions"])l[t]=new e.Container;for(var n of["smoke","crates","thrusters","projectiles","aircraft","aircraftme","glows","explosions","powerups","playernames","flags","bubbles"])l.objects.addChild(l[n]);for(var n of["fields"])l.groundobjects.addChild(l[n]);if(game.graphics.layers=l,game.graphics.gui=a,config.debug.collisions){for(var r=new e.Graphics,i=0;i<config.walls.length;i++)r.beginFill(16777215,.2),r.drawCircle(config.walls[i][0],config.walls[i][1],config.walls[i][2]),r.endFill();l.objects.addChild(r)}},h=function(){s.render=e.RenderTexture.create(game.screenX+config.overdraw,game.screenY+config.overdraw,void 0,config.settings.hidpi?2:void 0),s.renderSprite=new e.Sprite(s.render),s.shadows=e.RenderTexture.create(game.shadowX,game.shadowY,void 0,config.settings.hidpi?2:void 0),s.shadowsSprite=new e.Sprite(s.shadows),s.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),s.shadowsSprite.blendMode=e.BLEND_MODES.MULTIPLY,s.shadowsSprite.alpha=.4,l.game.addChild(s.renderSprite),l.game.addChild(l.groundobjects),l.game.addChild(s.shadowsSprite),s.shade=Textures.sprite("screenshade"),s.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale),s.shade.alpha=.825,s.shade.anchor.set(.5,.5),l.shadows.addChild(s.shade),l.game.addChild(l.objects),l.game.addChild(l.ui0),l.game.addChild(l.ui1),l.game.addChild(l.ui2),l.game.addChild(l.ui3),l.game.addChild(l.ui4),a.hudTextureEnergy=e.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),a.hudSpriteEnergy=new e.Sprite(a.hudTextureEnergy),a.hudSpriteEnergy.pivot.set(-250,174),a.hudTextureHealth=e.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),a.hudSpriteHealth=new e.Sprite(a.hudTextureHealth),a.hudSpriteHealth.pivot.set(330,174),l.game.addChild(a.hudSpriteEnergy),l.game.addChild(a.hudSpriteHealth)};Graphics.resizeRenderer=function(e,t){var n=e+config.overdraw,i=t+config.overdraw;for(var a of(d(e,t),p(),r.resize(e,t),s.render.resize(n,i),s.shadows.resize(e,t),s.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),s.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale),["sea","forest","sand","rock"]))s[a].width=n,s[a].height=i;UI.resizeMinimap(),UI.resizeHUD(),m(),v(),Graphics.setCamera(o.center.x,o.center.y),game.state==Network.STATE.PLAYING&&Network.resizeHorizon()},Graphics.toggleHiDPI=function(){Tools.setSettings({hidpi:!config.settings.hidpi}),UI.updateMainMenuSettings(),1==config.oldhidpi==config.settings.hidpi?UI.showMessage("alert","",1e3):UI.showMessage("alert",'Reload game to apply HiDPI settings<br><span class="button" onclick="Games.redirRoot()">RELOAD</span>',1e4)};var d=function(e,t){game.screenX=e,game.screenY=t,game.halfScreenX=e/2,game.halfScreenY=t/2,game.shadowX=Math.floor(game.screenX/config.shadowScaling),game.shadowY=Math.floor(game.screenY/config.shadowScaling)},p=function(){game.scale=(game.screenX+game.screenY)/UI.getScalingFactor(),l.groundobjects.scale.set(game.scale),l.objects.scale.set(game.scale),l.shadows.scale.set(game.scale),l.doodads.scale.set(game.scale),l.bubbles.scale.set(1/game.scale),f()},f=function(){if(config.mobile){var e=game.screenX>game.screenY?"landscape":"portrait";config.phone=game.screenX<=599&&"portrait"==e||game.screenY<=599&&"landscape"==e,config.tablet=game.screenX>=600&&game.screenX<=1024&&"portrait"==e||game.screenY>=600&&game.screenY<=1024&&game.screenX<=1024&&"landscape"==e,config.maxScoreboard=8,config.phone&&(config.minimapSize=160,config.maxScoreboard=5),config.tablet&&(config.maxScoreboard=7),config.minimapPaddingX=game.screenX/2-config.minimapSize/2}},g=function(){var t=r.width+config.overdraw,n=r.height+config.overdraw;for(var i of(s.sea=Textures.tile("map_sea",t,n),s.sea_mask=Textures.sprite("map_sea_mask"),s.sea_mask.scale.set(8,8),s.sea_mask.blendMode=e.BLEND_MODES.MULTIPLY,s.sea_mask.alpha=.5,s.forest=Textures.tile("map_forest",t,n),s.sand=Textures.tile("map_sand",t,n),s.sand_mask=Textures.sprite("map_sand_mask"),s.sand_mask.scale.set(8,8),s.sand.mask=s.sand_mask,s.rock=Textures.tile("map_rock",t,n),s.rock_mask=Textures.sprite("map_rock_mask"),s.rock_mask.scale.set(8,8),s.rock.mask=s.rock_mask,l.sea.addChild(s.sea),l.sea.addChild(s.sea_mask),["forest","sand","sand_mask","rock","rock_mask"]))l.map.addChild(s[i]);l.map.addChild(l.doodads),y(),m()},m=function(){var e;for(e of["sea","forest","sand","rock"])s[e].tileScale.set(game.scale,game.scale);for(e of["sea","sand","rock"])s[e+"_mask"].scale.set(8*game.scale,8*game.scale)},v=function(){s.polygons.scale.x=game.scale,s.polygons.scale.y=game.scale},y=function(){t.getJSON("assets/map.json",(function(t){s.polygons=new e.Graphics,s.polygons.beginFill();var n,r,i,o,a,u,c,h=0,d=0;for(u=0;u<t.length;u++)for(i=0,c=0;c<t[u].length;c++){for(o=[],a=0;a<t[u][c].length;a+=2)n=t[u][c][a]+h,r=t[u][c][a+1]+d,o.push(parseFloat(n),-parseFloat(r)),h=n,d=r;s.polygons.drawPolygon(o),0!=i&&s.polygons.addHole(),i++}s.polygons.endFill(),v(),l.map.addChild(s.polygons),l.map.mask=s.polygons}))};Graphics.initSprite=function(t,n,r){var i=Textures.sprite(t);return r.position&&i.position.set(r.position[0],r.position[1]),r.anchor&&i.anchor.set(r.anchor[0],r.anchor[1]),r.pivot&&i.pivot.set(r.pivot[0],r.pivot[1]),r.scale&&(Array.isArray(r.scale)?i.scale.set(r.scale[0],r.scale[1]):i.scale.set(r.scale)),r.rotation&&(i.rotation=r.rotation),r.alpha&&(i.alpha=r.alpha),r.blend&&(i.blendMode=e.BLEND_MODES[r.blend]),r.tint&&(i.tint=r.tint),r.mask&&(i.mask=r.mask),r.visible&&(i.visible=r.visible),n.addChild(i),i},Graphics.transform=function(e,t,n,r,i,o,s){e.position.set(t,n),null!=o?e.scale.set(i,o):null!=i&&e.scale.set(i),null!=r&&(e.rotation=r),null!=s&&(e.alpha=s)},Graphics.update=function(){s.shade.position.set(o.center.x/config.shadowScaling,o.center.y/config.shadowScaling),s.renderSprite.position.set(game.scale*(-o.position.x+o.lastOverdraw.x)-config.overdraw/2,game.scale*(-o.position.y+o.lastOverdraw.y)-config.overdraw/2),l.objects.position.set(-o.position.x*game.scale,-o.position.y*game.scale),l.groundobjects.position.set(-o.position.x*game.scale,-o.position.y*game.scale),l.doodads.position.set(-o.position.x*game.scale+config.overdraw/2,-o.position.y*game.scale+config.overdraw/2),l.shadows.position.set(-o.position.x*(game.scale/config.shadowScaling),-o.position.y*(game.scale/config.shadowScaling)),a.minimap_box.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-o.center.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-o.center.y)/16384)),config.overdrawOptimize?(Math.abs(o.position.x-o.lastOverdraw.x)>config.overdraw/2/game.scale||Math.abs(o.position.y-o.lastOverdraw.y)>config.overdraw/2/game.scale||game.time-o.lastOverdrawTime>2e3)&&b():b()},Graphics.setCamera=function(e,t){var n=0,r=0;o.shake>.5&&(n=Tools.rand(-o.shake,o.shake),r=Tools.rand(-o.shake,o.shake),o.shake*=1-.06*game.timeFactor);var i=game.halfScreenX/game.scale,s=game.halfScreenY/game.scale;e=Tools.clamp(e,-16384+i,16384-i),t=Tools.clamp(t,-8192+s,8192-s),o.position.x=n+e-game.screenX/2/game.scale,o.position.y=r+t-game.screenY/2/game.scale,o.center.x=n+e,o.center.y=r+t},Graphics.getCamera=function(){return o.center},Graphics.shakeCamera=function(e,t){var n=Tools.length(e.x-o.center.x,e.y-o.center.y),r=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2,i=Tools.clamp(1.3*(1-n/r),0,1);i<.1||(o.shake=i*t)},Graphics.shadowCoords=function(e){var t=Mobs.getClosestDoodad(e);return new i.a((e.x+config.shadowOffsetX*t)/config.shadowScaling,(e.y+config.shadowOffsetY*t)/config.shadowScaling)},Graphics.minimapMob=function(e,t,n){null!=e&&e.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-t)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-n)/16384))},Graphics.toggleFullscreen=function(){var e;((e=document).fullscreenElement?null!==e.fullscreenElement:e.mozFullScreenElement?null!==e.mozFullScreenElement:e.webkitFullscreenElement?null!==e.webkitFullscreenElement:e.msFullscreenElement?null!==e.msFullscreenElement:void 0)?function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen&&e.msExitFullscreen()}():function(){var e=document.documentElement;if(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),config.mobile&&null!=window.screen&&null!=window.screen.orientation)try{screen.orientation.lock("landscape")}catch(e){}}()},Graphics.inScreen=function(e,t){return e.x>=o.center.x-game.halfScreenX/game.scale-t&&e.x<=o.center.x+game.halfScreenX/game.scale+t&&e.y>=o.center.y-game.halfScreenY/game.scale-t&&e.y<=o.center.y+game.halfScreenY/game.scale+t};var b=function(){Mobs.updateDoodads(),o.lastOverdraw.x=o.position.x,o.lastOverdraw.y=o.position.y,s.renderSprite.position.set(-config.overdraw/2,-config.overdraw/2);var e,t=o.position.x-config.overdraw/game.scale/2,n=o.position.y-config.overdraw/game.scale/2,i=-t*game.scale,a=-n*game.scale,u=(-t-16384)*game.scale,c=(-n-8192)*game.scale;for(e of["sea","forest","sand","rock"])s[e].tilePosition.set(i,a);for(e of["sea","sand","rock"])s[e+"_mask"].position.set(u,c);null!=s.polygons&&null!=s.polygons.position&&s.polygons.position.set(-t*game.scale,-n*game.scale),o.lastOverdrawTime=game.time,r.render(l.sea,s.render),r.render(l.map,s.render)};Graphics.render=function(){r.render(l.shadows,s.shadows,!0),r.render(l.hudEnergy,a.hudTextureEnergy,!0),r.render(l.hudHealth,a.hudTextureHealth,!0),r.render(l.game)}}).call(this,n(13),n(10))},function(e,t,n){var r,i;!function(o){if(void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),!0,e.exports=o(),!!0){var s=window.Cookies,a=window.Cookies=o();a.noConflict=function(){return window.Cookies=s,a}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}return function t(n){function r(t,i,o){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=e({path:"/"},r.defaults,o)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}o.expires=o.expires?o.expires.toUTCString():"";try{s=JSON.stringify(i),/^[\{\[]/.test(s)&&(i=s)}catch(e){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var u in o)o[u]&&(l+="; "+u,!0!==o[u]&&(l+="="+o[u]));return document.cookie=t+"="+i+l}t||(s={});for(var c=document.cookie?document.cookie.split("; "):[],h=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var p=c[d].split("="),f=p.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var g=p[0].replace(h,decodeURIComponent);if(f=n.read?n.read(f,g):n(f,g)||f.replace(h,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===g){s=f;break}t||(s[g]=f)}catch(e){}}return s}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}((function(){}))}))},function(e,t,n){"use strict";(function(e){var t=n(0),r=n(98),i=n.n(r),o={},s={},a={},l=null,u=0,c=2*Math.PI,h=null,d=!1,p={},f=!1,g=null,m=0,v={LEFT:["LEFT","A"],RIGHT:["RIGHT","D"],UP:["UP","W"],DOWN:["DOWN","S"],STRAFELEFT:["Q"],STRAFERIGHT:["E"],FIRE:["SPACE"],SPECIAL:["CTRL","SHIFT"],SHOWSCORE:["TAB"],DROPUPGRADE:["X"],DROPFLAG:["Y"],MAINMENU:["F1"],SHOWGAMES:["F2"],FULLSCREEN:["F"],MINIMIZECHAT:["PGDOWN"],MAXIMIZECHAT:["PGUP"],SAY:["GRAVE"],TEAM:["T"],REPLY:["R"],SPECTATE:["V"],UPGRADE1:["1"],UPGRADE2:["2"],UPGRADE3:["3"],UPGRADE4:["4"],SOUND:["G"],HELP:["H"],INVITE:["I"],MOUSEMODE:["M"],ALTZOOM:["BACKSPACE"],ZOOMOUT:["-"],ZOOMIN:["="],DEFAULTZOOM:["0"]},y={},b={LEFT:!0,RIGHT:!0,UP:!0,DOWN:!0,FIRE:!0,SPECIAL:!0,STRAFELEFT:!0,STRAFERIGHT:!0},_={},T={MAINMENU:!0,FULLSCREEN:!0,INVITE:!0,SOUND:!0,SHOWSCORE:!0,SHOWGAMES:!0,HELP:!0},x=[["Forward","UP"],["Backward","DOWN"],["Turn Left","LEFT"],["Turn Right","RIGHT"],["Fire","FIRE"],["Special","SPECIAL"],["Strafe Left","STRAFELEFT"],["Strafe Right","STRAFERIGHT"],["Drop Flag","DROPFLAG"],["Spectate","SPECTATE"],["Upgrade Speed","UPGRADE1"],["Upgrade Defense","UPGRADE2"],["Upgrade Energy","UPGRADE3"],["Upgrade Missiles","UPGRADE4"],["Zoom Out","ZOOMOUT"],["Default Zoom","DEFAULTZOOM"],["Scoreboard","SHOWSCORE"],["Main Menu","MAINMENU"],["Show Games","SHOWGAMES"],["Fullscreen","FULLSCREEN"],["Maximize Chat","MAXIMIZECHAT"],["Minimize Chat","MINIMIZECHAT"],["Drop Upgrade","DROPUPGRADE"],["In-game Say","SAY"],["Team Chat","TEAM"],["Reply","REPLY"],["Toggle Sound","SOUND"],["Help","HELP"],["Invite Friends","INVITE"],["Mouse Mode","MOUSEMODE"],["Zoom In","ZOOMIN"],["Alternate Zoom","ALTZOOM"]],w={},E={BACKSPACE:8,TAB:9,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS:20,SPACE:32,PGUP:33,PGDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,WINDOWL:91,WINDOWR:92,SELECT:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,"*":106,"+":107,"-":109,DECIMAL:110,"/":111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL:145,":":186,"=":187,",":188,"-":189,".":190,"/":191,GRAVE:192,"[":219,"\\":220,"]":221,QUOTE:222},S=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"],M=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"];Input.setup=function(){for(var t in E)w[E[t]]=t;y=JSON.parse(JSON.stringify(v)),C(),k(!0),e(window).on("keydown",I),e(window).on("keyup",P),e(window).on("gamepadconnected",(function(e){UI.showMessage("alert",'<span class="info">GAMEPAD CONNECTED</span>'+UI.escapeHTML(e.originalEvent.gamepad.id),3e3),d=!0,O()})),e(window).on("gamepaddisconnected",(function(e){UI.showMessage("alert",'<span class="info">GAMEPAD DISCONNECTED</span>'+UI.escapeHTML(e.originalEvent.gamepad.id),3e3),d=!1,O()}))};var I=function(e){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var t=e.which;if(72!=t&&UI.hideHelp(),null!=g&&R(t))e.preventDefault();else{var n=Input.getBind(t);if(!A(t))return null==b[n]?(a[t]||(a[t]=!0,UI.controlKey(t,n,!0)),e.preventDefault(),!1):(o[n]||(o[n]=!0,N(n)),s[t]||(s[t]=!0),e.preventDefault(),!1)}}},P=function(e){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var t=e.which,n=Input.getBind(t);if(null==b[n]&&a[t]&&(a[t]=!1),!A(t))return o[n]&&(o[n]=!1,U(n)),s[t]&&(s[t]=!1),e.preventDefault(),!1}},A=function(e,t){return!!UI.chatBoxOpen()&&9!=e&&27!=e&&13!=e&&38!=e&&40!=e&&37!=e&&39!=e&&112!=e&&113!=e&&114!=e&&115!=e&&116!=e&&117!=e&&118!=e&&119!=e&&120!=e&&121!=e&&122!=e&&123!=e},O=function(){p={forward:!0,left:!1,right:!1,up:!1,down:!1,fire:!1,special:!1,angle:0,force:0}};Input.toggleKeybinds=function(){f?Input.closeKeybinds():Input.openKeybinds()},Input.getBind=function(e){var t=_[e];return null==t?null:t},Input.bindKey=function(t,n,r){null==g&&(g=n,m=r,e(t.target).html("press key"))},Input.closeBind=function(){null!=g&&(k(),g=null)},Input.resetBinds=function(){v=JSON.parse(JSON.stringify(y)),Tools.removeSetting("keybinds"),g=null,k()};var C=function(){if(null!=config.settings.keybinds)for(var e in config.settings.keybinds)v[e]=JSON.parse(JSON.stringify(config.settings.keybinds[e]))},R=function(e){var t=w[e];if(27==e&&(t=""),null!=t){for(var n in v)v[n][0]==t&&(v[n][0]=""),v[n].length>1&&v[n][1]==t&&(v[n][1]="");for(n in v[g][m]=t,v)v[n].length>1&&""==v[n][0]&&""!=v[n][1]&&(v[n]=[v[n][1]]),2==v[n].length&&""===v[n][1]&&v[n].splice(-1,1);return k(),function(){var e={},t="";for(var n in v)null!=y[n]&&(t=JSON.stringify(v[n]))!==JSON.stringify(y[n])&&(e[n]=JSON.parse(t));Object.keys(e).length>0?Tools.setSettings({keybinds:e}):Tools.removeSetting("keybinds")}(),g=null,!0}return!1},k=function(t){for(var n="",r="",i=null,o='<div class="left-binds">',s=0;s<x.length;s++)null!=x[s][0]&&(""!=x[s][0]?(null==(i=v[x[s][1]])?(n="&nbsp;",r="&nbsp;"):(""==(n=i[0])&&(n="&nbsp;"),""==(r=1==i.length?"":i[1])&&(r="&nbsp;")),o+='<div class="item"><div class="name">'+x[s][0]+'</div><div class="bind'+("&nbsp;"==n?" blank":"")+'" onclick="Input.bindKey(event,\''+x[s][1]+"',0)\">"+n+'</div><div class="bind'+("&nbsp;"==r?" blank":"")+'" onclick="Input.bindKey(event,\''+x[s][1]+"',1)\">"+r+"</div></div>",15==s&&(o+='</div><div class="right-binds">')):o+='<div class="item empty"></div>');o+="</div>",null==t&&e("#keybinds-list").html(o),_={},s=0;var a=0;for(var l in v){for(s=0;s<v[l].length;s++)null!=(a=E[v[l][s]])&&(_[a]=l);null!=T[l]&&e("#keybind-"+l.toLowerCase()).html(""==v[l]?"&nbsp;":"("+v[l]+")")}};Input.openKeybinds=function(){config.mobile||f||(UI.closeAllPanels("keybinds"),k(),UI.showPanel("#keybinds"),f=!0)},Input.closeKeybinds=function(){f&&(UI.hidePanel("#keybinds",f),f=!1,g=null)},Input.update=function(){if(d&&null!=navigator.getGamepads){var e=navigator.getGamepads();if(null!=e&&null!=e.length&&0!=e.length&&null!=e[0]){var n=e[0];if(!(n.buttons.length<16)){var r=n.buttons[12].pressed,i=n.buttons[13].pressed,o=n.buttons[15].pressed,s=n.buttons[14].pressed,a=n.buttons[0].pressed||n.buttons[2].pressed,l=n.buttons[1].pressed||n.buttons[3].pressed;p.up!=r&&(D("UP",r),p.up=r),p.down!=i&&(D("DOWN",i),p.down=i),p.right!=o&&(D("RIGHT",o),p.right=o),p.left!=s&&(D("LEFT",s),p.left=s),p.fire!=a&&(D("FIRE",a),p.fire=a),p.special!=l&&(D("SPECIAL",l),p.special=l);var u=new t.a(n.axes[1],n.axes[0]),h=u.length(),f=-u.angle()+Math.PI/2,g=f=(f%c+c)%c;h>.2?(p.forward=!0,L(g,h)):(p.forward&&!r&&D("UP",!1),p.forward=!1)}}else d=!1}},Input.unpressKey=function(e){delete a[e]},Input.keyState=function(e){return o[e]},Input.clearKeys=function(e){if(game.state===Network.STATE.PLAYING){for(var t of S)if(o[t]){if(e&&(s[38]||s[40]||s[37]||s[39]))continue;o[t]=!1,U(t)}for(var n in s)(!e||38!=n&&40!=n&&37!=n&&39!=n)&&(s[n]=!1)}},Input.touchCloseAll=function(){game.state==Network.STATE.LOGIN?(Games.closeDropdowns(),UI.closeLogin()):game.state==Network.STATE.PLAYING&&(UI.closeAllPanels(),UI.closeTooltip())},Input.addTouchRejection=function(t){e(t).on("touchstart",(function(e){e.stopPropagation()})),e(t).on("touchmove",(function(e){e.preventDefault(),e.stopPropagation()}))},Input.setupLogin=function(){e(window).on("touchstart",(function(e){Input.touchCloseAll(),e.preventDefault()})),Input.addTouchRejection("#logon,#big-message,#loginselector")},Input.setupTouch=function(){e(window).on("touchcancel",(function(e){null!=h&&h.processOnEnd(e)})),Input.addTouchRejection("#settings,#sidebar,#roomnamecontainer,#menu,#gameselector,#mainmenu,#scoredetailed,#invitefriends,#msg-alert,#msg-information"),e("body").append('<div id="touch-joystick"></div><div id="touch-fire"><div class="circle"></div></div><div id="touch-special"><div class="circle"></div></div>'),e("#touch-fire").on("touchstart",(function(t){D("FIRE",!0),e("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),t.preventDefault()})),e("#touch-fire").on("touchend",(function(t){D("FIRE",!1),e("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),t.preventDefault()})),e("#touch-special").on("touchstart",(function(t){D("SPECIAL",!0),e("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),t.preventDefault()})),e("#touch-special").on("touchend",(function(t){D("SPECIAL",!1),e("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),t.preventDefault()}));var t={zone:e("#touch-joystick")[0],mode:"static",position:{bottom:"50%",left:"50%"}};(h=i.a.create(t)).on("end",Input.touchEnd),h.on("move",Input.touchMove)},Input.toggleMouse=function(t){if(!config.mobile)if(e(window).off("mousedown"),e(window).off("mouseup"),config.mouse=!config.mouse,config.mouse){if(e(window).on("mousedown",Input.mouseDown),e(window).on("mouseup",Input.mouseUp),t)return;UI.showMessage("alert",'<span class="info">MOUSE MODE</span>Enabled<div class="mousemode"><span class="info">LEFT CLICK</span>Fire&nbsp;&nbsp;&nbsp;<span class="info">RIGHT CLICK</span>Special&nbsp;&nbsp;&nbsp;<span class="info">WASD</span>Move</div>',7e3),Tools.setSettings({mousemode:!0})}else UI.showMessage("alert",'<span class="info">MOUSE MODE</span>Disabled',3e3),Tools.removeSetting("mousemode")},Input.mouseDown=function(e){var t=e.originalEvent;if((0==t.button||2==t.button)&&null!=t.target.tagName&&"canvas"==t.target.tagName.toLowerCase()){var n=0==t.button?"FIRE":"SPECIAL";D(n,!0),e.preventDefault()}},Input.mouseUp=function(e){var t=e.originalEvent;if(0==t.button||2==t.button)if(null!=t.target.tagName&&"canvas"==t.target.tagName.toLowerCase()){var n=0==t.button?"FIRE":"SPECIAL";D(n,!1),e.preventDefault()}else D("FIRE",!1),D("SPECIAL",!1)};var D=function(e,t){(o[e]==!t||t&&null==o[e])&&(Network.sendKey(e,t),o[e]=t)},L=function(e,t){var n=Players.getMe();if(null!=n){var r=e-n.rot;r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var i=Math.round(Math.abs(r)/(60*config.ships[n.type].turnFactor)*1e3);if(!((i-=Math.round(game.ping))<10||game.time-u<100)){null!=l&&clearTimeout(l),u=game.time;var o=r>0?"RIGHT":"LEFT",s=r<=0?"RIGHT":"LEFT";D("UP",!(null!=t&&t<.5)),D(o,!0),D(s,!1),l=setTimeout((function(){D(o,!1)}),i)}}};Input.touchMove=function(e,t){var n=-t.angle.radian+Math.PI/2,r=n=(n%c+c)%c;L(r,t.force)},Input.touchEnd=function(e,t){D("UP",!1),D("LEFT",!1),D("RIGHT",!1)},Input.gameFocus=function(){game.focus=!0},Input.gameBlur=function(){game.focus=!1,Input.clearKeys()};var N=function(e){if(3==game.myType&&("STRAFELEFT"===e||"STRAFERIGHT"===e))return N("SPECIAL"),void N("STRAFELEFT"===e?"LEFT":"RIGHT");-1!==M.indexOf(e)&&Network.sendKey(e,!0)},U=function(e){3!=game.myType||"STRAFELEFT"!==e&&"STRAFERIGHT"!==e?-1!==S.indexOf(e)&&Network.sendKey(e,!1):(U("STRAFELEFT"===e?"LEFT":"RIGHT"),o["STRAFERIGHT"===e?"STRAFELEFT":"STRAFERIGHT"]||U("SPECIAL"))}}).call(this,n(10))},function(e,t,n){"use strict";(function(e){var t=n(0),r={MISSILE:0,MISSILE_FAT:1,MISSILE_SMALL:2,SHOCKWAVE_SMOKE:3,SHOCKWAVE_INNER:4,SHOCKWAVE_OUTER:5,EXPLOSION_FLASH:6,EXPLOSION_FLASH_BIG:7,EXPLOSION_SMOKE:8,EXPLOSION_HOT_SMOKE:9,EXPLOSION_SPARK:10,FRAGMENT_SMOKE:11,PLANE_DAMAGE:12,EMITTER_EXPLOSION_FRAGMENT:100},i=[null,r.MISSILE,r.MISSILE_FAT,r.MISSILE_SMALL,null,r.MISSILE,r.MISSILE,r.MISSILE,null,null,null,null,r.PLANE_DAMAGE];class o{constructor(t,n,r,i){this.maxParticles=n,this.container=new e.Container,null!=r&&(this.container.blendMode=r),this.particles=[],this.first=-1,this.last=-1,this.emitters={},this.emitterId=0,this.shadow=i,t.addChild(this.container)}addParticle(e,t,n,r,i,o,s,a,l,u,c,h,d,p){if(!(game.timeFactorUncapped>20||this.particles.length>=this.maxParticles)){var f=Textures.sprite(t),g={type:e,sprite:f,speed:n,pos:r,scale:i,alpha:o,rotationSpeed:s,rotation:a,lastRotation:0,time:game.time,tint:l,life:0,data:null!=d?d:0,emitter:null!=p?p:null,_prev:-1,_next:-1};null!=l&&(f.tint=l),null!=c&&(f.blendMode=c),null!=h&&(g.life=h),null!=u?f.anchor.set(u.x,u.y):f.anchor.set(.5,.5),this.container.addChild(f);var m=this.particles.length;m>0?(this.particles[this.last]._next=m,g._prev=this.last,this.last=m):(this.first=m,this.last=m),this.particles.push(g)}}wipe(){this.emitters={},this.emitterId=0;for(var e=0;e<this.particles.length;e++)this.container.removeChild(this.particles[e].sprite),this.particles[e].sprite.destroy();this.particles=[],this.first=-1,this.last=-1}addEmitter(e,t,n,r,i){game.timeFactorUncapped>20||(this.emitters[this.emitterId]={type:e,pos:n,speed:t,life:null!=r?r:0,shadowLayer:i},this.emitterId++)}updateEmitters(e){for(var n in this.emitters){var i=this.emitters[n];switch(i.type){case r.EMITTER_EXPLOSION_FRAGMENT:i.life+=.02*e,i.speed.multiply(1-.02*e)}if(i.life>1)delete this.emitters[n];else switch(i.pos.x+=i.speed.x*e,i.pos.y+=i.speed.y*e,i.type){case r.EMITTER_EXPLOSION_FRAGMENT:var o=Tools.randInt(1,16),s=.5*(1-i.life),a=1-i.life,l=Tools.rand(-.1,.1),u=Tools.randCircle();this.addParticle(r.FRAGMENT_SMOKE,"smoke_"+o,t.a.zero(),i.pos.clone(),t.a.diag(s),1,l,u,null,null,null,null,a+.2),i.shadowLayer&&i.shadowLayer.addParticle(r.FRAGMENT_SMOKE,"smokeshadow_"+o,t.a.zero(),i.pos.clone(),t.a.diag(s),1,l,u,null,null,null,null,a+.2)}}}destroy(e){var t=this.particles.length;if(0!=t&&!(e>=t)){this.container.removeChild(this.particles[e].sprite),this.particles[e].sprite.destroy();var n=this.particles[e]._prev,r=this.particles[e]._next;return t--,-1!=n?this.particles[n]._next=r:this.first=r,-1!=r?this.particles[r]._prev=n:this.last=n,e!=t&&(this.particles[e]=this.particles[t],-1!=this.particles[e]._prev?this.particles[this.particles[e]._prev]._next=e:this.first=e,-1!=this.particles[e]._next?this.particles[this.particles[e]._next]._prev=e:this.last=e),this.particles.splice(t,1),r==t?e:r}}_updateMissile(e,t){t.type==r.MISSILE?(t.scale.add(.2*e),t.scale.ceil(2*t.data),t.life+=.05*e):t.type==r.MISSILE_FAT?(t.scale.add(.3*e),t.scale.ceil(3*t.data),t.life+=.05*e):(t.scale.add(.14*e),t.scale.ceil(1.4*t.data),t.life+=.08*e),t.speed.multiply(1-.05*e),t.alpha=.7*(1-t.life),t.sprite.tint=Tools.colorLerp(t.tint,16777215,2*(1-t.life))}_updateShockwaveSmoke(e,t){t.life+=.05*e,t.alpha=.7*Tools.easing.custom(t.life,"shockwave")}_updateShockwave(e,t){t.life+=.05*e;var n=Tools.easing.custom(t.life,"shockwave");t.alpha=.4*n,t.type==r.SHOCKWAVE_OUTER?t.scale.both(4*t.life):t.scale.both(3*t.life)}_updateExplosionFlash(e,t){t.life+=.1*e,t.alpha=1-t.life}_updateExplosionFlashBig(e,t){t.life+=.04*e,t.alpha=1-t.life}_updateExplosionHotSmoke(e,t){t.life+=.035*e,t.alpha=1-t.life,t.scale.add(.05*e),t.speed.multiply(1-.1*e),t.rotationSpeed*=1-.05*e}_updateExplosionSmoke(e,t){t.life+=.01*e,t.alpha=Tools.easing.custom(t.life,"explosionSmoke"),t.scale.add(.05*e),t.speed.multiply(1-.05*e),t.rotationSpeed*=1-.05*e}_updateExplosionSpark(e,t){t.life+=.02*e,t.alpha=2*(1-t.life),t.speed.multiply(1-.05*e),t.rotationSpeed*=1-.05*e}_updateFragmentSmoke(e,t){t.life+=.02*e,t.scale.add(.075*e*t.data),t.scale.ceil(2*t.data),t.rotationSpeed*=1-.05*e,t.alpha=.3*(1-t.life)}_updatePlaneDamage(e,t){t.life+=.02*e,t.alpha=2*(1-t.life),t.speed.multiply(1-.1*e)}update(e){this.updateEmitters(e);for(var t=this.first;-1!=t;){var n=this.particles[t],r=this.updateFuncMap[n.type];if(r&&r(e,n),n.life>1)t=this.destroy(t);else{if(n.pos.x+=n.speed.x*e,n.pos.y+=n.speed.y*e,n.rotation+=n.rotationSpeed*e,this.shadow){var i=Graphics.shadowCoords(n.pos);n.sprite.position.x=i.x,n.sprite.position.y=i.y,n.sprite.scale.x=n.scale.x/config.shadowScaling,n.sprite.scale.y=n.scale.y/config.shadowScaling,n.sprite.alpha=Tools.clamp(2*n.alpha,0,1)}else n.sprite.position.x=n.pos.x,n.sprite.position.y=n.pos.y,n.sprite.scale.x=n.scale.x,n.sprite.scale.y=n.scale.y,n.sprite.alpha=Tools.clamp(n.alpha,0,1);Math.abs(n.rotation-n.lastRotation)>.03&&(n.sprite.rotation=n.rotation,n.lastRotation=n.rotation),t=this.particles[t]._next}}}}o.prototype.updateFuncMap={[r.MISSILE]:o.prototype._updateMissile,[r.MISSILE_FAT]:o.prototype._updateMissile,[r.MISSILE_SMALL]:o.prototype._updateMissile,[r.SHOCKWAVE_SMOKE]:o.prototype._updateShockwaveSmoke,[r.SHOCKWAVE_INNER]:o.prototype._updateShockwave,[r.SHOCKWAVE_OUTER]:o.prototype._updateShockwave,[r.EXPLOSION_FLASH]:o.prototype._updateExplosionFlash,[r.EXPLOSION_FLASH_BIG]:o.prototype._updateExplosionFlashBig,[r.EXPLOSION_HOT_SMOKE]:o.prototype._updateExplosionHotSmoke,[r.EXPLOSION_SMOKE]:o.prototype._updateExplosionSmoke,[r.EXPLOSION_SPARK]:o.prototype._updateExplosionSpark,[r.FRAGMENT_SMOKE]:o.prototype._updateFragmentSmoke,[r.PLANE_DAMAGE]:o.prototype._updatePlaneDamage};var s={};Particles.setup=function(){s.smoke=new o(game.graphics.layers.smoke,2e3),s.shadows=new o(game.graphics.layers.shadows,2e3,null,!0),s.explosions=new o(game.graphics.layers.explosions,2e3)},Particles.update=function(){for(var e=game.timeFactor>.51?Math.round(game.timeFactor):1,t=game.timeFactor/e,n=0;n<e;n++)s.smoke.update(t),s.explosions.update(t),s.shadows.update(t)},Particles.wipe=function(){s.smoke.wipe(),s.explosions.wipe(),s.shadows.wipe()},Particles.planeDamage=function(n){var i=2==n.type?2:1,o=Tools.randInt(1,4),a=Tools.randCircle(),l=Tools.rand(.5,2),u=Tools.rand(.2,.8),c=Tools.rand(0,.3),h=t.a.createOff(n.pos,a,Tools.rand(0,5*i)),d=t.a.create(a,l);s.explosions.addParticle(r.PLANE_DAMAGE,"spark_"+o,new t.a(d.x+n.speed.x,d.y+n.speed.y),h,t.a.diag(u),0,0,Tools.randCircle(),16739073,null,e.BLEND_MODES.ADD,c)},Particles.explosion=function(n,i,o){for(var a=i>1?1+(i-1)/1.5:i,l=0;l<2;l++)s.explosions.addParticle(r.EXPLOSION_FLASH,"flash_"+Tools.randInt(1,4),t.a.zero(),n.clone(),t.a.diag(1.5*i),0,0,Tools.randCircle(),15987628,null,e.BLEND_MODES.ADD);var u,c,h,d,p,f,g,m,v;for(u=Math.round(Tools.rand(20,30)*i),l=0;l<u;l++)c=Tools.randInt(1,4),h=Tools.randCircle(),p=Tools.rand(3,10)*a,f=Tools.rand(-.2,.2),g=Tools.rand(.4,1.5)*a,v=Tools.rand(0,.3),s.explosions.addParticle(r.EXPLOSION_SPARK,"spark_"+c,t.a.create(h,p),n.clone(),t.a.diag(g),0,f,Tools.randCircle(),16739073,null,e.BLEND_MODES.ADD,v);for(l=0;l<o;l++)h=Tools.randCircle(),p=Tools.rand(3,7)*a,d=Tools.rand(15,30)*i,s.explosions.addEmitter(r.EMITTER_EXPLOSION_FRAGMENT,t.a.create(h,p),t.a.createOff(n,h,d),Tools.rand(0,.5),s.shadows);for(u=Math.round(Tools.rand(20,30)*i),l=0;l<u;l++)c=Tools.randInt(1,16),h=Tools.randCircle(),d=Tools.rand(0,10)*i,p=Tools.rand(0,3)*i,f=Tools.rand(-.1,.1),g=Tools.rand(.5,.8)*i,m=Tools.randCircle(),s.explosions.addParticle(r.EXPLOSION_SMOKE,"smoke_"+c,t.a.create(h,p),t.a.createOff(n,h,d),t.a.diag(g),0,f,m),s.shadows.addParticle(r.EXPLOSION_SMOKE,"smokeshadow_"+c,t.a.create(h,p),t.a.createOff(n,h,d),t.a.diag(g),0,f,m);for(s.explosions.addParticle(r.EXPLOSION_FLASH_BIG,"glowsmall",t.a.zero(),n.clone(),t.a.diag(6*i),0,0,0,null,null,e.BLEND_MODES.ADD),u=Math.round(Tools.rand(5,10)*i),l=0;l<u;l++)c=Tools.randInt(1,4),h=Tools.randCircle(),p=Tools.rand(1,3)*i,f=Tools.rand(-.1,.1),g=Tools.rand(.1,.3)*i,s.explosions.addParticle(r.EXPLOSION_HOT_SMOKE,"hotsmoke_"+c,t.a.create(h,p),n.clone(),t.a.diag(g),0,f,Tools.randCircle(),16739073,null,e.BLEND_MODES.ADD)},Particles.missileSmoke=function(e,n,r,o){var a=i[e.type],l=e.spriteRot+Math.PI,u=t.a.createOff(e.pos,l,n),c=.2*(r=r||1),h=Tools.rand(-.1,.1),d=t.a.create(l+h,5*r),p=Tools.randInt(1,16),f=Tools.rand(-.1,.1);Tools.randCircle(),s.smoke.addParticle(a,"smoke_"+p,d.clone(),u.clone(),new t.a(1.25*c,4*c),1,f,l,o||16775590,null,null,null,r),s.shadows.addParticle(a,"smokeshadow_"+p,d.clone(),u.clone(),new t.a(1.25*c,4*c),1,f,l,null,null,null,null,r)},Particles.planeBoost=function(e,n){var i=e.rot+e.state.thrustDir/2+Math.PI,o=t.a.createOff(e.pos,i,n?40:-20),a=Tools.rand(-.1,.1),l=n?0:Math.PI,u=t.a.create(i+a+l,6),c=Tools.randInt(1,16),h=Tools.rand(-.1,.1);Tools.randCircle(),s.smoke.addParticle(r.MISSILE,"smoke_"+c,u.clone(),o.clone(),new t.a(.3,1.2),1,h,i,16775590,null,null,null,1.2),s.shadows.addParticle(r.MISSILE,"smokeshadow_"+c,u.clone(),o.clone(),new t.a(.3,1.2),1,h,i,null,null,null,null,1.2)},Particles.spiritShockwave=function(e){for(var n,i,o=0;o<40;o++)i=o/40*2*Math.PI,n=Tools.randInt(1,16),s.smoke.addParticle(r.SHOCKWAVE_SMOKE,"smoke_"+n,t.a.create(i,8),e.clone(),t.a.diag(2),0,.4,Tools.randCircle());s.smoke.addParticle(r.SHOCKWAVE_INNER,"shockwave",t.a.zero(),e.clone(),t.a.zero(),0,0,-.35+Math.PI),s.smoke.addParticle(r.SHOCKWAVE_OUTER,"shockwave",t.a.zero(),e.clone(),t.a.zero(),0,0,-.35)},Particles.count=function(){var e=0;for(var t in s)e+=s[t].particles.length;return e},Particles.PTYPE=r}).call(this,n(13))},function(e,t,n){"use strict";(function(e){var t=n(99),r=n(0),i={},o=[-1,-1,-1],s=["badge_gold","badge_silver","badge_bronze"];Players.update=function(){var e,t;for(e in i)0==(t=i[e]).status&&(t.update(game.timeFactor),t.updateGraphics(game.timeFactor));if(null!=game.spectatingID){if(null==(t=i[game.spectatingID]))return;if(game.timeNetwork-t.lastPacket>3e3)return;Graphics.setCamera(t.pos.x,t.pos.y)}else if(null!=game.myID){if(null==(t=i[game.myID]))return;0==t.status&&UI.updateHUD(t.health,t.energy,t),Graphics.setCamera(t.pos.x,t.pos.y)}},Players.add=function(e,n){i[e.id]=new t.a(e,n),game.state===Network.STATE.PLAYING&&UI.updateGameInfo()},Players.get=function(e){return i[e]},Players.getMe=function(){return i[game.myID]},Players.amIAlive=function(){var e=Players.getMe();return null!=e&&0==e.status},Players.getIDs=function(){var e={};for(var t in i)e[t]=!0;return e},Players.getByName=function(e){var t;for(t in i)if(i[t].name===e)return i[t];return null},Players.network=function(e,t){let n=i[t.id];if(null!=n)switch(e){case Network.SERVERPACKET.PLAYER_UPDATE:case Network.SERVERPACKET.PLAYER_FIRE:case Network.SERVERPACKET.EVENT_BOOST:case Network.SERVERPACKET.EVENT_BOUNCE:n.networkKey(e,t);break;case Network.SERVERPACKET.CHAT_SAY:n.sayBubble(t);break;case Network.SERVERPACKET.PLAYER_RESPAWN:n.respawn(t),UI.updateGameInfo();break;case Network.SERVERPACKET.PLAYER_FLAG:t.id==game.myID&&(game.myFlag=game.lastFlagSet,Tools.setSettings({flag:game.lastFlagSet})),n.changeFlag(t)}},Players.stealth=function(e){var t=i[e.id];null!=t&&t.stealth(e)},Players.leaveHorizon=function(e){var t=i[e.id];null!=t&&t.leaveHorizon()},Players.updateBadges=function(e){for(var t,n=Tools.clamp(e.length,0,3),r=[],a=0;a<n;a++)null!=(t=i[e[a].id])&&(r.push(t.id),t.state.badge!=a&&(t.state.badge=a,t.changeBadge(s[a])),t.state.hasBadge||(t.state.hasBadge=!0,t.render&&(t.sprites.badge.visible=!0)));for(var l=0;l<o.length;l++)if(-1==r.indexOf(o[l])){if(null==(t=i[o[l]]))continue;t.state.hasBadge&&(t.state.hasBadge=!1,t.sprites.badge.visible=!1)}o=r},Players.chat=function(e){var t=i[e.id];null!=t&&UI.addChatLine(t,e.text,0)},Players.teamChat=function(e){var t=i[e.id];null!=t&&UI.addChatLine(t,e.text,3)},Players.votemutePass=function(e){var t=i[e.id];null!=t&&UI.chatVotemutePass(t)},Players.whisper=function(e){var t;if(e.to==game.myID){if(null==(n=i[e.from]))return;t=2}else{var n;if(null==(n=i[e.to]))return;t=1}UI.addChatLine(n,e.text,t)},Players.impact=function(e){for(var t=0;t<e.players.length;t++){var n=i[e.players[t].id];null!=n&&n.impact(e.type,new r.a(e.posX,e.posY),e.players[t].health,e.players[t].healthRegen)}},Players.powerup=function(e){Players.getMe().powerup(e)},Players.updateLevel=function(e){var t=i[e.id];null!=t&&t.updateLevel(e)},Players.reteam=function(e){let t=i[e.id];null!=t&&t.reteam(e.team),UI.updateGameInfo()},Players.kill=function(e){let t=i[e.id];if(t)if(0!=e.killer||0!=e.posX||0!=e.posY){if(t.kill(e),t.me()){UI.visibilityHUD(!1);let t=i[e.killer];t&&UI.killedBy(t),UI.showSpectator('<div onclick="Network.spectateNext()" class="spectate">ENTER SPECTATOR MODE</div>')}else e.killer===game.myID&&UI.killed(t);t.me()||t.id!==game.spectatingID||game.gameType===GameType.BTR||Games.spectatorSwitch(t.id)}else t.kill({posX:0,posY:0,spectate:!0}),UI.visibilityHUD(!1),UI.updateGameInfo()},Players.destroy=function(t){t==game.spectatingID&&(e("#spectator-tag").html("Spectating"),Games.spectatorSwitch(t));let n=i[t];null!=n&&(n.destroy(!0),delete i[t],game.state===Network.STATE.PLAYING&&UI.updateGameInfo())},Players.changeType=function(e){var t=i[e.id];null!=t&&t.changeType(e)},Players.count=function(){var e,t=0,n=0;for(e in i)t++,i[e].culled&&n++;return[t-n,t]},Players.categoryCounts=function(){let e={players:0,bots:0,blueTeam:0,redTeam:0,spectators:0};for(let t in i){let n=i[t];n.bot?"Server"!==n.name&&e.bots++:(e.players++,n.isSpectating()?e.spectators++:1===n.team?e.blueTeam++:2===n.team&&e.redTeam++)}return e},Players.wipe=function(){for(let e in i)i[e].destroy(!0),delete i[e]},Players.all=function(){return i}}).call(this,n(10))},function(e,t,n){(function(e){var t={map_sea:"assets/map_sea.jpg",map_sea_mask:"assets/map_sea_mask.jpg",map_forest:"assets/map_forest.jpg",map_rock:"assets/map_rock.jpg",map_rock_mask:"assets/map_rock_mask.jpg",map_sand:"assets/map_sand.jpg",map_sand_mask:"assets/map_sand_mask.jpg",mountains:"assets/mountains.png",aircraft:"assets/aircraft.png",shadows:"assets/shadows.png",particles:"assets/particles.png",flags:"assets/flagsbig.png?4",items:"assets/items.png?3",gui:"assets/gui.png"},n={spirit:["aircraft",[4,4,512,256]],tornado:["aircraft",[524,4,256,256]],raptor:["aircraft",[788,4,256,256]],prowler:["aircraft",[1052,4,256,256]],comanche:["aircraft",[1316,4,128,256]],comanche_rotor:["aircraft",[1452,4,128,128]],mountain2:["mountains",[0,512,512,512]],mountain1:["mountains",[512,512,512,512]],mountain4:["mountains",[0,0,512,512]],mountain3:["mountains",[512,0,512,512]],crate_shadow:["shadows",[4,140,64,64]],comanche_rotor_shadow:["shadows",[76,140,64,64]],smokeshadow_8:["shadows",[148,140,32,32]],smokeshadow_7:["shadows",[188,140,32,32]],smokeshadow_6:["shadows",[228,140,32,32]],smokeshadow_5:["shadows",[268,140,32,32]],smokeshadow_4:["shadows",[308,140,32,32]],smokeshadow_3:["shadows",[348,140,32,32]],smokeshadow_2:["shadows",[388,140,32,32]],smokeshadow_15:["shadows",[428,140,32,32]],smokeshadow_14:["shadows",[468,140,32,32]],smokeshadow_13:["shadows",[508,140,32,32]],smokeshadow_12:["shadows",[548,140,32,32]],smokeshadow_11:["shadows",[588,140,32,32]],smokeshadow_10:["shadows",[628,140,32,32]],smokeshadow_1:["shadows",[668,140,32,32]],smokeshadow_16:["shadows",[708,140,32,32]],afterburner_shadow:["shadows",[748,140,32,32]],spirit_shadow:["shadows",[4,4,256,128]],tornado_shadow:["shadows",[268,4,128,128]],screenshade:["shadows",[404,4,128,128]],raptor_shadow:["shadows",[540,4,128,128]],prowler_shadow:["shadows",[676,4,128,128]],comanche_shadow:["shadows",[812,4,64,128]],missile_shadow:["shadows",[884,4,32,128]],smokeshadow_9:["shadows",[924,76,32,32]],ctf_flag_shadow:["shadows",[924,4,64,64]],flash_1:["particles",[0,128,120,120]],glowsmall:["particles",[120,128,64,64]],smoke_9:["particles",[184,128,32,32]],smoke_8:["particles",[216,128,32,32]],smoke_7:["particles",[248,128,32,32]],smoke_6:["particles",[280,128,32,32]],smoke_5:["particles",[312,128,32,32]],smoke_4:["particles",[344,128,32,32]],smoke_3:["particles",[376,128,32,32]],smoke_2:["particles",[408,128,32,32]],smoke_16:["particles",[440,128,32,32]],smoke_15:["particles",[472,128,32,32]],smoke_14:["particles",[504,128,32,32]],smoke_13:["particles",[536,128,32,32]],smoke_12:["particles",[568,128,32,32]],smoke_11:["particles",[600,128,32,32]],smoke_10:["particles",[632,128,32,32]],smoke_1:["particles",[664,128,32,32]],shockwave:["particles",[0,0,128,128]],hotsmoke_4:["particles",[128,0,120,120]],hotsmoke_3:["particles",[248,0,120,120]],hotsmoke_2:["particles",[368,0,120,120]],hotsmoke_1:["particles",[488,0,120,120]],flash_4:["particles",[608,0,120,120]],flash_3:["particles",[728,0,120,120]],spark_4:["particles",[848,120,8,8]],spark_3:["particles",[856,120,8,8]],spark_2:["particles",[864,120,8,8]],spark_1:["particles",[872,120,8,8]],flash_2:["particles",[848,0,120,120]],crate_upgrade:["items",[4,268,128,128]],crate_magic:["items",[4,409,128,128]],crate_shield:["items",[140,268,128,128]],crate_rampage:["items",[276,268,128,128]],afterburner:["items",[412,268,128,128]],missile_fat:["items",[548,268,64,128]],missile_carrot:["items",[694,268,64,128]],missile:["items",[620,268,32,128]],doodad_field:["items",[4,4,256,256]],badge_bronze:["items",[268,140,64,64]],powerup_shield:["items",[268,4,128,128]],badge_gold:["items",[404,140,64,64]],powerup_rampage:["items",[404,4,128,128]],badge_silver:["items",[540,140,64,64]],powerup_circle:["items",[540,4,128,128]],glowdirectional:["items",[676,140,64,64]],ctf_flag_red:["items",[676,4,128,128]],glowsmall_copy:["items",[812,140,64,64]],missile_small:["items",[884,140,16,64]],levelborder:["items",[908,140,32,32]],ctf_flag_blue:["items",[812,4,128,128]],hud_shadow:["gui",[4,268,80,348]],hud_mask:["gui",[92,268,80,348]],hud:["gui",[180,268,80,348]],emote_bro:["gui",[268,548,64,64]],emote_clap:["gui",[268,476,64,64]],ui_minimap_box:["gui",[268,404,64,64]],emote_cry:["gui",[340,548,64,64]],emote_kappa:["gui",[340,476,64,64]],emote_tf:["gui",[340,404,64,64]],emote_lol:["gui",[412,548,64,64]],emote_pepe:["gui",[412,476,64,64]],ui_minimap_blue:["gui",[484,596,16,16]],ui_minimap_base_blue:["gui",[484,556,32,32]],ui_minimap_base_red:["gui",[484,516,32,32]],ui_minimap_flag_blue:["gui",[484,476,32,32]],emote_rage:["gui",[412,404,64,64]],ui_minimap_mob:["gui",[484,444,16,16]],ui_minimap_flag_red:["gui",[484,404,32,32]],ui_minimap:["gui",[4,4,512,256]],chatbubbleleft:["gui",[274,274,16,82]],chatbubblecenter:["gui",[350,274,82,82]],chatbubbleright:["gui",[438,274,16,82]],chatbubblepoint:["gui",[297,352,36,22]]},r={flag_1:["flags",[2,962,80,60]],flag_2:["flags",[2,898,80,60]],flag_3:["flags",[2,834,80,60]],flag_4:["flags",[2,770,80,60]],flag_5:["flags",[2,706,80,60]],flag_6:["flags",[2,642,80,60]],flag_7:["flags",[2,578,80,60]],flag_8:["flags",[2,514,80,60]],flag_9:["flags",[2,450,80,60]],flag_10:["flags",[2,386,80,60]],flag_11:["flags",[2,322,80,60]],flag_12:["flags",[2,258,80,60]],flag_13:["flags",[2,194,80,60]],flag_14:["flags",[2,130,80,60]],flag_15:["flags",[2,66,80,60]],flag_16:["flags",[86,962,80,60]],flag_17:["flags",[86,898,80,60]],flag_18:["flags",[86,834,80,60]],flag_19:["flags",[86,770,80,60]],flag_20:["flags",[86,706,80,60]],flag_21:["flags",[86,642,80,60]],flag_22:["flags",[86,578,80,60]],flag_23:["flags",[86,514,80,60]],flag_24:["flags",[86,450,80,60]],flag_25:["flags",[86,386,80,60]],flag_26:["flags",[86,322,80,60]],flag_27:["flags",[86,258,80,60]],flag_28:["flags",[86,194,80,60]],flag_29:["flags",[86,130,80,60]],flag_30:["flags",[170,962,80,60]],flag_31:["flags",[170,898,80,60]],flag_32:["flags",[170,834,80,60]],flag_33:["flags",[170,770,80,60]],flag_34:["flags",[170,706,80,60]],flag_35:["flags",[170,642,80,60]],flag_36:["flags",[170,578,80,60]],flag_37:["flags",[170,514,80,60]],flag_38:["flags",[170,450,80,60]],flag_39:["flags",[170,386,80,60]],flag_40:["flags",[170,322,80,60]],flag_41:["flags",[170,258,80,60]],flag_42:["flags",[170,194,80,60]],flag_43:["flags",[254,962,80,60]],flag_44:["flags",[254,898,80,60]],flag_45:["flags",[254,834,80,60]],flag_46:["flags",[254,770,80,60]],flag_47:["flags",[254,706,80,60]],flag_48:["flags",[254,642,80,60]],flag_49:["flags",[254,578,80,60]],flag_50:["flags",[254,514,80,60]],flag_51:["flags",[254,450,80,60]],flag_52:["flags",[254,386,80,60]],flag_53:["flags",[254,322,80,60]],flag_54:["flags",[338,962,80,60]],flag_55:["flags",[338,898,80,60]],flag_56:["flags",[338,834,80,60]],flag_57:["flags",[338,770,80,60]],flag_58:["flags",[338,706,80,60]],flag_59:["flags",[338,642,80,60]],flag_60:["flags",[338,578,80,60]],flag_61:["flags",[338,514,80,60]],flag_62:["flags",[338,450,80,60]],flag_63:["flags",[338,386,80,60]],flag_64:["flags",[422,962,80,60]],flag_65:["flags",[422,898,80,60]],flag_66:["flags",[422,834,80,60]],flag_67:["flags",[422,770,80,60]],flag_68:["flags",[422,706,80,60]],flag_69:["flags",[422,642,80,60]],flag_70:["flags",[422,578,80,60]],flag_71:["flags",[422,514,80,60]],flag_72:["flags",[422,450,80,60]],flag_73:["flags",[506,962,80,60]],flag_74:["flags",[506,898,80,60]],flag_75:["flags",[506,834,80,60]],flag_76:["flags",[506,770,80,60]],flag_77:["flags",[506,706,80,60]],flag_78:["flags",[506,642,80,60]],flag_79:["flags",[506,578,80,60]],flag_80:["flags",[590,770,80,60]],flag_81:["flags",[590,706,80,60]],flag_82:["flags",[590,642,80,60]],flag_83:["flags",[590,578,80,60]],flag_84:["flags",[506,514,80,60]],flag_85:["flags",[590,514,80,60]],flag_86:["flags",[506,450,80,60]],flag_87:["flags",[590,450,80,60]],flag_88:["flags",[422,386,80,60]],flag_89:["flags",[506,386,80,60]],flag_90:["flags",[590,386,80,60]],flag_91:["flags",[338,322,80,60]],flag_92:["flags",[422,322,80,60]],flag_93:["flags",[506,322,80,60]],flag_94:["flags",[590,322,80,60]],flag_95:["flags",[254,258,80,60]],flag_96:["flags",[338,258,80,60]],flag_97:["flags",[422,258,80,60]],flag_98:["flags",[506,258,80,60]],flag_99:["flags",[590,258,80,60]],flag_100:["flags",[254,194,80,60]],flag_101:["flags",[338,194,80,60]],flag_102:["flags",[422,194,80,60]],flag_103:["flags",[506,194,80,60]],flag_104:["flags",[590,194,80,60]],flag_105:["flags",[170,130,80,60]],flag_106:["flags",[254,130,80,60]],flag_107:["flags",[338,130,80,60]],flag_108:["flags",[422,130,80,60]],flag_109:["flags",[506,130,80,60]],flag_110:["flags",[590,130,80,60]],flag_111:["flags",[86,66,80,60]],flag_112:["flags",[170,66,80,60]],flag_113:["flags",[254,66,80,60]],flag_114:["flags",[338,66,80,60]],flag_115:["flags",[422,66,80,60]],flag_116:["flags",[506,66,80,60]],flag_117:["flags",[590,66,80,60]],flag_118:["flags",[2,2,80,60]],flag_119:["flags",[86,2,80,60]],flag_120:["flags",[170,2,80,60]],flag_121:["flags",[254,2,80,60]],flag_122:["flags",[338,2,80,60]],flag_123:["flags",[422,2,80,60]],flag_124:["flags",[506,2,80,60]],flag_125:["flags",[590,2,80,60]]},i={hudHealth_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2},hudHealth_mask:{texture:"hud_mask",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudHealth:{texture:"hud",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudEnergy_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2,rotation:Math.PI},hudEnergy_mask:{texture:"hud_mask",layer:"hudEnergy",pivot:[330,174],position:"screencenter",rotation:Math.PI},hudEnergy:{texture:"hud",layer:"hudEnergy",pivot:[330,174],position:"screencenter",tint:3374821},minimap:{texture:"ui_minimap",layer:"ui0",anchor:[1,1],alpha:.25},minimapBox:{texture:"ui_minimap_box",layer:"ui4",anchor:[.5,.5],alpha:.6},minimapMob:{texture:"ui_minimap_mob",layer:"ui1",anchor:[.5,.5],alpha:.5,scale:.8},minimapBlue:{texture:"ui_minimap_blue",layer:"ui1",anchor:[.5,.5],alpha:.5,scale:.8},minimapFlagBlue:{texture:"ui_minimap_flag_blue",layer:"ui3",anchor:[.5,.5],scale:.5},minimapFlagRed:{texture:"ui_minimap_flag_red",layer:"ui3",anchor:[.5,.5],scale:.5},minimapBaseBlue:{texture:"ui_minimap_base_blue",layer:"ui2",anchor:[.5,.5],scale:.5},minimapBaseRed:{texture:"ui_minimap_base_red",layer:"ui2",anchor:[.5,.5],scale:.5},thrusterShadow:{texture:"afterburner_shadow",layer:"shadows",anchor:[.5,.1]},missile:{texture:"missile",layer:"projectiles",anchor:[.5,0],scale:[.2,.15]},missileFat:{texture:"missile_fat",layer:"projectiles",anchor:[.5,0],scale:[.2,.2]},missileSmall:{texture:"missile_small",layer:"projectiles",anchor:[.5,0],scale:[.2,.2]},missileCarrot:{texture:"missile_carrot",layer:"projectiles",anchor:[.5,0],scale:[.3,.3]},missileShadow:{texture:"missile_shadow",layer:"shadows",anchor:[.5,.25]},missileThruster:{texture:"afterburner",layer:"thrusters",anchor:[.5,.1],scale:[.15,.15]},thrusterGlowSmall:{texture:"glowsmall_copy",layer:"glows",anchor:[.5,.5],blend:"ADD"},smokeGlow:{texture:"glowdirectional",layer:"glows",anchor:[.5,.3],blend:"ADD"},crateShadow:{texture:"crate_shadow",layer:"shadows",anchor:[.5,.5]},crateUpgrade:{texture:"crate_upgrade",layer:"crates",anchor:[.5,.5]},crateMagic:{texture:"crate_magic",layer:"crates",anchor:[.5,.5]},crateShield:{texture:"crate_shield",layer:"crates",anchor:[.5,.5]},crateRampage:{texture:"crate_rampage",layer:"crates",anchor:[.5,.5]},powerupCircle:{texture:"powerup_circle",layer:"powerups",anchor:[.5,.5],blend:"ADD"},powerupShield:{texture:"powerup_shield",layer:"powerups",anchor:[.5,.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[.5,.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[.5,.5],blend:"ADD"},ctfFlagRed:{texture:"ctf_flag_red",layer:"flags",anchor:[15/128,119/128]},ctfFlagBlue:{texture:"ctf_flag_blue",layer:"flags",anchor:[15/128,119/128]},ctfFlagShadow:{texture:"ctf_flag_shadow",layer:"shadows",anchor:[3/32,23/32]},shipRaptor:{texture:"raptor",layer:"aircraft",anchor:[.5,.6]},shipRaptorShadow:{texture:"raptor_shadow",layer:"shadows",anchor:[.5,.57]},shipRaptorThruster:{texture:"afterburner",layer:"thrusters",anchor:[.5,.1],scale:[.25,.25]},shipSpirit:{texture:"spirit",layer:"aircraft",anchor:[.5,.5]},shipSpiritShadow:{texture:"spirit_shadow",layer:"shadows",anchor:[.5,.5]},shipSpiritThruster:{texture:"afterburner",layer:"thrusters",anchor:[.5,.1],scale:[.25,.25]},shipComanche:{texture:"comanche",layer:"aircraft",anchor:[.5,.4]},shipComancheShadow:{texture:"comanche_shadow",layer:"shadows",anchor:[.5,.43]},shipComancheRotor:{texture:"comanche_rotor",layer:"aircraft",anchor:[.5,.5],scale:[.25,.25]},shipComancheRotorShadow:{texture:"comanche_rotor_shadow",layer:"shadows",anchor:[.5,.5]},shipTornado:{texture:"tornado",layer:"aircraft",anchor:[.5,.65]},shipTornadoShadow:{texture:"tornado_shadow",layer:"shadows",anchor:[.5,.605]},shipProwler:{texture:"prowler",layer:"aircraft",anchor:[.5,.5]},shipProwlerShadow:{texture:"prowler_shadow",layer:"shadows",anchor:[.5,.5]},mountain1:{texture:"mountain1",layer:"doodads",anchor:[.5,.5]},mountain2:{texture:"mountain2",layer:"doodads",anchor:[.5,.5]},mountain3:{texture:"mountain3",layer:"doodads",anchor:[.5,.5]},mountain4:{texture:"mountain4",layer:"doodads",anchor:[.5,.5]},doodadField:{texture:"doodad_field",layer:"fields",anchor:[.5,.5]}},o={};Textures.load=function(){for(var i in t)o[i]=new e.Texture.fromImage(t[i]);var s;for(var i in n)s=n[i],o[i]=new e.Texture(o[s[0]].baseTexture,new e.Rectangle(s[1][0],s[1][1],s[1][2],s[1][3]));for(var i in r)s=r[i],o[i]=new e.Texture(o[s[0]].baseTexture,new e.Rectangle(s[1][0],s[1][1],s[1][2],s[1][3]))},Textures.get=function(e){return o[e]},Textures.getNamed=function(e){return o[i[e].texture]},Textures.init=function(e,t){var n=JSON.parse(JSON.stringify(i[e]));if("screencenter"===n.position&&(n.position=[game.halfScreenX,game.halfScreenY]),t)for(var r in t)n[r]=t[r];return Graphics.initSprite(n.texture,game.graphics.layers[n.layer],n)},Textures.sprite=function(t){return new e.Sprite(o[t])},Textures.tile=function(t,n,r){return new e.extras.TilingSprite(o[t],n,r)}}).call(this,n(13))},function(e,t,n){"use strict";(function(e){var t=n(0);const r=["id","hidpi"];var i={},o=0,s={started:!1,startX:200,startY:-2450,pan:0,dist:100,explosion:4e3,direction:1},a="";Tools.updateReel=function(){if(!s.started){s.pos=t.a.zero();for(var e,n=[3,1,2,4,5],r=[-270,-150,0,150,270],i=0;i<n.length;i++)Players.add({id:i+1,team:1,status:0,reel:!0,name:"",type:n[i],posX:0,posY:0,rot:0,flag:1}),(e=Players.get(i+1)).keystate.UP=!0,e._offset=r[i]}s.started=!0,s.dist>2e3?s.direction=-1:s.dist<100&&(s.direction=1),s.dist+=.5*s.direction*game.timeFactor,s.pan+=1/s.dist*game.timeFactor,s.pos.x=s.startX+Math.sin(s.pan)*s.dist,s.pos.y=s.startY-Math.cos(s.pan)*s.dist,Graphics.setCamera(s.pos.x,s.pos.y),Players.update(),Particles.update();for(var o,a=1;a<=5;a++)(o=Players.get(a)).pos.x=s.pos.x+o._offset,o.pos.y=s.pos.y+game.screenY/game.scale*.24,null!=o._prevPos?o.rot=new t.a(o.pos.x-o._prevPos.x,o.pos.y-o._prevPos.y).angle()+Math.PI:o._prevPos=o.pos.clone(),o._prevPos=new t.a((19*o._prevPos.x+o.pos.x)/20,(19*o._prevPos.y+o.pos.y)/20);if(game.time>s.explosion){var l=new t.a(Tools.rand(s.pos.x-game.halfScreenX/game.scale,s.pos.x+game.halfScreenX/game.scale),Tools.rand(s.pos.y-game.halfScreenY/game.scale,s.pos.y+game.halfScreenY/game.scale));Particles.explosion(l,Tools.rand(2,2.5),Tools.randInt(4,7)),Particles.explosion(new t.a(l.x+Tools.rand(-100,100),l.y+Tools.rand(-100,100)),Tools.rand(1,1.2)),s.explosion=game.time+Tools.rand(1e3,3e3)}},Tools.wipeReel=function(){Particles.wipe(),Players.wipe()},Tools.startupMsg=function(){console.log("%cΛIRMΛSH Engine "+game.version+" starting up!","font-size: 20px;"),console.log(""),console.log("%c*** Important message ***","font-size: 16px; color: red;"),console.log("%cDo not paste any commands given by players in this console window","font-size: 14px; color: red;"),console.log("")},Tools.detectCapabilities=function(){l(),config.mobile&&!config.settings.mobileshown&&(UI.popBigMsg(1),config.settings.mobileshown=!0,Tools.setSettings({mobileshown:!0})),config.mobile&&Input.setupLogin()};var l=function(){config.mobile="ontouchstart"in document.documentElement&&void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),config.ios=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,"#forcemobile"==window.location.hash&&(config.mobile=!0),"#nomobile"==window.location.hash&&(config.mobile=!1)};Tools.syncRemoteSettings=function(){if(config.auth.tokens&&config.auth.tokens.settings){var e={};Object.keys(config.settings).forEach(t=>{r.includes(t)||(e[t]=config.settings[t])});var t=JSON.stringify(e);t!==a&&(a=t,Tools.ajaxPost("https://"+game.backendHost+"/settings",t,config.auth.tokens.settings,(function(e){e&&1==e.result||(a="")})))}};var u=function(e){if(null==window.localStorage)return{};var t=null,n={};try{t=localStorage.getItem(e)}catch(t){}if(null!=t)try{n=JSON.parse(t)}catch(t){}return n},c=function(e,t){if(null!=window.localStorage)try{localStorage.setItem(e,JSON.stringify(t))}catch(e){}};Tools.loadSettings=function(){var e=u("settings");for(var t in e)config.settings[t]=e[t];DEVELOPMENT&&console.log(e),Tools.applySettingsToGame()},Tools.applySettingsToGame=function(){if(null==config.settings.id){var t=Tools.randomID(16);config.settings.id=t,Tools.setSettings({id:t})}null!=config.settings.name&&e("#playername").val(config.settings.name),null!=config.settings.region&&(game.playRegion=config.settings.region),null!=config.settings.flag&&(game.myFlag=config.settings.flag),null==config.settings.sound&&(config.settings.sound=!0),config.settings.mousemode&&Input.toggleMouse(!0),UI.updateSound(),config.oldhidpi=config.settings.hidpi},Tools.randomID=function(e){var t=new Uint8Array(e);return window.crypto.getRandomValues(t),h(t).substr(0,e)};var h=function(e){for(var t,n="",r=0;r<e.length;r++)n+=t=1===(t=(255&e[r]).toString(16)).length?"0"+t:t;return n};Tools.setSettings=function(e){for(var t in e)config.settings[t]=e[t];c("settings",config.settings)},Tools.removeSetting=function(e){null!=config.settings[e]&&delete config.settings[e],c("settings",config.settings)},Tools.wipeSettings=function(){config.settings={},c("settings",config.settings)};var d=function(){void 0!==config.auth.tokens&&void 0!==config.auth.tokens.settings&&void 0!==config.auth.tokens.game&&void 0!==config.auth.identityprovider&&void 0!==config.auth.loginname||(config.auth={},c("auth",config.auth))};Tools.loadAuth=function(){return config.auth=u("auth"),d(),!e.isEmptyObject(config.auth)},Tools.setAuth=function(e){config.auth=e,c("auth",config.auth),d()},Tools.ajaxPost=function(t,n,r,i){e.ajax({url:t,method:"POST",data:n,dataType:"json",timeout:1e4,headers:null==r?{}:{Authorization:"Bearer "+r},success:function(e){null!=i&&i(e)},error:function(){null!=i&&i(null)}})},Tools.ajaxGet=function(t,n,r){e.ajax({url:t,method:"GET",dataType:"json",timeout:1e4,headers:null==n?{}:{Authorization:"Bearer "+n},success:function(e){null!=r&&r(e)},error:function(){null!=r&&r(null)}})},Tools.length=function(e,t){return Math.sqrt(e*e+t*t)},Tools.oscillator=function(e,t,n){return 1+Math.sin((game.time+(n||0))/t)*e},Tools.converge=function(e,t,n){return Math.abs(e-t)<.01?t:e+n*(t-e)},Tools.rand=function(e,t){return Math.random()*(t-e)+e},Tools.randCircle=function(){return Tools.rand(0,6.28318530718)},Tools.randInt=function(e,t){var n=Math.floor(Math.random()*(t+1-e)+e);return n>=t&&(n=t),n},Tools.clamp=function(e,t,n){return e<=t?t:e>=n?n:e},Tools.lerp=function(e,t,n){return n*(t-e)+e},Tools.colorLerp=function(e,t,n){n<=0&&(n=.001),n>=1&&(n=.999);var r=e>>16,i=e>>8&255,o=255&e;return(1<<24)+(r+n*((t>>16)-r)<<16)+(i+n*((t>>8&255)-i)<<8)+(o+n*((255&t)-o))|0},Tools.distance=function(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)},Tools.distFastCheck=function(e,t,n,r){return Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=r},Tools.distFastCheckFloat=function(e,t,n,r,i){return Math.abs(e-n)<=i&&Math.abs(t-r)<=i},Tools.updateTime=function(e){game.timeFactor=e<60?e:60,game.timeFactorUncapped=game.timeFactor,game.timeFactor>10&&(game.timeFactor=10),game.time=performance.now(),game.frames++},Tools.reducedFactor=function(){var e=(performance.now()-game.time)/16.666;return Math.abs(game.jitter)>.1&&(e+=game.jitter/16.666),e};var p={shockwave:[.1,.1,.11,.12,.12,.13,.14,.14,.15,.16,.17,.18,.2,.21,.22,.24,.26,.29,.31,.35,.38,.42,.47,.52,.58,.64,.71,.78,.84,.9,.95,.98,1,1,1,.98,.97,.94,.9,.85,.78,.7,.62,.52,.43,.34,.26,.18,.11,.05,0],explosionSmoke:[0,0,.02,.06,.13,.26,.45,.71,.91,.99,.99,.97,.94,.92,.89,.86,.83,.8,.77,.74,.71,.68,.65,.63,.6,.57,.54,.51,.48,.45,.42,.4,.37,.34,.31,.29,.26,.24,.21,.19,.16,.14,.12,.1,.08,.06,.04,.02,.01,0,0]};Tools.easing={outElastic:function(e,t){var n=1-(t||.7),r=2*e;if(0===e||1===e)return e;var i=n/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*r)*Math.sin((r-i)*(2*Math.PI)/n)+1},custom:function(e,t){var n=p[t],r=n.length,i=Math.floor(e*(r-1)),o=n[i];return i===r-1?o:Tools.lerp(o,n[i+1],e*(r-1)%1)}},Tools.setupDebug=function(){DEVELOPMENT&&config.debug.show&&(UI.show("#debug"),game.debug={last:performance.now(),ticks:0,frames:game.frames},setInterval(Tools.updateDebug,2123))},Tools.debugLine=function(e,t){return'<div class="line"><span class="attr">'+UI.escapeHTML(e)+'</span><span class="val">'+UI.escapeHTML(t)+"</span></div>"},Tools.updateDebug=function(){var t=performance.now(),n=1e3*(game.frames-game.debug.frames)/(t-game.debug.last),r=Players.count(),i=Mobs.count(),o=Mobs.countDoodads(),s="",a=Players.getMe();null!=a&&(s=Tools.debugLine("Coords",Math.round(a.pos.x)+", "+Math.round(a.pos.y)));var l=Tools.debugLine("FPS",Math.round(n))+Tools.debugLine("Ticks",(game.debug.ticks/(t-game.debug.last)*100).toFixed(2)+"%")+Tools.debugLine("Ping",game.ping.toFixed(2)+" ms")+Tools.debugLine("Res",game.screenX+" x "+game.screenY)+'<div class="spacer"></div>'+Tools.debugLine("Players",r[0]+" / "+r[1])+Tools.debugLine("Mobs",i[0]+" / "+i[1])+Tools.debugLine("Particles",Particles.count())+Tools.debugLine("Doodads",o[0]+" / "+o[1])+'<div class="spacer"></div>'+s+Tools.debugLine("Scale",game.scale.toFixed(2))+Tools.debugLine("Jitter",game.jitter.toFixed(3))+'<div class="close" onclick="Tools.hideDebug()">x</div>';e("#debug").html(l),game.debug.last=t,game.debug.ticks=0,game.debug.frames=game.frames},Tools.hideDebug=function(){UI.hide("#debug")},Tools.debugStartFrame=function(){DEVELOPMENT&&config.debug.show&&(game.debug.startedFrame=performance.now())},Tools.debugEndFrame=function(){DEVELOPMENT&&config.debug.show&&null!=game.debug.startedFrame&&(game.debug.ticks+=performance.now()-game.debug.startedFrame)},Tools.earningsToRank=function(e){return Math.floor(.0111*Math.pow(e,.5))+1},Tools.rankToEarnings=function(e){return Math.pow((e-1)/.0111,2)},Tools.decodeKeystate=function(e,t){e.keystate.UP=0!=(1&t),e.keystate.DOWN=0!=(2&t),e.keystate.LEFT=0!=(4&t),e.keystate.RIGHT=0!=(8&t),e.boost=0!=(16&t),e.strafe=0!=(32&t),e.stealthed=0!=(64&t),e.flagspeed=0!=(128&t)},Tools.decodeUpgrades=function(e,t){e.speedupgrade=(0!=(1&t)?1:0)+(0!=(2&t)?2:0)+(0!=(4&t)?4:0),e.powerups.shield=0!=(8&t),e.powerups.rampage=0!=(16&t)},Tools.decodeMinimapCoords=function(e,n){return new t.a(128*e-16384+64,Tools.clamp(128*n-16384,-8192,8192)+64)},Tools.decodeSpeed=function(e){return(e-32768)/1638.4},Tools.decodeCoordX=function(e){return(e-32768)/2},Tools.decodeCoordY=function(e){return(e-32768)/4},Tools.decodeCoord24=function(e){return(e-8388608)/512},Tools.decodeAccel=function(e){return(e-32768)/32768},Tools.decodeRotation=function(e){return e/6553.6},Tools.decodeHealthnergy=function(e){return e/255},Tools.decodeRegen=function(e){return(e-32768)/1e6};Tools.initBuckets=function(){i={size:config.bucketSize,halfSize:parseInt(config.bucketSize/2),bucketsMaxX:parseInt(config.mapWidth/config.bucketSize)-1,bucketsMaxY:parseInt(config.mapHeight/config.bucketSize)-1,bucketsHalfX:parseInt(config.mapWidth/config.bucketSize/2),bucketsHalfY:parseInt(config.mapHeight/config.bucketSize/2)};for(var e=0;e<=i.bucketsMaxX;e++){game.buckets.push([]);for(var t=0;t<=i.bucketsMaxY;t++)game.buckets[e].push([[]])}for(var n=0;n<config.doodads.length;n++)o=config.doodads[n][0],e=Tools.clamp(Math.floor(o/i.size)+i.bucketsHalfX,0,i.bucketsMaxX),r=config.doodads[n][1],t=Tools.clamp(Math.floor(r/i.size)+i.bucketsHalfY,0,i.bucketsMaxY),game.buckets[e][t][0].push(n);var r,o},Tools.getBucketBounds=function(e,t,n){return[Tools.clamp(Math.floor((e.x-t)/i.size)+i.bucketsHalfX,0,i.bucketsMaxX),Tools.clamp(Math.floor((e.x+t)/i.size)+i.bucketsHalfX,0,i.bucketsMaxX),Tools.clamp(Math.floor((e.y-n)/i.size)+i.bucketsHalfY,0,i.bucketsMaxY),Tools.clamp(Math.floor((e.y+n)/i.size)+i.bucketsHalfY,0,i.bucketsMaxY)]},Tools.deferUpdate=function(e){setTimeout(e,1)};var f=function(e,t){if(t instanceof Error){var n={};return Object.getOwnPropertyNames(t).forEach((function(e){n[e]=t[e]})),n}return t};Tools.handleError=function(e){if((o+=1)<=5){let t;null!=e.error&&(e.error=JSON.stringify(e.error,f)),game.server&&game.server.id&&(t=game.server.id),Tools.ajaxPost("https://"+game.backendHost+"/clienterror",{type:"runtime",error:JSON.stringify(e),version:game.version,state:game.state,server:t})}},Tools.encodeUTF8=function(e){for(var t=0,n=new Uint8Array(4*e.length),r=0;r!=e.length;r++){var i=e.charCodeAt(r);if(i<128)n[t++]=i;else{if(i<2048)n[t++]=i>>6|192;else{if(i>55295&&i<56320){if(++r==e.length)throw"UTF-8 encode: incomplete surrogate pair";var o=e.charCodeAt(r);if(o<56320||o>57343)throw"UTF-8 encode: second char code 0x"+o.toString(16)+" at index "+r+" in surrogate pair out of range";i=65536+((1023&i)<<10)+(1023&o),n[t++]=i>>18|240,n[t++]=i>>12&63|128}else n[t++]=i>>12|224;n[t++]=i>>6&63|128}n[t++]=63&i|128}}return n.subarray(0,t)},Tools.decodeUTF8=function(e){for(var t="",n=0;n<e.length;){var r=e[n++];if(r>127){if(r>191&&r<224){if(n>=e.length)throw"UTF-8 decode: incomplete 2-byte sequence";r=(31&r)<<6|63&e[n]}else if(r>223&&r<240){if(n+1>=e.length)throw"UTF-8 decode: incomplete 3-byte sequence";r=(15&r)<<12|(63&e[n])<<6|63&e[++n]}else{if(!(r>239&&r<248))throw"UTF-8 decode: unknown multibyte start 0x"+r.toString(16)+" at index "+(n-1);if(n+2>=e.length)throw"UTF-8 decode: incomplete 4-byte sequence";r=(7&r)<<18|(63&e[n])<<12|(63&e[++n])<<6|63&e[++n]}++n}if(r<=65535)t+=String.fromCharCode(r);else{if(!(r<=1114111))throw"UTF-8 decode: code point 0x"+r.toString(16)+" exceeds UTF-16 reach";r-=65536,t+=String.fromCharCode(r>>10|55296),t+=String.fromCharCode(1023&r|56320)}}return t},Tools.stripBotsNamePrefix=function(e){return game.server.config&&game.server.config.botsNamePrefix&&e.startsWith(game.server.config.botsNamePrefix)&&(e=e.substring(game.server.config.botsNamePrefix.length)),e},Tools.mungeNonAscii=function(e,t){if(!config.airmashRefugees.unicodeWorkaround)return e;return/^[a-z0-9!"#$%&'()*+,.\/:;<=>?@\[\] ^_`{|}~-]*$/i.test(e)?e:"player#"+t}}).call(this,n(10))},function(e,t,n){"use strict";(function(e,t){n(214);var r={},i={},o=null,s=!1,a=0,l=!1,u=!1,c=0,h=!1,d=null,p=!1,f=null,g=!1,m=!1,v=!1,y=null,b=0,_=!1,T=!1,x=null,w=!1,E=null,S={x:0,y:0,width:0,height:0},M={alert:null,information:null,default:null,destroyed:null},I={alert:!1,information:!1,default:!1,destroyed:!1},P={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},A=!1,O={},C=[],R=0,k={1:["Predator",80,50,75,60,"BOOST","Temporarily increases speed by burning energy"],2:["Goliath",30,100,30,100,"REPEL","Repels enemy aircraft and missiles"],3:["Mohawk",100,40,100,40,"STRAFE","Enables sideways flight"],4:["Tornado",60,70,50,80,"MULTIFIRE","Launches 3 missiles at the same time"],5:["Prowler",50,70,40,60,"STEALTH","Becomes invisible to enemy aircraft"],101:["Speed"],102:["Defense"],103:["Energy Regen"],104:["Missile Speed"]},D=["tf","pepe","clap","lol","bro","kappa","cry","rage"],L=["","Shield","Inferno"];UI.show=function(t,n){e(t).css({display:n?"inline-block":"block"})},UI.hide=function(t){e(t).css({display:"none"})},UI.isEmote=function(e,t){for(var n=0;n<D.length;n++)if(t){if(e===":"+D[n]+":")return D[n]}else if(e===D[n])return D[n];return!1};var N=function(e){let t=/^(<span class="info inline"><span class="(blueflag|redflag)"><\/span><\/span>(Captured|Returned|Taken) by )(.*)$/m.exec(e);if(t){let e=Tools.stripBotsNamePrefix(t[4]);return t[1]+function(e){return UI.escapeHTML(e.replace(/&#x2F;/g,"/").replace(/&#x27;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"))}(e)}return UI.escapeHTML(e.replace(/<br>/g,"\n")).replace(/\n/g,"<br>")};UI.serverMessage=function(e){let t="alert";2==e.type&&(t="information"),UI.showMessage(t,N(e.text),e.duration)},UI.showMessage=function(t,n,r){e("#msg-"+t).removeClass("hidemsg").removeClass("popmsg"),e("#msg-"+t).html(n);var i=e("#msg-"+t).height();"default"!=t&&"destroyed"!=t||e("#msg-"+t).css({"margin-top":"-"+Math.round(i/2)+"px"}),e("#msg-"+t).addClass("popmsg"),I[t]=!0,clearTimeout(M[t]),M[t]=setTimeout(UI.hideMessage,r||2e3,t)},UI.hideMessage=function(t){e("#msg-"+t).addClass("hidemsg"),I[t]=!1,M[t]=setTimeout((function(n){e("#msg-"+t).removeClass("popmsg").removeClass("hidemsg"),e("#msg-"+n).html("")}),2500,t)},UI.wipeAllMessages=function(){for(var e in I)I[e]&&UI.showMessage(e,"",100)},UI.updateMyLevel=function(t){game.myLevel=t,e("#score-rank").html(t),e("#lifetime-rank").html(t)},UI.newScore=function(t){if(t.id!=game.myID)return!1;let n=t.score-game.myScore,r="";if(Math.abs(n)<1&&(n=!1),game.myScore=t.score,t.score!=P.score&&(P.score=t.score),e("#score-score").html(t.score),t.upgrades!=P.upgrades){let n=t.upgrades-P.upgrades,i=-1!=P.upgrades;if(P.upgrades=t.upgrades,e("#score-upgrades").html(t.upgrades),q(),i&&n>0){if(Sound.powerup(4,null),A&&(A.msg+="<br>"),I.default)return r+='&nbsp;&nbsp;<span class="upgrade">+'+n+"</span>",void e("#alert-update").append(r);r+='<span id="alert-update"><span class="upgrade">+'+n+'<span class="bold"> upgrade</span></span></span>'}}if(t.earnings!=P.earnings&&0!=game.myLevel){P.earnings=t.earnings,e("#lifetime-totalbounty").html(t.earnings);let n=Math.ceil(Tools.rankToEarnings(game.myLevel+1)-t.earnings);e("#lifetime-nextbounty").html("+"+n)}if(t.totalkills!=P.kills||t.totaldeaths!=P.deaths){let n=0==t.totalkills||0==t.totaldeaths?"-":(t.totalkills/t.totaldeaths).toFixed(2);e("#lifetime-kdratio").html(n)}t.totalkills!=P.kills&&(P.kills=t.totalkills,e("#lifetime-kills").html(t.totalkills)),t.totaldeaths!=P.deaths&&(P.deaths=t.totaldeaths,e("#lifetime-deaths").html(t.totaldeaths)),n&&(A&&(A.msg+="<br>"),r+=UI.getScoreString(n)),A?(UI.showMessage(A.type,A.msg+r,A.duration),A=!1):""!=r&&UI.showMessage("default",r,3e3)},UI.getScoreString=function(e,t,n){var r="positive",i="+";return e<0&&(r="negative",i="-"),t&&(r=t),'<span id="alert-update" class="'+r+'">'+i+Math.abs(e)+"</span>"};var U=function(e){e.sprite.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-e.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-e.y)/16384))};UI.wipeAllMinimapMobs=function(){for(var e in r)game.graphics.layers.ui1.removeChild(r[e].sprite),r[e].sprite.destroy(),delete r[e]},UI.showSpectator=function(t){if(!w){var n=config.mobile?' class="mobile"':"";e("body").append('<div id="spectator"'+n+"></div>"),w=!0}e("#spectator").html(t),Input.addTouchRejection("#spectator")},UI.hideSpectator=function(){w&&(e("#spectator").remove(),w=!1)},UI.addPowerup=function(t,n){null!=x&&clearTimeout(x);var r='<div class="powerup" id="powerup-'+t+'"><div class="percent '+(1==t?"shield":"rampage")+'" id="powerup-'+t+'-percent" style="transition: width '+n+'ms linear;"></div><div class="name">'+L[t]+"</div></div>";e("#powerups").html(r),e("#powerup-"+t+"-percent").width(),e("#powerup-"+t+"-percent").css({width:"7%"}),x=setTimeout((function(){e("#powerup-"+t).remove()}),n)},UI.resetPowerups=function(){e("#powerups").html("")},UI.changeMinimapTeam=function(e,t){if(null!=r[e]&&null!=r[e].sprite){var n=1==t?"minimapBlue":"minimapMob";r[e].sprite.texture=Textures.getNamed(n)}},UI.scoreboardUpdate=function(t,n,i){for(var o,s={},a=0,l=0;l<n.length;l++)if(null!=(o=Players.get(n[l].id))){var u=Tools.decodeMinimapCoords(n[l].x,n[l].y);if(o.lowResPos.x=u.x,o.lowResPos.y=u.y,n[l].id!=game.myID)if(0!=n[l].x||0!=n[l].y){if(s[o.id]=!0,null==r[n[l].id]){var c="minimapMob";GameType.CTF==game.gameType&&1==o.team&&(c="minimapBlue"),r[n[l].id]={sprite:Textures.init(c),x:u.x,y:u.y}}else r[n[l].id].x=u.x,r[n[l].id].y=u.y;U(r[n[l].id])}else{let e=Players.get(n[l].id);e&&performance.now()-e.lastKilled>3e3&&(e.spectate=!0)}else a=l+1}for(var h in r)null==s[h]&&(game.graphics.layers.ui1.removeChild(r[h].sprite),r[h].sprite.destroy(),delete r[h]);if(a){i=i?Tools.clamp(i,1,t.length):t.length;var d=0,p=!1,f="";for(l=0;l<i&&!p;l++){if(!(o=Players.get(t[l].id)))continue;var g;g=1==++d?'<span class="badge scoreboard gold"></span>':2==d?'<span class="badge scoreboard silver"></span>':3==d?'<span class="badge scoreboard bronze"></span>':d+".";var m=o.me()?" sel":"",v=t[l].score,y=o.bot?"bot":t[l].level;a>i&&d==i-1&&(f+='<div class="line dottedline">&middot; &middot; &middot;</div>',o=Players.get(game.myID),g=a+".",v=game.myScore,y=game.myLevel,m=" sel",p=!0);let e="",n="";GameType.CTF==game.gameType&&(e=" team-"+o.team);let r="";4==(g+"").length&&(r=" bigger"),o.isSpectating()&&!o.bot&&(e+=" spectating",r+=" spectating",n=" spectating"),f+='<div class="line '+m+'"><span class="place '+r+'">'+g+'</span><span class="flag small flag-'+o.flag+'" title="'+W(o.flag)+'"></span><span class="nick'+e+'">'+UI.escapeHTML(Tools.mungeNonAscii(o.name,o.id))+"</span>",y&&(f+='<span class="holder">&nbsp;<span class="rank'+(o.bot?" bot":"")+'">'+y+"</span></span>"),f+='<span class="score'+n+'">'+F(v)+"</span></div>"}!p&&t.length>i&&(f+='<div class="line dottedline">&middot; &middot; &middot;</div>'),e("#scoreboard").html(f)}};var F=function(e){var t="";e+="";for(var n=0;n<e.length;n++)t+="<span>"+e[n]+"</span>";return t};UI.toggleChatBox=function(t){if(!config.mobile)if(s){if(s=!1,t){var n=e("#chatinput").val();""!==n&&""!==n.trim()&&(UI.parseCommand(n.trim())||Network.sendChat(n)),B()}UI.hide("#chatinput"),e("#chatinput").val(""),e("#chatinput").blur()}else u&&UI.maximizeChat(),Input.clearKeys(!0),s=!0,UI.show("#chatinput"),e("#chatinput").focus()},UI.shortcutChat=function(t){s||(e("#chatinput").val(t),UI.toggleChatBox())};var B=function(){l||(l=!0,e("#chat-0").length&&e("#chat-0").remove())};UI.parseCommand=function(e){if("/"!==e[0])return!1;var t,n=e.split(" "),r=n[0].substr(1).toLowerCase();if(0==r.length)return!1;if("s"===r){var i=e.indexOf(" ");(o=e.substr(i+1)).length>0&&Network.sendSay(o)}else if("t"===r){var o;i=e.indexOf(" "),(o=e.substr(i+1)).length>0&&Network.sendTeam(o)}else"ignore"===r?null==(t=Players.getByName(V(n[1])))?UI.addChatMessage("Unknown player"):UI.chatIgnore(t.id):"unignore"===r?null==(t=Players.getByName(V(n[1])))?UI.addChatMessage("Unknown player"):UI.chatUnignore(t):"votemute"===r?null==(t=Players.getByName(V(n[1])))?UI.addChatMessage("Unknown player"):UI.chatVotemute(t):"w"===r?n.length>=3?UI.chatWhisper(n[1],e.substr(4+n[1].length)):UI.addChatMessage("Usage: /w player message"):"spectate"===r?null==(t=Players.getByName(V(n[1])))?UI.addChatMessage("Unknown player"):Network.sendCommand("spectate",t.id+""):"flag"===r||"flags"===r?2==n.length?Network.sendCommand("flag",e.substr(r.length+2)):UI.addChatMessage("Type /flag XX where XX is the 2-letter ISO code of a country",!0):"emotes"===r?UI.addChatMessage("Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage",!0):"help"===r?UI.toggleHelp():"debug"!==r&&(UI.isEmote(r)?Network.sendSay(":"+r+":"):Network.sendCommand(r,e.substr(r.length+2)));return!0},UI.onChatlineClick=function(e){navigator.clipboard&&navigator.clipboard.writeText&&(navigator.clipboard.writeText(e.target.innerText),UI.serverMessage({type:1,text:"Copied to clipboard",duration:1e3}))},UI.addChatLine=function(t,n,r){if(!i[t.id]){if(a++,0==r)var o='<div id="chat-'+a+'" class="line"><span class="playersel" data-playerid="'+t.id+'"><span class="flag small flag-'+t.flag+'" title="'+W(t.flag)+'"></span><span class="nick">'+UI.escapeHTML(t.name)+'</span></span><span class="text">'+UI.escapeHTML(n,!0)+"</span></div>";else if(1==r||2==r){var s=1==r?"TO":"FROM";2==r&&(E=z(Tools.mungeNonAscii(t.name,t.id))),o='<div id="chat-'+a+'" class="line"><span class="tag whisper">'+s+'</span><span class="playersel" data-playerid="'+t.id+'"><span class="nick green">'+UI.escapeHTML(t.name)+'</span></span><span class="text green">'+UI.escapeHTML(n,!0)+"</span></div>",-1}else o='<div id="chat-'+a+'" class="line"><span class="tag team">TEAM</span><span class="playersel" data-playerid="'+t.id+'"><span class="nick blue">'+UI.escapeHTML(t.name)+'</span></span><span class="text blue">'+UI.escapeHTML(n,!0)+"</span></div>",-1;(o=e(o)).click(UI.onChatlineClick);var l="#chat-"+(a-config.maxChatLines);if(e(l).length&&e(l).remove(),e("#chatlines").append(o),u)c++,e("#chatunreadlines").html(c),1==c&&UI.show("#chatunreadlines",!0);else{var h=e("#chatbox");1!=r&&2!=r&&t.id!=game.myID&&h.is(":hover")||(h.perfectScrollbar("update"),h.scrollTop(h[0].scrollHeight))}}},UI.addChatMessage=function(t,n){0,-1;var r='<div id="chat-'+ ++a+'" class="line">'+(n?"":'<span class="nick">⚠</span>')+'<span class="text">'+t+"</span></div>",i="#chat-"+(a-config.maxChatLines);e(i).length&&e(i).remove(),e("#chatlines").append(r);var o=e("#chatbox");o.perfectScrollbar("update"),o.scrollTop(o[0].scrollHeight)},UI.showChatLevel=function(e){var t=null;2==e?t="Type /flag XX where XX is the 2-letter ISO code of a country":3==e?t="Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage":4==e&&(t="Flag Pack #1: communist confederate imperial rainbow jolly"),null!=t&&UI.addChatMessage(t,!0)},UI.updateGameInfo=function(){let t=Players.categoryCounts(),n="";n+='<div class="item">',t.bots>0&&(n+=`<span class="icon-container"><div class="icon bots"></div></span><span class="greyed">${t.bots}</span>`),n+=`<span class="icon-container padded"><div class="icon players"></div></span>${t.players}`,game.gameType===GameType.CTF?(n+='<span class="greyed">&nbsp;&nbsp;(',n+=`<span style="color: #4076E2">${t.blueTeam}</span>`,n+="&nbsp;/&nbsp;",n+=`<span style="color: #EA4242">${t.redTeam}</span>`,n+="&nbsp;/&nbsp;",n+=`${t.spectators}`,n+=")</span>"):game.gameType===GameType.FFA&&(n+='<span class="greyed">&nbsp;&nbsp;(',n+=`<span style="color: #FFEC52">${t.players-t.spectators}</span>`,n+="&nbsp;/&nbsp;",n+=`${t.spectators}`,n+=")</span>"),n+=`<span class="icon-container padded"><div class="icon ping"></div></span>${game.ping}<span class="millis">ms</span>`,n+="</div>",e("#gameinfo").html(n)},UI.updateStats=function(e){game.ping=e.ping,UI.updateGameInfo()},UI.sayLine=function(e){Players.say(e)},UI.escapeHTML=function(e,t){return e=(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/`/g,"&#x60;"),t&&(e=e.replace(/\b(https?:|www\.|[\w.]+\.com)[^\s]*/gi,(function(e){var t=e;return 0!=t.toLowerCase().indexOf("http")&&(t="http://"+t),'<a target="_blank" href="'+t+'">'+e+"</a>"}))),e};var G=function(){var e=window.innerWidth,t=window.innerHeight;e==game.screenX&&t==game.screenY||UI.scheduleGraphicsResize(250)};UI.controlKey=function(e,t,n){if(game.state!=Network.STATE.PLAYING)return!0;if(n)if(13!=e){if(27==e)return s&&UI.toggleChatBox(!1),void UI.closeAllPanels();if(191!=e)if(75!=e)switch(t){case"ALTZOOM":UI.toggleScaleAltMode();break;case"ZOOMIN":UI.scaleIncrease();break;case"ZOOMOUT":UI.scaleDecrease();break;case"DEFAULTZOOM":UI.scaleDefault();break;case"DROPUPGRADE":UI.dropUpgrade();break;case"DROPFLAG":UI.dropFlag();break;case"SHOWSCORE":UI.toggleScore();break;case"MAINMENU":UI.toggleMainMenu();break;case"SHOWGAMES":Games.toggleGames();break;case"FULLSCREEN":Graphics.toggleFullscreen(),Input.clearKeys();break;case"MINIMIZECHAT":UI.minimizeChat();break;case"MAXIMIZECHAT":UI.maximizeChat();break;case"SAY":UI.shortcutChat("/s ");break;case"TEAM":UI.shortcutChat("/t ");break;case"REPLY":null!=E&&UI.shortcutChat("/w "+E+" ");break;case"SPECTATE":Network.spectateForce();break;case"UPGRADE1":UI.selectUpgrade(1);break;case"UPGRADE2":UI.selectUpgrade(2);break;case"UPGRADE3":UI.selectUpgrade(3);break;case"UPGRADE4":UI.selectUpgrade(4);break;case"SOUND":Sound.toggle();break;case"HELP":UI.toggleHelp();break;case"INVITE":UI.toggleInvite();break;case"MOUSEMODE":Input.toggleMouse()}else Input.toggleKeybinds();else UI.shortcutChat("/")}else UI.toggleChatBox(!0)},UI.chatBoxOpen=function(){return s},UI.setupMinimap=function(){game.graphics.gui.minimap=Textures.init("minimap"),game.graphics.gui.minimap_box=Textures.init("minimapBox"),UI.resizeMinimap(),UI.visibilityMinimap(!1)},UI.visibilityMinimap=function(e){game.graphics.gui.minimap.visible=e,game.graphics.gui.minimap_box.visible=e},UI.resizeMinimap=function(){for(var e in game.graphics.gui.minimap.scale.set(config.minimapSize/512),game.graphics.gui.minimap.position.set(game.screenX-config.minimapPaddingX,game.screenY-config.minimapPaddingY),game.graphics.gui.minimap_box.scale.set(.03+2*config.minimapSize*(game.screenX/game.scale/32768)/64,.03+config.minimapSize*(game.screenY/game.scale/16384)/64),r)U(r[e]);Games.update(!0)},UI.setupHUD=function(){game.graphics.gui.hudHealth_shadow=Textures.init("hudHealth_shadow"),game.graphics.gui.hudHealth=Textures.init("hudHealth"),game.graphics.gui.hudHealth_mask=Textures.init("hudHealth_mask"),game.graphics.gui.hudHealth_mask.blendMode=t.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudHealth.rotation=-1.5,game.graphics.gui.hudHealth.position.set(330,174),game.graphics.gui.hudHealth_mask.position.set(330,174),game.graphics.gui.hudEnergy_shadow=Textures.init("hudEnergy_shadow"),game.graphics.gui.hudEnergy=Textures.init("hudEnergy"),game.graphics.gui.hudEnergy_mask=Textures.init("hudEnergy_mask"),game.graphics.gui.hudEnergy_mask.blendMode=t.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudEnergy.position.set(-250,174),game.graphics.gui.hudEnergy_mask.position.set(-250,174),UI.resizeHUD(),UI.visibilityHUD(!1)},UI.visibilityHUD=function(e){game.graphics.gui.hudHealth_shadow.visible=e,game.graphics.gui.hudHealth.visible=e,game.graphics.gui.hudEnergy_shadow.visible=e,game.graphics.gui.hudEnergy.visible=e},UI.resizeHUD=function(){var e=.5*game.scale,t=game.halfScreenX-30*game.scale,n=game.halfScreenX+30*game.scale;game.graphics.gui.hudHealth_shadow.scale.set(e),game.graphics.gui.hudEnergy_shadow.scale.set(e),game.graphics.gui.hudHealth_shadow.position.set(t,game.halfScreenY),game.graphics.gui.hudEnergy_shadow.position.set(n,game.halfScreenY),game.graphics.gui.hudSpriteHealth.scale.set(e),game.graphics.gui.hudSpriteHealth.position.set(t,game.halfScreenY),game.graphics.gui.hudSpriteEnergy.scale.set(e),game.graphics.gui.hudSpriteEnergy.position.set(n,game.halfScreenY)},UI.selectAircraft=function(e){Network.sendCommand("respawn",e+"")},UI.aircraftSelected=function(t){t=parseInt(t);for(var n=1;n<=5;n++)n==t?e("#selectaircraft-"+n).addClass("sel"):e("#selectaircraft-"+n).removeClass("sel")},UI.killed=function(e){let t="";e.bot?t='<span class="level bot">bot</span>':e.level&&(t='<span class="level">'+e.level+"</span>"),(game.time-R>1500||C.length>=6)&&(C=[]),R=game.time,C.push([e.flag,e.name,t]);for(var n="",r="",i=0;i<C.length;i++)r=C[i][1],1!=C.length&&r.length>10&&(r=r.substr(0,10)+"..."),n+='<span class="player"><span class="flag big flag-'+C[i][0]+'"></span>'+UI.escapeHTML(r)+C[i][2]+"</span>";A={type:"default",duration:3e3,msg:"You have destroyed"+n}},UI.killedBy=function(e){let t="";e.bot?t='<span class="level bot">bot</span>':e.level&&(t='<span class="level">'+e.level+"</span>"),A={type:"destroyed",duration:3e3,msg:'Destroyed by<span class="playerbig"><span class="flag big flag-'+e.flag+'"></span>'+UI.escapeHTML(e.name)+t+"</span>"}},UI.errorHandler=function(e){switch(e.error){case 1:UI.showMessage("alert",'<span class="info">DISCONNECTED</span>Packet flooding detected<br><span class="button" onclick="Network.reconnect()">RECONNECT</span>',2e4),Network.receivedError(e.error);break;case 2:UI.showMessage("alert",`<span class="info">BANNED</span>You have been banned from this server (${UI.escapeHTML(game.server.id)}) for packet flooding`,2e4),Network.receivedError(e.error);break;case 3:UI.showMessage("alert",`<span class="info">BANNED</span>You have been banned from this server (${UI.escapeHTML(game.server.id)})`,2e4),Network.receivedError(e.error);break;case 4:Network.receivedError(e.error),Games.redirRoot();break;case 5:UI.showMessage("alert",'<span class="info">RESPAWN</span>Full health and 2 seconds of inactivity required',3e3);break;case 6:let t="AFK time exceeded the server limit";game.server.config&&game.server.config.afk&&(t=`AFK for more than ${UI.escapeHTML(game.server.config.afk)} minute${1!=game.server.config.afk?"s":""}`),UI.showMessage("alert",`<span class="info">DISCONNECTED</span>${t}<br><span class="button" onclick="Network.reconnect()">RECONNECT</span>`,72e5),Network.receivedError(e.error);break;case 7:UI.showMessage("alert",'<span class="info">DISCONNECTED</span>You have been kicked out',2e4),Network.receivedError(e.error);break;case 8:UI.showMessage("alert",'<span class="info">DISCONNECTED</span>Invalid login data',2e4),Network.receivedError(e.error);break;case 9:UI.showMessage("alert",'<span class="info">DISCONNECTED</span>Incorrect protocol level<br>Please clear your browser cache and refresh',2e4),Network.receivedError(e.error);break;case 10:UI.showMessage("alert",'<span class="info">BANNED</span>Account banned',2e4),Network.receivedError(e.error);break;case 11:UI.showMessage("alert",'<span class="info">DISCONNECTED</span>Account already logged in<br><span class="button" onclick="Network.reconnect()">RECONNECT</span>',2e4),Network.receivedError(e.error);break;case 12:UI.showMessage("alert",'<span class="info">RESPAWN</span>Cannot respawn or change aircraft in a Battle Royale game',3e3);break;case 13:UI.showMessage("alert",'<span class="info">SPECTATE</span>Full health and 2 seconds of inactivity required',3e3);break;case 20:UI.showMessage("information",'<span class="info">UPGRADE</span>Not enough upgrade points',3e3);break;case 30:UI.addChatMessage("Chat throttled to prevent spamming");break;case 31:UI.showMessage("alert",'<span class="info">THROTTLED</span>Flag change too fast');break;case 100:UI.addChatMessage("Unknown command")}},UI.showCommandReply=function(t){if(0==t.type)UI.addChatMessage(UI.escapeHTML(t.text,!0));else{var n=JSON.stringify(JSON.parse(t.text),null,"    "),r='<div class="close" onclick="$(this).parent().remove()"></div><div class="text"><pre>'+UI.escapeHTML(n,!0)+"</pre></div>";e("body").append('<div id="debugpopup" oncontextmenu="event.stopPropagation()">'+r+"</div>")}},UI.updateHUD=function(e,t,n){e=Tools.clamp(e,0,1),t=Tools.clamp(t,0,1),game.graphics.gui.hudHealth.rotation=-1.1*(1-e),game.graphics.gui.hudEnergy.rotation=Math.PI+1.1*(1-t),game.graphics.gui.hudHealth.tint=e>.5?Tools.colorLerp(13487404,2591785,2*(e-.5)):Tools.colorLerp(12201261,13487404,2*e);var r=3374821;n&&(r=t<config.ships[n.type].energyLight?2841755:3374821),game.graphics.gui.hudEnergy.tint=r},UI.minimizeChat=function(e){u||(s&&UI.toggleChatBox(),u=!0,c=0,UI.hide("#chatbox"),UI.hide("#chatunreadlines"),UI.show("#maximizechat"),e&&e.stopPropagation())},UI.maximizeChat=function(){if(u){u=!1,UI.hide("#maximizechat"),UI.hide("#chatunreadlines"),UI.show("#chatbox");var t=e("#chatbox");t.scrollTop(t[0].scrollHeight)}},UI.closeScore=function(){h&&(UI.hidePanel("#scoredetailed"),h=!1,clearInterval(d))},UI.openScore=function(){h||(UI.closeAllPanels("score"),UI.showPanel("#scoredetailed"),h=!0,Network.getScores(),clearInterval(d),d=setInterval(Network.getScores,5e3))},UI.toggleScore=function(){h?UI.closeScore():UI.openScore()},UI.openLogin=function(){T||(UI.showPanel("#loginselector"),T=!0,Games.closeDropdowns())},UI.closeLogin=function(){T&&(UI.hidePanel("#loginselector"),T=!1)},UI.showPanel=function(t){var n=.9,r=1;config.phone&&(n*=.7,r*=.7),e(t).css({display:"block",opacity:"0",transform:"scale("+n+")","pointer-events":"auto"}),e(t).width(),e(t).css({opacity:"1",transform:"scale("+r+")",transition:"all 0.75s cubic-bezier(0.23, 1, 0.32, 1)"}),"#custom-msg"!=t&&Sound.UIClick()},UI.hidePanel=function(t,n,r,i){if("#custom-msg"!=t||e("#custom-msg").length){var o=.9;config.phone&&(o*=.7),i?e(t).css({transition:"all 1.5s cubic-bezier(0.23, 1, 0.32, 1)"}):e(t).css({transition:"all 0.75s cubic-bezier(0.23, 1, 0.32, 1)"}),e(t).css({opacity:"0",transform:"scale("+o+")","pointer-events":"none"}),i||Sound.UIClick(),setTimeout((function(t){let i={"#mainmenu":m,"#scoredetailed":h,"#howtoplay":g,"#invitefriends":_,"#loginselector":T}[t];if(void 0===i&&(i=n),!i){if(r)return void e(t).remove();e(t).css({display:"none",transform:"none",transition:"none"})}}),i?1600:800,t)}},UI.openInvite=function(){_||(UI.closeAllPanels("invite"),game.inviteLink=document.URL+"#"+game.server.id,e("#invite-link").html(game.inviteLink),e("#invite-link").attr("href",game.inviteLink),UI.showPanel("#invitefriends"),_=!0)},UI.closeInvite=function(){_&&(UI.hidePanel("#invitefriends"),_=!1)},UI.toggleInvite=function(){_?UI.closeInvite():UI.openInvite()},UI.closeMainMenu=function(){m&&(UI.hidePanel("#mainmenu"),m=!1)},UI.updateMainMenuSettings=function(){config.settings.hidpi?e("#mainmenu-hidpi-tick").addClass("ticked"):e("#mainmenu-hidpi-tick").removeClass("ticked")},UI.openMainMenu=function(){m||(UI.closeAllPanels("mainmenu"),UI.updateMainMenuSettings(),UI.showPanel("#mainmenu"),m=!0)},UI.toggleMainMenu=function(){m?UI.closeMainMenu():UI.openMainMenu()},UI.closeAllPanels=function(t){"mainmenu"!==t&&UI.closeMainMenu(),"score"!==t&&UI.closeScore(),"help"!==t&&UI.hideHelp(),"games"!==t&&Games.closeGames(),"invite"!==t&&UI.closeInvite(),"login"!==t&&UI.closeLogin(),"keybinds"!==t&&Input.closeKeybinds(),e("#custom-msg").length&&UI.hidePanel("#custom-msg",!1,!0)};var j=function(e){return(e=Math.round(e))<1e3?e:e<1e5?(e/1e3).toFixed(1)+" K":e<1e6?Math.round(e/1e3)+" K":(e/1e6).toFixed(1)+" M"},H=[["name","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["damage","Damage"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]],X=[["name","&nbsp;"],["wins","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]],Y=[["name","&nbsp;"],["captures","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]],W=function(e){var t=FlagCodeById[e];if(!t)return"";var n=CountryNames[t];return n?n+" ("+t+")":t};UI.updateScore=function(t){if(h){var n,r=["gold","silver","bronze"],i=t.scores;i.sort((function(e,t){return t.score-e.score})),n=t.c==Network.SERVERPACKET.SCORE_DETAILED_BTR?X:t.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?Y:H;for(var o="",s=0;s<n.length;s++)o+='<div class="'+n[s][0]+'">'+n[s][1]+"</div>";for(var a="",l=-1,u=-1,c=0;c<i.length;c++){var d=Players.get(i[c].id);if(!d)continue;var p=c<=2?'&nbsp;<div class="badge detail '+r[c]+'"></div>':c+1+".",f=d.me()?" sel":"";let e="";t.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(e+=` team-${d.team}`);let n="";t.c==Network.SERVERPACKET.SCORE_DETAILED_BTR?i[c].alive||(e+=" spectating",n+=" spectating"):d.isSpectating()&&!d.bot&&(e+=" spectating",n+=" spectating"),a+='<div class="item '+f+'"><div class="name"><div class="position">'+p+'</div><div class="flag small flag-'+d.flag+'" title="'+W(d.flag)+'"></div><div class="player'+e+'">'+UI.escapeHTML(d.name)+"</div>"+(d.bot?'<div class="bot">bot</div>':"")+"</div>",t.c==Network.SERVERPACKET.SCORE_DETAILED_BTR&&(0==i[c].wins?a+='<div class="wins">&nbsp;</div>':a+='<div class="wins '+n+'">'+i[c].wins+'<div class="wins-container">&nbsp;<div class="wins-icon '+n+'"></div></div></div>'),t.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(0==i[c].captures?a+='<div class="captures">&nbsp;</div>':a+='<div class="captures '+n+'">'+i[c].captures+'<div class="captures-container">&nbsp;<div class="captures-icon '+n+'"></div></div></div>'),a+='<div class="kills '+n+'">'+i[c].kills+'</div><div class="deaths '+n+'">'+i[c].deaths+"</div>",t.c==Network.SERVERPACKET.SCORE_DETAILED&&(a+='<div class="damage '+n+'">'+j(i[c].damage)+"</div>"),a+='<div class="bounty '+n+'">'+i[c].score+'</div><div class="rank '+n+'">'+(0==i[c].level?"&nbsp;":i[c].level)+'</div><div class="ping '+n+'">'+i[c].ping+'<span class="ms">ms</span></div></div>',t.c==Network.SERVERPACKET.SCORE_DETAILED?i[c].damage>l&&(l=i[c].damage,u=d):t.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?i[c].captures>l&&(l=i[c].captures,u=d):i[c].kills>l&&(l=i[c].kills,u=d)}var g="";i.length>1&&(g="&bull;&nbsp;&nbsp;"+i.length+" players");var m="";if(l>0){if(t.c==Network.SERVERPACKET.SCORE_DETAILED)var v=j(l),y=" damage";else v=l+"",y=t.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?" capture":" kill",l>1&&(y+="s");m=`\n            <div class="mvpbadge">MVP</div>\n            <div class="flag flag-${u.flag}"></div>\n            <div class="name">${UI.escapeHTML(u.name)}</div>\n            <div class="damage">&nbsp;&nbsp;&bull;&nbsp;&nbsp;${v}${y}</div>\n        `}e("#scoreplayers").html(g),e("#scoretable").html(o),e("#scorecontainer").html(a),e("#scoremvp").html(m)}},UI.popMenu=function(t,n){if(game.state==Network.STATE.LOGIN)return Games.closeDropdowns(),void UI.closeLogin();game.state!=Network.STATE.PLAYING||n||UI.closeAllPanels();var r=e(t.target).parent().data("playerid");if(null==r&&(r=e(t.target).data("playerid")),null!=r&&r!=game.myID){var o=Players.get(r);if(null==o)return!0;var s={left:"20px",top:e(t.target).parent()[0].getBoundingClientRect().top-166+"px"};p||(s.display="block",p=!0);var a=null==i[o.id]?"Ignore":"Unignore",l='<div class="header">'+UI.escapeHTML(o.name)+'</div><div class="item" onclick="UI.contextWhisper()">Whisper</div><div class="item" onclick="UI.context'+a+'()">'+a+'</div><div class="item" onclick="UI.contextVotemute()">Vote mute</div><div class="arrow"></div>';return e("#contextmenu").html(l),e("#contextmenu").css(s),f=o.id,t.stopPropagation(),!1}UI.closeMenu()};var z=function(e){return(e+"").replace(/&/g,"&a;").replace(/ /g,"&s;")},V=function(e){return(e+"").replace(/&s;/g," ").replace(/&a;/g,"&")};UI.chatWhisper=function(e,t){e=V(e);var n=Players.getByName(e);null!=n?Network.sendWhisper(n.id,t):UI.addChatMessage("Unknown player")},UI.chatIgnore=function(e){var t=Players.get(e);null!=t&&e!=game.myID&&null==i[t.id]&&(i[t.id]=!0,UI.addChatMessage("Ignoring player "+UI.escapeHTML(t.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;To unignore type /unignore "+UI.escapeHTML(z(t.name)),!0))},UI.chatUnignore=function(e){i[e.id]&&(delete i[e.id],UI.addChatMessage("Removed player "+UI.escapeHTML(e.name)+" from ignore list",!0))},UI.chatVotemute=function(e){if(e.id!=game.myID){Network.voteMute(e.id);var t=Math.floor(Math.sqrt(Players.count()[1]))+1;UI.addChatMessage("Voted to mute "+UI.escapeHTML(e.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+t+" total votes are required",!0)}},UI.chatVotemutePass=function(e){UI.addChatMessage("The vote to mute "+UI.escapeHTML(e.name)+" has passed",!0)},UI.chatMuted=function(){UI.addChatMessage("You have been muted")},UI.contextWhisper=function(){if(null!=f){var e=Players.get(f);null!=e&&f!=game.myID&&UI.shortcutChat("/w "+z(e.name)+" ")}},UI.contextIgnore=function(){null!=f&&f!=game.myID&&UI.chatIgnore(f)},UI.contextUnignore=function(){if(null!=f){var e=Players.get(f);null!=e&&f!=game.myID&&UI.chatUnignore(e)}},UI.contextVotemute=function(){if(null!=f){var e=Players.get(f);null!=e&&f!=game.myID&&UI.chatVotemute(e)}},UI.closeMenu=function(){p&&(UI.hide("#contextmenu"),p=!1)},UI.nameEntered=function(){var t=e("#playername").val().trim();t.length>0?(game.myOriginalName=t,Games.start(t,!0)):Games.highlightInput("#playername")},UI.dropUpgrade=function(e){Network.sendCommand("upgrades","drop")},UI.dropFlag=function(e){Network.sendCommand("drop","")},UI.selectUpgrade=function(e){Network.sendCommand("upgrade",e+"")};var q=function(){let t=["","speed","defense","energy","missile"];for(let n=1;n<5;n++)O[t[n]]<5&&P.upgrades>0?e("#selectupgrade-"+n).addClass("lighted"):e("#selectupgrade-"+n).removeClass("lighted")};UI.updateUpgrades=function(t,n,r){for(var i,o=["","speed","defense","energy","missile"],s=1;s<5;s++)i=s-1,null!=O[o[s]]&&O[o[s]]==t[i]||(O[o[s]]=t[i],e("#selectupgrade-"+s+"-level").html(t[i]),v&&b-100==s&&UI.popTooltip(null,100+s));if(null!=r){if(0!=r){var a="+"+Math.round(100*(config.upgrades[o[r]].factor[O[o[r]]]-1))+"% "+["","Speed","Defense","Energy Regen","Missile Speed"][r];UI.showMessage("information",'<span class="info">UPGRADE</span>'+a,3e3),Sound.playerUpgrade()}P.upgrades=n,e("#score-upgrades").html(n)}q()},UI.resetUpgrades=function(){UI.updateUpgrades([0,0,0,0])},UI.popBigMsg=function(t){if(1==t)var n='<div id="big-message" onclick="UI.closeBigMsg()"><div class="msg">Mobile mode</div><div class="small">Mobile mode has touch controls and requires latest phone/tablet hardware.</div><div class="small nopadtop">For the full experience please play on a PC with a physical keyboard.</div><div class="greyed">Tap anywhere to close</div></div>';else n='<div id="big-message"><div class="msg">WebGL required</div><div class="small">This game requires a WebGL enabled browser in order to run.<br>Please allow WebGL for this domain to continue.</div>';e("body").append(n)},UI.closeBigMsg=function(){e("#big-message").remove()},UI.showHelp=function(t){g||(UI.closeAllPanels("help"),!0===t?e("#howtoplay").addClass("hide"):e("#howtoplay").removeClass("hide"),UI.showPanel("#howtoplay"),g=!0)},UI.hideHelp=function(){g&&(UI.hidePanel("#howtoplay"),g=!1)},UI.toggleHelp=function(){g?UI.hideHelp():UI.showHelp()},UI.updateSound=function(t){config.settings.sound?(e("#settings-sound").addClass("soundon"),e("#settings-sound").removeClass("soundoff"),e("#mainmenu-sound-icon").addClass("soundon"),e("#mainmenu-sound-icon").removeClass("soundoff"),e("#mainmenu-sound-text").html("Disable Sound")):(e("#settings-sound").addClass("soundoff"),e("#settings-sound").removeClass("soundon"),e("#mainmenu-sound-icon").addClass("soundoff"),e("#mainmenu-sound-icon").removeClass("soundon"),e("#mainmenu-sound-text").html("Enable Sound")),t&&UI.showMessage("alert",'<span class="info">SOUND</span>'+(config.settings.sound?"Enabled":"Disabled"),3e3)},UI.gameStart=function(t,n){n&&(e("#login-ui").remove(),UI.show("#logosmall"),UI.show("#menu",!0),config.mobile||UI.show("#chatbox"),UI.show("#roomnamecontainer"),UI.show("#scoreboard"),UI.show("#scorebig"),UI.show("#settings"),UI.show("#sidebar"),UI.showScaleSlider(),config.mobile&&K(),config.settings.helpshown||(UI.showHelp(!0),config.settings.helpshown=!0,Tools.setSettings({helpshown:!0}))),UI.hide("#gamespecific"),e("#gameinfo").html("&nbsp;"),e("#gameinfo").addClass("ingame"),O={},UI.resetUpgrades(),UI.hideSpectator(),UI.resetPowerups(),e("#open-menu").html("Connecting..."),game.myName=t,Network.setup()};var K=function(){$(),Graphics.toggleFullscreen(),Input.setupTouch()},$=function(){e("#howtoplay").addClass("mobile"),e("#howtoplay").html('<div class="header">HOW TO PLAY</div><div class="mobile-graphic"></div><div class="commands">For the best game experience play on a PC</div>')};UI.reconnection=function(){a=0,-1,P={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},A=!1,O={},i={},UI.resetUpgrades(),UI.resetPowerups(),UI.hideSpectator(),UI.wipeAllMinimapMobs(),UI.wipeAllMessages(),Games.wipe(),e("#gameinfo").html("&nbsp;"),e("#scoreboard").html(""),e("#chatlines").html(""),e("#score-score").html("&nbsp;"),e("#score-upgrades").html("&nbsp;"),e("#score-rank").html("-"),e("#roomname").html("&nbsp;"),e("#open-menu").html("Switching Game...")},UI.loggedIn=function(t){e("#roomname").html(game.roomName),e("#scoreheader").html(game.roomName+"&nbsp;&nbsp;"),e("#open-menu").html('<span class="arrowdown"></span>'+game.roomNameShort+'&nbsp;&nbsp;<span class="region">&bull;&nbsp;&nbsp;'+game.regionName+"</span>"),UI.visibilityHUD(!0),UI.visibilityMinimap(!0),UI.updateHUD(1,1)},UI.popTooltip=function(t,n){if(null==n)var r=t.data.t,i=t.currentTarget.getBoundingClientRect();else r=n;var o="";if(r<100){var s=k[r],a=["","Agility","Defense","Regen","Damage"];o+='<div class="header">'+s[0]+"</div>";for(var l=1;l<=4;l++)o+='<div class="item"><div class="name">'+a[l]+'</div><div class="val">&nbsp;<div class="bar"><div class="progress" style="width: '+s[l]+'%"></div></div></div></div>';o+='<div class="item"><div class="special">'+s[5]+'</div><div class="desc">'+s[6]+"</div></div>",o+='<div class="item"><div class="clickto">Click to respawn</div></div>'}else{var u=["","speed","defense","energy","missile"],c=r-100,h=O[u[c]],d="+"+Math.round(100*(config.upgrades[u[c]].factor[O[u[c]]]-1))+"%";o+='<div class="header">'+k[r][0]+"</div>",o+='<div class="item"><div class="level">'+h+" / "+(config.upgrades[u[c]].factor.length-1)+"</div>",h>0&&(o+='<div class="percent">'+d+"</div></div>"),h<config.upgrades[u[c]].factor.length-1?(o+='<div class="item smaller"><div class="requires">Requires 1 upgrade point</div></div>',o+='<div class="item smaller"><div class="clickto">Click to upgrade to '+(d="+"+Math.round(100*(config.upgrades[u[c]].factor[O[u[c]]+1]-1))+"%")+"</div></div>"):o+='<div class="item smaller"><div class="clickto">Max upgrade reached</div></div>'}o+='<div class="arrow"></div>',null==n&&e("#tooltip").css({left:Math.round(i.left+60)+"px",top:Math.round(i.top-10)+"px"}),e("#tooltip").html(o),b=r,null!=y&&clearTimeout(y),v||(v=!0,UI.show("#tooltip"))},UI.closeTooltip=function(){v&&(null!=y&&clearTimeout(y),y=setTimeout((function(){v&&(UI.hide("#tooltip"),e("#tooltip").html(""),v=!1,y=null)}),250))},UI.startDragChat=function(t){S.x=t.originalEvent.pageX,S.y=t.originalEvent.pageY,S.width=e("#chatbox").width()+16,S.height=e("#chatbox").height()+16,e("#chatbox").addClass("hovered"),e(window).on("mousemove",UI.dragChat),e(window).on("mouseup",UI.endDragChat)},UI.dragChat=function(t){var n=t.originalEvent.pageX,r=t.originalEvent.pageY;if(0!=n&&0!=r){game.screenY-r<100&&(r=game.screenY-100);var i=n-S.x,o=r-S.y;e("#chatbox").css({width:S.width+i+"px",height:S.height-o+"px"}),e("#minimizechatcontainer").css({width:S.width+i+"px",bottom:S.height-o+"px"}),e("#chatinput").css({width:S.width+i-12+"px",bottom:S.height-o+20+"px"})}},UI.endDragChat=function(t){e("#chatbox").removeClass("hovered"),e(window).off("mousemove",UI.dragChat),e(window).off("mouseup",UI.endDragChat)},UI.setup=function(){var t;for(e(window).resize(G),e(window).on("orientationchange",G),e(window).on("contextmenu",(function(e){return UI.popMenu(e,!0),e.preventDefault(),!1})),e(window).on("focus",Input.gameFocus),e(window).on("blur",Input.gameBlur),e(window).on("click",UI.popMenu),e("#minimizechat").on("click",UI.minimizeChat),e("#maximizechat").on("click",UI.maximizeChat),e("#viewscore").on("click",(function(e){game.state==Network.STATE.PLAYING&&(UI.openScore(),e.stopPropagation())})),e("#selectaircraft-1").on("click",(function(){UI.selectAircraft(1)})),e("#selectaircraft-2").on("click",(function(){UI.selectAircraft(2)})),e("#selectaircraft-3").on("click",(function(){UI.selectAircraft(3)})),e("#selectaircraft-4").on("click",(function(){UI.selectAircraft(4)})),e("#selectaircraft-5").on("click",(function(){UI.selectAircraft(5)})),e("#mainmenu-fullscreen").on("click",Graphics.toggleFullscreen),e("#mainmenu-invite").on("click",UI.openInvite),e("#mainmenu-score").on("click",UI.openScore),e("#mainmenu-game").on("click",Games.popGames),e("#mainmenu-hidpi").on("click",Graphics.toggleHiDPI),e("#mainmenu-sound").on("click",Sound.toggle),config.mobile?(e("#mainmenu-keybinds-text").html("<br>How To Play"),e("#mainmenu-keybinds").on("click",UI.toggleHelp),e(".keybind").css({display:"none"})):e("#mainmenu-keybinds").on("click",Input.openKeybinds),e("#settings-mainmenu").on("click",(function(e){UI.toggleMainMenu(),e.stopPropagation()})),e("#settings-sound").on("click",(function(e){Sound.toggle(),e.stopPropagation()})),e("#mainmenu").on("click",(function(e){e.stopPropagation()})),e("#scoredetailed").on("click",(function(e){e.stopPropagation()})),e("#invitefriends").on("click",(function(e){e.stopPropagation()})),e("#keybinds").on("click",(function(e){e.stopPropagation()})),e("#invite-link").on("contextmenu",(function(e){e.stopPropagation()})),e("#resetbinds").on("click",Input.resetBinds),config.mobile||(e("#chatbox").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),e("#chatinput").on("blur",(function(){s&&UI.toggleChatBox(!1)})),e("#resizechat").on("mousedown",UI.startDragChat)),e("#scorecontainer").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),e("#selectupgrade-1").on("click",(function(){UI.selectUpgrade(1)})),e("#selectupgrade-2").on("click",(function(){UI.selectUpgrade(2)})),e("#selectupgrade-3").on("click",(function(){UI.selectUpgrade(3)})),e("#selectupgrade-4").on("click",(function(){UI.selectUpgrade(4)})),t=1;t<=5;t++)e("#selectaircraft-"+t).on("mouseenter",{t:t},UI.popTooltip),e("#selectaircraft-"+t).on("mouseleave",UI.closeTooltip);for(t=1;t<=4;t++)e("#selectupgrade-"+t).on("mouseenter",{t:100+t},UI.popTooltip),e("#selectupgrade-"+t).on("mouseleave",UI.closeTooltip);e("#playbutton").on("click",(function(){Sound.UIClick(),UI.nameEntered()})),e("#playername").on("keypress",(function(e){13===e.which&&UI.nameEntered()})),window.onerror=function(e,t,n,r,i){game.state!==Network.STATE.PLAYING&&game.state!==Network.STATE.CONNECTING||Tools.handleError({msg:e,url:t,lineNo:n,columnNo:r,error:i})},UI.createScaleSlider(),UI.hideScaleSlider()};var Z=null,J=null,Q=null,ee=null,te=!1,ne=-1;UI.createScaleSlider=function(){(Z=document.createElement("div")).style.position="absolute",Z.style.width="250px",Z.style.background="white",Z.style.borderRadius="5px",Z.style.top="21px",Z.style.left="320px",Z.style.zIndex=110,Z.style.height="10px",Z.style.opacity=.07,(J=document.createElement("div")).style.position="absolute",J.style.width="22px",J.style.background="white",J.style.borderRadius="5px",J.style.top="21px",J.style.left="350px",J.style.zIndex=110,J.style.height="10px",J.style.opacity=.08,(Q=document.createElement("div")).style.position="absolute",Q.style.width="24px",Q.style.height="24px",Q.style.top="14px",Q.style.left="580px",Q.style.zIndex=110,Q.style.borderRadius="5px";var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width",24),e.setAttribute("height",24),e.setAttribute("viewBox","0 0 24 24"),(ee=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"),ee.setAttribute("stroke","white"),ee.setAttribute("fill","white"),e.appendChild(ee),Q.appendChild(e),document.body.appendChild(Z),document.body.appendChild(J),document.body.appendChild(Q),J.addEventListener("mousedown",UI.onScaleKnobMouseDown),Q.addEventListener("click",UI.onScaleAltClick),document.addEventListener("mousemove",UI.onScaleKnobMouseMove),document.addEventListener("mouseup",UI.onScaleKnobMouseUp),UI.updateScalingWidgetState()},UI.toggleScaleAltMode=function(){Tools.setSettings({scalingAltMode:!config.settings.scalingAltMode}),UI.updateScalingWidgetState(),UI.scheduleGraphicsResize(0)},UI.scaleIncrease=function(){UI.setScalingFactor(UI.getScalingFactor()+200),UI.updateScalingWidgetState()},UI.scaleDecrease=function(){UI.setScalingFactor(UI.getScalingFactor()-200),UI.updateScalingWidgetState()},UI.onScaleAltClick=function(e){UI.toggleScaleAltMode()},UI.scaleDefault=function(){UI.setScalingFactor(2500),UI.updateScalingWidgetState()},UI.hideScaleSlider=function(){Z.style.display="none",J.style.display="none",Q.style.display="none"},UI.showScaleSlider=function(){Z.style.display="block",J.style.display="block",Q.style.display="block"},UI.onScaleKnobMouseDown=function(e){console.log("drag start",e),te=!0,ne=e.clientX-e.target.getBoundingClientRect().left},UI.getScalingFactor=function(){return config.settings.scalingAltMode?UI.capScalingFactor(config.settings.altScalingFactor||config.altScalingFactor):UI.capScalingFactor(config.settings.scalingFactor||config.scalingFactor)},UI.capScalingFactor=function(e){return Math.min(7e3,Math.max(800,e))},UI.scheduleGraphicsResize=function(e){clearTimeout(o),o=setTimeout((function(){Graphics.resizeRenderer(window.innerWidth,window.innerHeight)}),e||0)},UI.setScalingFactor=function(e){config.settings.scalingAltMode?Tools.setSettings({altScalingFactor:e}):Tools.setSettings({scalingFactor:e}),UI.scheduleGraphicsResize(100)},UI.onScaleKnobMouseMove=function(e){if(te){console.log("drag",e);var t=parseInt(Z.style.left,10),n=t+(parseInt(Z.style.width,10)-parseInt(J.style.width,10)),r=Math.max(t,Math.min(n,e.clientX-ne));J.style.left=r+"px",UI.setScalingFactor(800+(r-t)/(n-t)*6200)}},UI.updateScalingWidgetState=function(){config.settings.scalingAltMode?Q.style.opacity=.15:Q.style.opacity=.08;var e=parseInt(Z.style.left,10),t=e+(e+(parseInt(Z.style.width,10)-parseInt(J.style.width,10))-e)/6200*(UI.getScalingFactor()-800);J.style.left=t+"px"},UI.onScaleKnobMouseUp=function(e){te&&(console.log("drag end",e),te=!1)}}).call(this,n(10),n(13))},function(e,t,n){"use strict";e.exports=n(215)},function(e,t,n){"use strict";var r,i,o,s=n(216),a=n(6);function l(e){e.fn.perfectScrollbar=function(e){return this.each((function(){if("object"==typeof e||void 0===e){var t=e;a.get(this)||s.initialize(this,t)}else{var n=e;"update"===n?s.update(this):"destroy"===n&&s.destroy(this)}}))}}i=[n(10)],void 0===(o="function"==typeof(r=l)?r.apply(t,i):r)||(e.exports=o),e.exports=l},function(e,t,n){"use strict";var r=n(217),i=n(221),o=n(229);e.exports={initialize:i,update:o,destroy:r}},function(e,t,n){"use strict";var r=n(11),i=n(16),o=n(6);e.exports=function(e){var t=o.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),o.remove(e))}},function(e,t,n){"use strict";e.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},function(e,t,n){"use strict";var r=function(e){this.element=e,this.events={}};r.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},r.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter((function(r){return!(!n||r===t)||(this.element.removeEventListener(e,r,!1),!1)}),this)},r.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var i=function(){this.eventElements=[]};i.prototype.eventElement=function(e){var t=this.eventElements.filter((function(t){return t.element===e}))[0];return void 0===t&&(t=new r(e),this.eventElements.push(t)),t},i.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},i.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},i.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},i.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},e.exports=i},function(e,t,n){"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},function(e,t,n){"use strict";var r=n(6),i=n(9),o={"click-rail":n(222),"drag-scrollbar":n(223),keyboard:n(224),wheel:n(225),touch:n(226),selection:n(227)},s=n(228);e.exports=function(e,t){e.classList.add("ps");var n=r.add(e,"object"==typeof t?t:{});e.classList.add("ps--theme_"+n.settings.theme),n.settings.handlers.forEach((function(t){o[t](e)})),s(e),i(e)}},function(e,t,n){"use strict";var r=n(6),i=n(9),o=n(12);e.exports=function(e){!function(e,t){function n(e){return e.getBoundingClientRect()}var r=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",(function(r){var s=r.pageY-window.pageYOffset-n(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;o(e,"top",e.scrollTop+s*t.containerHeight),i(e),r.stopPropagation()})),t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",(function(r){var s=r.pageX-window.pageXOffset-n(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;o(e,"left",e.scrollLeft+s*t.containerWidth),i(e),r.stopPropagation()}))}(e,r.get(e))}},function(e,t,n){"use strict";var r=n(11),i=n(16),o=n(6),s=n(9),a=n(12);function l(e,t){var n=null,o=null;var l=function(i){!function(i){var o=n+i*t.railXRatio,s=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=o<0?0:o>s?s:o;var l=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;a(e,"left",l)}(i.pageX-o),s(e),i.stopPropagation(),i.preventDefault()},u=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarX,"mousedown",(function(s){o=s.pageX,n=r.toInt(i.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",u),s.stopPropagation(),s.preventDefault()}))}function u(e,t){var n=null,o=null;var l=function(i){!function(i){var o=n+i*t.railYRatio,s=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=o<0?0:o>s?s:o;var l=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));a(e,"top",l)}(i.pageY-o),s(e),i.stopPropagation(),i.preventDefault()},u=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarY,"mousedown",(function(s){o=s.pageY,n=r.toInt(i.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",u),s.stopPropagation(),s.preventDefault()}))}e.exports=function(e){var t=o.get(e);l(e,t),u(e,t)}},function(e,t,n){"use strict";var r=n(11),i=n(16),o=n(6),s=n(9),a=n(12);function l(e,t){var n=!1;t.event.bind(e,"mouseenter",(function(){n=!0})),t.event.bind(e,"mouseleave",(function(){n=!1}));t.event.bind(t.ownerDocument,"keydown",(function(o){if(!(o.isDefaultPrevented&&o.isDefaultPrevented()||o.defaultPrevented)){var l=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus");if(n||l){var u=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(u){if("IFRAME"===u.tagName)u=u.contentDocument.activeElement;else for(;u.shadowRoot;)u=u.shadowRoot.activeElement;if(r.isEditable(u))return}var c=0,h=0;switch(o.which){case 37:c=o.metaKey?-t.contentWidth:o.altKey?-t.containerWidth:-30;break;case 38:h=o.metaKey?t.contentHeight:o.altKey?t.containerHeight:30;break;case 39:c=o.metaKey?t.contentWidth:o.altKey?t.containerWidth:30;break;case 40:h=o.metaKey?-t.contentHeight:o.altKey?-t.containerHeight:-30;break;case 33:h=90;break;case 32:h=o.shiftKey?90:-90;break;case 34:h=-90;break;case 35:h=o.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:h=o.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}a(e,"top",e.scrollTop-h),a(e,"left",e.scrollLeft+c),s(e),function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(c,h)&&o.preventDefault()}}}))}e.exports=function(e){l(e,o.get(e))}},function(e,t,n){"use strict";var r=n(6),i=n(9),o=n(12);function s(e,t){var n=!1;function r(r){var s=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(r),a=s[0],l=s[1];(function(t,n){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){var i=window.getComputedStyle(r);if(![i.overflow,i.overflowX,i.overflowY].join("").match(/(scroll|auto)/))return!1;var o=r.scrollHeight-r.clientHeight;if(o>0&&!(0===r.scrollTop&&n>0||r.scrollTop===o&&n<0))return!0;var s=r.scrollLeft-r.clientWidth;if(s>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===s&&t>0))return!0}return!1})(a,l)||(n=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(o(e,"top",l?e.scrollTop-l*t.settings.wheelSpeed:e.scrollTop+a*t.settings.wheelSpeed),n=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(o(e,"left",a?e.scrollLeft+a*t.settings.wheelSpeed:e.scrollLeft-l*t.settings.wheelSpeed),n=!0):(o(e,"top",e.scrollTop-l*t.settings.wheelSpeed),o(e,"left",e.scrollLeft+a*t.settings.wheelSpeed)),i(e),(n=n||function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(a,l))&&(r.stopPropagation(),r.preventDefault()))}void 0!==window.onwheel?t.event.bind(e,"wheel",r):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",r)}e.exports=function(e){s(e,r.get(e))}},function(e,t,n){"use strict";var r=n(11),i=n(6),o=n(9),s=n(12);function a(e,t,n,r){function a(t,n){s(e,"top",e.scrollTop-n),s(e,"left",e.scrollLeft-t),o(e)}var l={},u=0,c={},h=null,d=!1,p=!1;function f(){d=!0}function g(){d=!1}function m(e){return e.targetTouches?e.targetTouches[0]:e}function v(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function y(e){if(v(e)){p=!0;var t=m(e);l.pageX=t.pageX,l.pageY=t.pageY,u=(new Date).getTime(),null!==h&&clearInterval(h),e.stopPropagation()}}function b(n){if(!p&&t.settings.swipePropagation&&y(n),!d&&p&&v(n)){var r=m(n),i={pageX:r.pageX,pageY:r.pageY},o=i.pageX-l.pageX,s=i.pageY-l.pageY;a(o,s),l=i;var h=(new Date).getTime(),f=h-u;f>0&&(c.x=o/f,c.y=s/f,u=h),function(n,r){var i=e.scrollTop,o=e.scrollLeft,s=Math.abs(n),a=Math.abs(r);if(a>s){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(s>a&&(n<0&&o===t.contentWidth-t.containerWidth||n>0&&0===o))return!t.settings.swipePropagation;return!0}(o,s)&&(n.stopPropagation(),n.preventDefault())}}function _(){!d&&p&&(p=!1,t.settings.swipeEasing&&(clearInterval(h),h=setInterval((function(){i.get(e)&&(c.x||c.y)?Math.abs(c.x)<.01&&Math.abs(c.y)<.01?clearInterval(h):(a(30*c.x,30*c.y),c.x*=.8,c.y*=.8):clearInterval(h)}),10)))}n?(t.event.bind(window,"touchstart",f),t.event.bind(window,"touchend",g),t.event.bind(e,"touchstart",y),t.event.bind(e,"touchmove",b),t.event.bind(e,"touchend",_)):r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",f),t.event.bind(window,"pointerup",g),t.event.bind(e,"pointerdown",y),t.event.bind(e,"pointermove",b),t.event.bind(e,"pointerup",_)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",f),t.event.bind(window,"MSPointerUp",g),t.event.bind(e,"MSPointerDown",y),t.event.bind(e,"MSPointerMove",b),t.event.bind(e,"MSPointerUp",_)))}e.exports=function(e){(r.env.supportsTouch||r.env.supportsIePointer)&&a(e,i.get(e),r.env.supportsTouch,r.env.supportsIePointer)}},function(e,t,n){"use strict";var r=n(11),i=n(6),o=n(9),s=n(12);function a(e,t){var n=null,a={top:0,left:0};function l(){n&&(clearInterval(n),n=null),r.stopScrolling(e)}var u=!1;t.event.bind(t.ownerDocument,"selectionchange",(function(){var t;e.contains(0===(t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"").toString().length?null:t.getRangeAt(0).commonAncestorContainer)?u=!0:(u=!1,l())})),t.event.bind(window,"mouseup",(function(){u&&(u=!1,l())})),t.event.bind(window,"keyup",(function(){u&&(u=!1,l())})),t.event.bind(window,"mousemove",(function(t){if(u){var c={x:t.pageX,y:t.pageY},h={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};c.x<h.left+3?(a.left=-5,r.startScrolling(e,"x")):c.x>h.right-3?(a.left=5,r.startScrolling(e,"x")):a.left=0,c.y<h.top+3?(a.top=h.top+3-c.y<5?-5:-20,r.startScrolling(e,"y")):c.y>h.bottom-3?(a.top=c.y-h.bottom+3<5?5:20,r.startScrolling(e,"y")):a.top=0,0===a.top&&0===a.left?l():n||(n=setInterval((function(){i.get(e)?(s(e,"top",e.scrollTop+a.top),s(e,"left",e.scrollLeft+a.left),o(e)):clearInterval(n)}),50))}}))}e.exports=function(e){a(e,i.get(e))}},function(e,t,n){"use strict";var r=n(6),i=n(9);e.exports=function(e){!function(e,t){t.event.bind(e,"scroll",(function(){i(e)}))}(e,r.get(e))}},function(e,t,n){"use strict";var r=n(11),i=n(16),o=n(6),s=n(9),a=n(12);e.exports=function(e){var t=o.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),s(e),a(e,"top",e.scrollTop),a(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},,function(e,t,n){"use strict";n.r(t);n(46),n(101),n(205),n(206),n(208);var r=n(0);var i=class{constructor(e,t){e.type==MobType.PredatorMissile&&window.forceCarrot&&(e.type=MobType.CarrotMissile),this.id=e.id,this.type=e.type,this.pos=new r.a(e.posX,e.posY),this.spriteRot=0,this.missile=MissileMobTypeSet[this.type],this.missile&&e.c!==Network.SERVERPACKET.MOB_UPDATE_STATIONARY?(this.speed=new r.a(e.speedX,e.speedY),this.accel=new r.a(e.accelX,e.accelY),this.maxSpeed=e.maxSpeed,this.exhaust=config.mobs[this.type].exhaust,this.lastAccelX=0,this.lastAccelY=0,this.stationary=!1,this.spriteRot=this.speed.angle()+Math.PI):this.stationary=!0,this.sprites={},this.state={inactive:!1,despawnTicker:0,despawnType:0,baseScale:1,baseScaleShadow:1,luminosity:1},this.randomness=Tools.rand(0,1e5),this.culled=!1,this.visibility=!0,this.reducedFactor=!1,this.forDeletion=!1,this.spawnTime=game.time,this.lastPacket=game.timeNetwork,this.ownerId=t,this.setupSprite()}setupSprite(){switch(MissileMobTypeSet[this.type]&&(this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall",{layer:"projectiles"}),this.sprites.smokeGlow=Textures.init("smokeGlow",{layer:"projectiles"}),this.sprites.thruster=Textures.init("missileThruster")),this.type){case MobType.PredatorMissile:case MobType.TornadoSingleMissile:case MobType.TornadoTripleMissile:case MobType.ProwlerMissile:this.sprites.sprite=Textures.init("missile"),this.sprites.shadow=Textures.init("missileShadow",{scale:[.25,.2]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=.2,this.sprites.smokeGlow.scale.set(1.5,3),this.sprites.smokeGlow.alpha=.75;break;case MobType.GoliathMissile:case MobType.CarrotMissile:this.type==MobType.GoliathMissile?this.sprites.sprite=Textures.init("missileFat"):this.sprites.sprite=Textures.init("missileCarrot"),this.sprites.shadow=Textures.init("missileShadow",{scale:[.5,.25]}),this.sprites.thrusterGlow.scale.set(4,3),this.sprites.thrusterGlow.alpha=.25,this.sprites.smokeGlow.scale.set(2.5,3),this.sprites.smokeGlow.alpha=.75;break;case MobType.MohawkMissile:this.sprites.sprite=Textures.init("missileSmall",{scale:[.28,.2]}),this.sprites.shadow=Textures.init("missileShadow",{scale:[.18,.14]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=.2,this.sprites.smokeGlow.scale.set(1,2),this.sprites.smokeGlow.alpha=.75;break;case MobType.Upgrade:case MobType.Shield:case MobType.Inferno:case MobType.MagicCrate:var e=CrateTextureNameByMobType[this.type];this.state.baseScale=.33,this.state.baseScaleShadow=2.4/config.shadowScaling*.33,this.sprites.sprite=Textures.init(e,{scale:this.state.baseScale}),this.sprites.shadow=Textures.init("crateShadow",{scale:this.state.baseScaleShadow})}this.setTeamColourOnMissiles()}setTeamColourOnMissiles(){if(game.gameType==GameType.CTF)switch(this.type){case MobType.PredatorMissile:case MobType.TornadoSingleMissile:case MobType.TornadoTripleMissile:case MobType.ProwlerMissile:case MobType.GoliathMissile:case MobType.MohawkMissile:let e=1==Players.getMe().team?2:1;if(this.ownerId){let t=Players.get(this.ownerId);t&&(e=t.team)}this.sprites.smokeGlow.tint=this.sprites.sprite.tint=this.sprites.thruster.tint=1==e?3289850:15352386}}despawn(e){if(this.state.inactive=!0,this.state.despawnTicker=0,CrateMobTypeSet[this.type])return this.state.despawnType=e,void(e==MobDespawnType.Collided&&this.type!=MobType.Upgrade&&Sound.powerup(this.type,this.pos));this.sprites.thruster.renderable=!1,this.sprites.thrusterGlow.renderable=!1,this.sprites.smokeGlow.renderable=!1,this.accel.x=0,this.accel.y=0,this.missile&&Sound.updateThruster(1,this,!1)}destroy(e){switch(this.type){case MobType.PredatorMissile:case MobType.GoliathMissile:case MobType.CarrotMissile:case MobType.MohawkMissile:case MobType.TornadoSingleMissile:case MobType.TornadoTripleMissile:case MobType.ProwlerMissile:game.graphics.layers.projectiles.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.projectiles.removeChild(this.sprites.thrusterGlow),game.graphics.layers.projectiles.removeChild(this.sprites.smokeGlow),this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.smokeGlow.destroy();break;case MobType.Upgrade:case MobType.Shield:case MobType.Inferno:case MobType.MagicCrate:game.graphics.layers.crates.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow)}e.c===Network.SERVERPACKET.MOB_DESPAWN_COORDS&&(Mobs.explosion(this.pos,e.type),this.missile&&Sound.updateThruster(1,this,!1))}network(e,t){this.lastPacket=game.timeNetwork,e.c===Network.SERVERPACKET.MOB_UPDATE&&(this.reducedFactor=Tools.reducedFactor()),this.pos.x=e.posX,this.pos.y=e.posY,null!=e.speedX&&(this.speed.x=e.speedX,this.speed.y=e.speedY),null!=e.accelX&&(this.accel.x=e.accelX,this.accel.y=e.accelY),t&&(this.ownerId=t,this.setTeamColourOnMissiles())}visible(e){e==this.visibility&&e!=this.culled||(this.sprites.sprite.visible=e,this.sprites.shadow.visible=e,MissileMobTypeSet[this.type]&&(this.sprites.thruster.visible=e,this.sprites.thrusterGlow.visible=e),this.visibility=e)}visibilityUpdate(){this.culled=!Graphics.inScreen(this.pos,128),this.visible(!this.culled)}update(e){if(this.visibilityUpdate(),!(!1!==this.reducedFactor&&(e-=this.reducedFactor,this.reducedFactor=!1,e<=0))){var t,n,r,i=e>.51?Math.round(e):1,o=e/i;for(t=0;t<i;t++)if(this.stationary)this.clientCalcs(o);else{n=this.speed.x,r=this.speed.y,this.speed.x+=this.accel.x*o,this.speed.y+=this.accel.y*o;var s=this.speed.length();s>this.maxSpeed&&this.speed.multiply(this.maxSpeed/s),this.state.inactive&&this.speed.multiply(1-.03*o),this.pos.x+=o*n+.5*(this.speed.x-n)*o,this.pos.y+=o*r+.5*(this.speed.y-r)*o,this.pos.x<-16384&&(this.pos.x+=32768),this.pos.x>16384&&(this.pos.x-=32768),this.pos.y<-8192&&(this.pos.y+=16384),this.pos.y>8192&&(this.pos.y-=16384),this.clientCalcs(o)}this.missile&&!this.state.inactive&&Sound.updateThruster(1,this,this.visibility)}}clientCalcs(e){if(!this.forDeletion)switch(this.state.luminosity-=.075*e,this.state.luminosity<0&&(this.state.luminosity=0),this.type){case MobType.PredatorMissile:case MobType.GoliathMissile:case MobType.CarrotMissile:case MobType.MohawkMissile:case MobType.TornadoSingleMissile:case MobType.TornadoTripleMissile:case MobType.ProwlerMissile:var t=1;if(this.state.inactive){if(this.state.despawnTicker+=.01*e,this.state.despawnTicker>.75){var n=1-4*(this.state.despawnTicker-.75);this.sprites.sprite.alpha=n,this.sprites.shadow.alpha=n}if(this.state.despawnTicker>1)return void(this.forDeletion=!0);t=Tools.clamp(1-this.state.despawnTicker,.3,1)}if(!this.culled&&t>.3){var r;this.type==MobType.CarrotMissile&&(r=40704);var i=this.speed.angle()+Math.PI;i-this.spriteRot>=Math.PI?this.spriteRot+=2*Math.PI:this.spriteRot-i>Math.PI&&(this.spriteRot-=2*Math.PI),this.spriteRot=Tools.converge(this.spriteRot,i,.1*e),Particles.missileSmoke(this,this.exhaust,t,r)}break;case MobType.Upgrade:case MobType.Shield:case MobType.Inferno:case MobType.MagicCrate:if(this.state.inactive&&(this.state.despawnTicker+=.05*e,this.state.despawnTicker>1))return void(this.forDeletion=!0)}}updateGraphics(e){var t=config.mobs[this.type];switch(this.type){case MobType.PredatorMissile:case MobType.GoliathMissile:case MobType.CarrotMissile:case MobType.MohawkMissile:case MobType.TornadoSingleMissile:case MobType.TornadoTripleMissile:case MobType.ProwlerMissile:var n=Graphics.shadowCoords(this.pos),r=Tools.oscillator(.1,.5,this.randomness),i=Tools.oscillator(.15,10,this.randomness);Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,this.spriteRot),Graphics.transform(this.sprites.shadow,n.x,n.y,this.spriteRot),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),null,null,null,(.5*(t.thrusterGlowAlpha||1)*this.state.luminosity+.2)*i),Graphics.transform(this.sprites.smokeGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),this.spriteRot,void 0,void 0,t.smokeGlowAlpha),Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-this.spriteRot)*this.exhaust,this.pos.y+Math.cos(-this.spriteRot)*this.exhaust,this.spriteRot,t.thruster[0]*r,t.thruster[1]*r,t.thrusterAlpha);break;case MobType.Upgrade:case MobType.Shield:case MobType.Inferno:case MobType.MagicCrate:var o;n=Graphics.shadowCoords(this.pos),o=0==this.state.despawnType?1-this.state.despawnTicker:1+2*this.state.despawnTicker,o*=Tools.oscillator(.08,500,this.randomness),Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y+20*(Tools.oscillator(.08,330,this.randomness)-1.04),null,this.state.baseScale*o,this.state.baseScale*o,1-this.state.despawnTicker),Graphics.transform(this.sprites.shadow,n.x,n.y,null,this.state.baseScaleShadow*o,this.state.baseScaleShadow*o,1-this.state.despawnTicker)}}},o={},s=[],a={};Mobs.add=function(e,t,n){o[e.id]=new i(e,n),t&&o[e.id].network(e)},Mobs.update=function(){var e,t;for(e in o)(t=o[e]).update(game.timeFactor),t.forDeletion?Mobs.destroy(t):t.updateGraphics(game.timeFactor)},Mobs.network=function(e,t){var n=o[e.id];null==n?Mobs.add(e,!0,t):n.network(e,t)},Mobs.despawn=function(e){var t=o[e.id];null!=t&&t.despawn(e.type)},Mobs.destroy=function(e){var t=o[e.id];null!=t&&(t.destroy(e),delete o[e.id])},Mobs.explosion=function(e,t){switch(t){case MobType.PredatorMissile:case MobType.TornadoSingleMissile:case MobType.TornadoTripleMissile:case MobType.ProwlerMissile:Particles.explosion(e,Tools.rand(1,1.2));break;case MobType.GoliathMissile:Particles.explosion(e,Tools.rand(1.3,1.6));break;case MobType.MohawkMissile:case MobType.CarrotMissile:Particles.explosion(e,Tools.rand(.8,1))}Sound.mobExplosion(e,t)},Mobs.count=function(){let e=0,t=0;for(var n in o)e++,o[n].culled&&t++;return[e-t,e]},Mobs.mobs=function(){return o},Mobs.wipe=function(){for(var e in o)o[e].destroy({}),delete o[e]},Mobs.countDoodads=function(){return[s.length,config.doodads.length]},Mobs.setupDoodads=function(){config.doodads=config.doodads.concat(config.groundDoodads);for(var e=0;e<config.doodads.length;e++)Mobs.addDoodad(config.doodads[e])},Mobs.addDoodad=function(e){var t=Number.isInteger(e[2]),n=Textures.init((t?"mountain":"")+e[2]);n.scale.set(e[3]),n.position.set(e[0],e[1]),n.visible=!1,e[4]&&(n.rotation=e[4]),e[5]&&(n.alpha=e[5]),e[6]&&(n.tint=e[6]),e[7]=!1,e[8]=n,e[9]=t?0:1},Mobs.getClosestDoodad=function(e){for(var t,n,r=2,i=0;i<s.length;i++)0==(n=s[i])[5]&&Tools.distFastCheckFloat(e.x,e.y,n[0],n[1],256*n[3])&&(t=Tools.distance(e.x,e.y,n[0],n[1])/(256*n[3]))<r&&(r=t);return Tools.clamp(3.333*(r-.5),.2,1)},Mobs.updateDoodads=function(){for(var e,t=Tools.getBucketBounds(Graphics.getCamera(),512+game.halfScreenX/game.scale,512+game.halfScreenY/game.scale),n=t[0];n<=t[1];n++)for(var i=t[2];i<=t[3];i++)for(var o=0;o<game.buckets[n][i][0].length;o++)l=game.buckets[n][i][0][o],e=config.doodads[l],game.state==Network.STATE.LOGIN&&0!=e[9]||Graphics.inScreen(new r.a(e[0],e[1]),256*e[3]+config.overdraw)&&(e[7]||(e[8].visible=!0,e[7]=!0,a[l]||(a[l]=!0,s.push([e[0],e[1],e[2],e[3],l,e[9]]))));for(var l,u=s.length-1;u>=0;u--)l=s[u][4],e=config.doodads[l],Graphics.inScreen(new r.a(e[0],e[1]),256*e[3]+config.overdraw)||e[7]&&(e[8].visible=!1,e[7]=!1,s.splice(u,1),delete a[l])};var l=null,u=null,c=!1,h="",d=!1,p=null,f=-1,g=-1,m=0,v={},y=0,b=0,_=0,T=!1;Network.sendKey=function(e,t){if(game.state==Network.STATE.PLAYING){b++;var n={c:L.KEY,seq:b,key:k[e],state:t};null!=game.spectatingID&&t&&("RIGHT"==e?Network.spectatePrev():"LEFT"==e&&Network.spectateNext()),R(n),u&&c&&R(n,!0)}},Network.sendChat=function(e){game.state==Network.STATE.PLAYING&&R({c:L.CHAT,text:e})},Network.sendWhisper=function(e,t){game.state==Network.STATE.PLAYING&&R({c:L.WHISPER,id:e,text:t})},Network.sendSay=function(e){game.state==Network.STATE.PLAYING&&R({c:L.SAY,text:e})},Network.sendTeam=function(e){game.state==Network.STATE.PLAYING&&R({c:L.TEAMCHAT,text:e})},Network.sendCommand=function(e,t){game.state==Network.STATE.PLAYING&&("flag"===e&&(game.lastFlagSet=t),R({c:L.COMMAND,com:e,data:t}))},Network.voteMute=function(e){game.state==Network.STATE.PLAYING&&R({c:L.VOTEMUTE,id:e})},Network.force=function(e){Players.network(U.PLAYER_UPDATE,e);for(let t of e.players)Players.network(U.PLAYER_UPDATE,t);for(let t of e.mobs)Mobs.network(t,e.id);let t=new r.a(e.posX,e.posY);Particles.spiritShockwave(t),Sound.effectRepel(t)},Network.getScores=function(){game.state==Network.STATE.PLAYING&&R({c:L.SCOREDETAILED})},Network.resizeHorizon=function(){game.state==Network.STATE.PLAYING&&R({c:L.HORIZON,horizonX:Math.ceil(game.halfScreenX/game.scale),horizonY:Math.ceil(game.halfScreenY/game.scale)})},Network.detectConnectivity=function(){game.lagging=game.timeNetwork-_>1300},Network.shutdown=function(){null!=p&&clearInterval(p),null!=l&&l.close(),null!=u&&u.close(),c=!1,d=!1,f=-1,g=-1,m=0,v={},y=0,b=0,_=0,T=!1,2e3,2e3},Network.receivedError=function(e){T=e},Network.spectateNext=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-1")},Network.spectatePrev=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-2")},Network.spectateForce=function(){game.state==Network.STATE.PLAYING&&(Players.amIAlive()?Network.sendCommand("spectate","-3"):Network.spectateNext())};var x=function(){game.lagging||game.state==Network.STATE.PLAYING&&(d?u&&c&&R({c:L.ACK},!0):R({c:L.ACK}),d=!d)},w=function(e){Math.abs(e-f)>36e5&&(f=e,g=performance.now(),m=0)},E=function(e){if(console.log(F[e.c],e),game.state==Network.STATE.PLAYING||e.c==U.LOGIN||e.c==U.ERROR){if((e.c==U.PLAYER_UPDATE||e.c==U.PLAYER_FIRE||e.c==U.EVENT_BOOST||e.c==U.EVENT_BOUNCE)&&e.id==game.myID||e.c==U.PING){if(e.c!=U.PING&&P(e))return;game.timeNetwork=performance.now(),_=game.timeNetwork,function(e){if(game.jitter=0,-1!=f){w(e);var t=game.timeNetwork,n=e-f-(t-g),r=n-(m=.8*m+n/5);Math.abs(r)<100&&(game.jitter=r)}}(e.clock/100)}else game.timeNetwork=performance.now(),_=game.timeNetwork,null!=e.clock&&(n=e.clock/100,-1!=f&&(w(n),game.jitter=n-f-(game.timeNetwork-g)-m));switch(e.c){case U.PLAYER_UPDATE:case U.PLAYER_FIRE:case U.CHAT_SAY:case U.PLAYER_RESPAWN:case U.PLAYER_FLAG:case U.EVENT_BOOST:case U.EVENT_BOUNCE:if(Players.network(e.c,e),e.c===U.PLAYER_FIRE){for(let t of e.projectiles)t.c=U.PLAYER_FIRE,Mobs.add(t,!1,e.id);e.projectiles.length>0&&Sound.missileLaunch(new r.a(e.projectiles[0].posX,e.projectiles[0].posY),e.projectiles[0].type)}break;case U.LOGIN:!function(e){p=setInterval(x,50),game.myID=e.id,game.myTeam=e.team,game.myToken=e.token,game.state=Network.STATE.PLAYING,game.roomName=UI.escapeHTML(e.room),game.gameType=e.type,game.spectatingID=null,game.myLevel=0,I(e.serverConfiguration),Games.prep(),f=e.clock/100,g=performance.now(),A()}(e),UI.loggedIn(e);let n=e.bots?e.bots.map(e=>e.id):[];for(let t of e.players)t.isBot=n.includes(t.id),Players.add(t,!0);break;case U.ERROR:UI.errorHandler(e);break;case U.PLAYER_NEW:Players.add(e);break;case U.PLAYER_LEAVE:Players.destroy(e.id);break;case U.PLAYER_TYPE:Players.changeType(e);break;case U.PLAYER_HIT:Players.impact(e),200!=e.type&&Mobs.destroy(e);break;case U.PLAYER_KILL:Players.kill(e);break;case U.PLAYER_UPGRADE:UI.updateUpgrades([e.speed,e.defense,e.energy,e.missile],e.upgrades,e.type);break;case U.PLAYER_POWERUP:Players.powerup(e);break;case U.PLAYER_LEVEL:Players.updateLevel(e);break;case U.PLAYER_RETEAM:for(let t of e.players)Players.reteam(t);break;case U.EVENT_REPEL:Network.force(e);break;case U.EVENT_LEAVEHORIZON:0==e.type?Players.leaveHorizon(e):Mobs.destroy(e);break;case U.EVENT_STEALTH:Players.stealth(e);break;case U.MOB_UPDATE:case U.MOB_UPDATE_STATIONARY:Mobs.network(e,e.ownerId);break;case U.MOB_DESPAWN:Mobs.despawn(e);break;case U.MOB_DESPAWN_COORDS:Mobs.destroy(e);break;case U.GAME_FLAG:Games.networkFlag(e);break;case U.GAME_PLAYERSALIVE:Games.playersAlive(e.players);break;case U.SCORE_UPDATE:UI.newScore(e);break;case U.SCORE_BOARD:UI.scoreboardUpdate(e.data,e.rankings,config.maxScoreboard),Players.updateBadges(e.data);break;case U.SCORE_DETAILED:case U.SCORE_DETAILED_CTF:case U.SCORE_DETAILED_BTR:UI.updateScore(e);break;case U.PING:t=e.num,R({c:L.PONG,num:t});break;case U.PING_RESULT:UI.updateStats(e);break;case U.CHAT_PUBLIC:if(config.mobile)return;Players.chat(e);break;case U.CHAT_TEAM:if(config.mobile)return;Players.teamChat(e);break;case U.CHAT_WHISPER:if(config.mobile)return;Players.whisper(e);break;case U.CHAT_VOTEMUTEPASSED:if(config.mobile)return;Players.votemutePass(e);break;case U.CHAT_VOTEMUTED:if(config.mobile)return;return void UI.chatMuted();case U.SERVER_MESSAGE:UI.serverMessage(e);break;case U.SERVER_CUSTOM:S(e);break;case U.GAME_SPECTATE:Games.spectate(e.id);break;case U.GAME_FIREWALL:Games.handleFirewall(e);break;case U.COMMAND_REPLY:UI.showCommandReply(e)}}var t,n},S=function(e){try{var t=JSON.parse(e.data)}catch(e){return}switch(e.type){case 1:Games.showBTRWin(t);break;case 2:Games.showCTFWin(t);break;case 100:M(t)}},M=function(e){if(e&&e.message&&e.button&&(t=e.server,/^[a-z0-9]+-[a-z0-9]+$/m.test(t))){const t=`${UI.escapeHTML(e.message)}<br><span class="button" onclick="Games.switchGame(&quot;${e.server}&quot;)">${UI.escapeHTML(e.button)}</span>`;UI.showMessage("alert",t,5e3)}var t},I=function(e){let t={};try{t=JSON.parse(e)}catch(e){}game.server.config=t},P=function(e){var t=e.c+"_"+e.clock+"_"+e.posX+"_"+e.posY+"_"+e.rot+"_"+e.speedX+"_"+e.speedY,n=performance.now();if(n-y>15e3){for(var r in v)n-v[r]>3e4&&delete v[r];y=n}return null!=v[t]||(v[t]=n,!1)};Network.reconnectMessage=function(){game.reloading||UI.showMessage("alert",'<span class="info">DISCONNECTED</span>Connection reset<br><span class="button" onclick="Network.reconnect()">RECONNECT</span>',6e5)},Network.reconnect=function(){UI.showMessage("alert","",100),Games.switchGame()},Network.setup=function(){h=DEVELOPMENT&&game.customServerUrl?game.customServerUrl:"wss://"+game.playHost+"/"+game.playPath,u&&c&&u.close(),(l=new WebSocket(h)).binaryType="arraybuffer",l.onopen=function(){R({c:L.LOGIN,protocol:game.protocol,name:game.myName,session:config.auth.tokens&&config.auth.tokens.game?JSON.stringify({token:config.auth.tokens.game}):"none",horizonX:Math.ceil(game.halfScreenX/game.scale),horizonY:Math.ceil(game.halfScreenY/game.scale),flag:game.myFlag.toUpperCase()})},l.onclose=function(){null!=p&&clearInterval(p),game.state!==Network.STATE.CONNECTING&&(game.server={},game.state=Network.STATE.CONNECTING,!1===T&&Network.reconnectMessage())},l.onerror=function(e){console.error("WebSocket error observed:",e),UI.serverMessage({type:1,text:"WebSocket connection failed. Try disabling AdBlock!",duration:3e4})},l.onmessage=function(e){E(C(e.data))}};var A=function(){(u=new WebSocket(h)).binaryType="arraybuffer",u.onopen=function(){R({c:L.BACKUP,token:game.myToken},!0)},u.onclose=function(){c=!1},u.onerror=function(e){console.error("WebSocket error observed:",e),UI.serverMessage({type:1,text:"WebSocket connection failed. Try disabling AdBlock!",duration:3e4})},u.onmessage=function(e){var t=C(e.data);t.c===U.BACKUP&&(c=!0),t.backup=!0,E(t)}},O=function(e,t){var n,r=1,i=[],o=N[e.c];if(null==o)return null;for(n=0;n<o.length;n++)switch(o[n][1]){case D.text:var s=Tools.encodeUTF8(e[o[n][0]]);i.push(s),r+=1+s.length;break;case D.array:case D.arraysmall:break;case D.uint8:r+=1;break;case D.uint16:r+=2;break;case D.uint32:case D.float32:r+=4;break;case D.float64:r+=8;break;case D.boolean:r+=1}var a=new ArrayBuffer(r),l=new DataView(a),u=0,c=1;for(l.setUint8(0,e.c,!0),n=0;n<o.length;n++)switch(o[n][1]){case D.text:var h=i[u].length;l.setUint8(c,h,!0),c+=1;for(var d=0;d<h;d++)l.setUint8(c+d,i[u][d],!0);i[u],u++,c+=h;break;case D.array:case D.arraysmall:break;case D.uint8:l.setUint8(c,e[o[n][0]],!0),c+=1;break;case D.uint16:l.setUint16(c,e[o[n][0]],!0),c+=2;break;case D.uint32:l.setUint32(c,e[o[n][0]],!0),c+=4;break;case D.float32:l.setFloat32(c,e[o[n][0]],!0),c+=4;break;case D.float64:l.setFloat64(c,e[o[n][0]],!0),c+=8;break;case D.boolean:l.setUint8(c,!1===e[o[n][0]]?0:1),c+=1}return a},C=function(e,t){var n=new DataView(e),r={c:n.getUint8(0,!0)},i=1,o=G[r.c];if(null==o)return null;try{for(var s=0;s<o.length&&!(i>=n.byteLength);s++){var a=o[s][0];switch(o[s][1]){case D.text:case D.textbig:if(o[s][1]==D.text){var l=n.getUint8(i,!0);i+=1}else l=n.getUint16(i,!0),i+=2;for(var u=new Uint8Array(l),c=0;c<l;c++)u[c]=n.getUint8(i+c,!0);var h=Tools.decodeUTF8(u);r[a]=h,i+=l;break;case D.array:case D.arraysmall:if(o[s][1]==D.arraysmall){var d=n.getUint8(i,!0);i+=1}else d=n.getUint16(i,!0),i+=2;r[a]=[];for(var p=o[s][2],f=0;f<d;f++){for(var g={},m=0;m<p.length;m++){var v=p[m][0];switch(p[m][1]){case D.text:case D.textbig:for(p[m][1]==D.text?(l=n.getUint8(i,!0),i+=1):(l=n.getUint16(i,!0),i+=2),u=new Uint8Array(l),c=0;c<l;c++)u[c]=n.getUint8(i+c,!0);h=Tools.decodeUTF8(u),g[v]=h,i+=l;break;case D.uint8:g[v]=n.getUint8(i,!0),i+=1;break;case D.uint16:g[v]=n.getUint16(i,!0),i+=2;break;case D.uint24:var y=256*n.getUint16(i,!0);i+=2,r[v]=y+n.getUint8(i,!0),i+=1;break;case D.uint32:g[v]=n.getUint32(i,!0),i+=4;break;case D.float32:g[v]=n.getFloat32(i,!0),i+=4;break;case D.float64:g[v]=n.getFloat64(i,!0),i+=8;break;case D.boolean:g[v]=0!=n.getUint8(i,!0),i+=1;break;case D.speed:g[v]=Tools.decodeSpeed(n.getUint16(i,!0)),i+=2;break;case D.accel:g[v]=Tools.decodeAccel(n.getUint16(i,!0)),i+=2;break;case D.coordx:g[v]=Tools.decodeCoordX(n.getUint16(i,!0)),i+=2;break;case D.coordy:g[v]=Tools.decodeCoordY(n.getUint16(i,!0)),i+=2;break;case D.coord24:y=256*n.getUint16(i,!0),i+=2,r[v]=Tools.decodeCoord24(y+n.getUint8(i,!0)),i+=1;break;case D.rotation:g[v]=Tools.decodeRotation(n.getUint16(i,!0)),i+=2;break;case D.regen:g[v]=Tools.decodeRegen(n.getUint16(i,!0)),i+=2;break;case D.healthnergy:g[v]=Tools.decodeHealthnergy(n.getUint8(i,!0)),i+=1}}r[a].push(g)}break;case D.uint8:r[a]=n.getUint8(i,!0),i+=1;break;case D.uint16:r[a]=n.getUint16(i,!0),i+=2;break;case D.uint24:y=256*n.getUint16(i,!0),i+=2,r[a]=y+n.getUint8(i,!0),i+=1;break;case D.uint32:r[a]=n.getUint32(i,!0),i+=4;break;case D.float32:r[a]=n.getFloat32(i,!0),i+=4;break;case D.float64:r[a]=n.getFloat64(i,!0),i+=8;break;case D.boolean:r[a]=0!=n.getUint8(i,!0),i+=1;break;case D.speed:r[a]=Tools.decodeSpeed(n.getUint16(i,!0)),i+=2;break;case D.accel:r[a]=Tools.decodeAccel(n.getUint16(i,!0)),i+=2;break;case D.coordx:r[a]=Tools.decodeCoordX(n.getUint16(i,!0)),i+=2;break;case D.coordy:r[a]=Tools.decodeCoordY(n.getUint16(i,!0)),i+=2;break;case D.coord24:y=256*n.getUint16(i,!0),i+=2,r[a]=Tools.decodeCoord24(y+n.getUint8(i,!0)),i+=1;break;case D.rotation:r[a]=Tools.decodeRotation(n.getUint16(i,!0)),i+=2;break;case D.regen:r[a]=Tools.decodeRegen(n.getUint16(i,!0)),i+=2;break;case D.healthnergy:r[a]=Tools.decodeHealthnergy(n.getUint8(i,!0)),i+=1;break;default:return null}}}catch(e){}return r},R=function(e,t){t?u.send(O(e)):l.send(O(e))},k={UP:1,DOWN:2,LEFT:3,RIGHT:4,FIRE:5,SPECIAL:6},D={text:1,textbig:2,array:3,arraysmall:4,uint8:5,uint16:6,uint24:7,uint32:8,float32:9,float64:10,boolean:11,speed:12,accel:13,coordx:14,coordy:15,coord24:16,rotation:17,healthnergy:18,regen:19},L={LOGIN:0,BACKUP:1,HORIZON:2,ACK:5,PONG:6,KEY:10,COMMAND:11,SCOREDETAILED:12,CHAT:20,WHISPER:21,SAY:22,TEAMCHAT:23,VOTEMUTE:24,LOCALPING:255},N={[L.LOGIN]:[["protocol",D.uint8],["name",D.text],["session",D.text],["horizonX",D.uint16],["horizonY",D.uint16],["flag",D.text]],[L.BACKUP]:[["token",D.text]],[L.HORIZON]:[["horizonX",D.uint16],["horizonY",D.uint16]],[L.ACK]:[],[L.PONG]:[["num",D.uint32]],[L.KEY]:[["seq",D.uint32],["key",D.uint8],["state",D.boolean]],[L.COMMAND]:[["com",D.text],["data",D.text]],[L.SCOREDETAILED]:[],[L.CHAT]:[["text",D.text]],[L.WHISPER]:[["id",D.uint16],["text",D.text]],[L.SAY]:[["text",D.text]],[L.TEAMCHAT]:[["text",D.text]],[L.VOTEMUTE]:[["id",D.uint16]],[L.LOCALPING]:[["auth",D.uint32]]},U={LOGIN:0,BACKUP:1,PING:5,PING_RESULT:6,ACK:7,ERROR:8,COMMAND_REPLY:9,PLAYER_NEW:10,PLAYER_LEAVE:11,PLAYER_UPDATE:12,PLAYER_FIRE:13,PLAYER_HIT:14,PLAYER_RESPAWN:15,PLAYER_FLAG:16,PLAYER_KILL:17,PLAYER_UPGRADE:18,PLAYER_TYPE:19,PLAYER_POWERUP:20,PLAYER_LEVEL:21,PLAYER_RETEAM:22,GAME_FLAG:30,GAME_SPECTATE:31,GAME_PLAYERSALIVE:32,GAME_FIREWALL:33,EVENT_REPEL:40,EVENT_BOOST:41,EVENT_BOUNCE:42,EVENT_STEALTH:43,EVENT_LEAVEHORIZON:44,MOB_UPDATE:60,MOB_UPDATE_STATIONARY:61,MOB_DESPAWN:62,MOB_DESPAWN_COORDS:63,CHAT_PUBLIC:70,CHAT_TEAM:71,CHAT_SAY:72,CHAT_WHISPER:73,CHAT_VOTEMUTEPASSED:78,CHAT_VOTEMUTED:79,SCORE_UPDATE:80,SCORE_BOARD:81,SCORE_DETAILED:82,SCORE_DETAILED_CTF:83,SCORE_DETAILED_BTR:84,SERVER_MESSAGE:90,SERVER_CUSTOM:91},F={};for(var B in U)U.hasOwnProperty(B)&&(F[U[B]]=B);var G={[U.LOGIN]:[["success",D.boolean],["id",D.uint16],["team",D.uint16],["clock",D.uint32],["token",D.text],["type",D.uint8],["room",D.text],["players",D.array,[["id",D.uint16],["status",D.uint8],["level",D.uint8],["name",D.text],["type",D.uint8],["team",D.uint16],["posX",D.coordx],["posY",D.coordy],["rot",D.rotation],["flag",D.uint16],["upgrades",D.uint8]]],["serverConfiguration",D.textbig],["bots",D.array,[["id",D.uint16]]]],[U.BACKUP]:[],[U.PING]:[["clock",D.uint32],["num",D.uint32]],[U.PING_RESULT]:[["ping",D.uint16],["playerstotal",D.uint32],["playersgame",D.uint32]],[U.ACK]:[],[U.ERROR]:[["error",D.uint8]],[U.COMMAND_REPLY]:[["type",D.uint8],["text",D.textbig]],[U.PLAYER_NEW]:[["id",D.uint16],["status",D.uint8],["name",D.text],["type",D.uint8],["team",D.uint16],["posX",D.coordx],["posY",D.coordy],["rot",D.rotation],["flag",D.uint16],["upgrades",D.uint8],["isBot",D.boolean]],[U.PLAYER_LEAVE]:[["id",D.uint16]],[U.PLAYER_UPDATE]:[["clock",D.uint32],["id",D.uint16],["keystate",D.uint8],["upgrades",D.uint8],["posX",D.coord24],["posY",D.coord24],["rot",D.rotation],["speedX",D.speed],["speedY",D.speed]],[U.PLAYER_FIRE]:[["clock",D.uint32],["id",D.uint16],["energy",D.healthnergy],["energyRegen",D.regen],["projectiles",D.arraysmall,[["id",D.uint16],["type",D.uint8],["posX",D.coordx],["posY",D.coordy],["speedX",D.speed],["speedY",D.speed],["accelX",D.accel],["accelY",D.accel],["maxSpeed",D.speed]]]],[U.PLAYER_RESPAWN]:[["id",D.uint16],["posX",D.coord24],["posY",D.coord24],["rot",D.rotation],["upgrades",D.uint8]],[U.PLAYER_FLAG]:[["id",D.uint16],["flag",D.uint16]],[U.PLAYER_HIT]:[["id",D.uint16],["type",D.uint8],["posX",D.coordx],["posY",D.coordy],["owner",D.uint16],["players",D.arraysmall,[["id",D.uint16],["health",D.healthnergy],["healthRegen",D.regen]]]],[U.PLAYER_KILL]:[["id",D.uint16],["killer",D.uint16],["posX",D.coordx],["posY",D.coordy]],[U.PLAYER_UPGRADE]:[["upgrades",D.uint16],["type",D.uint8],["speed",D.uint8],["defense",D.uint8],["energy",D.uint8],["missile",D.uint8]],[U.PLAYER_TYPE]:[["id",D.uint16],["type",D.uint8]],[U.PLAYER_POWERUP]:[["type",D.uint8],["duration",D.uint32]],[U.PLAYER_LEVEL]:[["id",D.uint16],["type",D.uint8],["level",D.uint8]],[U.PLAYER_RETEAM]:[["players",D.array,[["id",D.uint16],["team",D.uint16]]]],[U.GAME_FLAG]:[["type",D.uint8],["flag",D.uint8],["id",D.uint16],["posX",D.coord24],["posY",D.coord24],["blueteam",D.uint8],["redteam",D.uint8]],[U.GAME_SPECTATE]:[["id",D.uint16]],[U.GAME_PLAYERSALIVE]:[["players",D.uint16]],[U.GAME_FIREWALL]:[["type",D.uint8],["status",D.uint8],["posX",D.coordx],["posY",D.coordy],["radius",D.float32],["speed",D.float32]],[U.EVENT_REPEL]:[["clock",D.uint32],["id",D.uint16],["posX",D.coordx],["posY",D.coordy],["rot",D.rotation],["speedX",D.speed],["speedY",D.speed],["energy",D.healthnergy],["energyRegen",D.regen],["players",D.arraysmall,[["id",D.uint16],["keystate",D.uint8],["posX",D.coordx],["posY",D.coordy],["rot",D.rotation],["speedX",D.speed],["speedY",D.speed],["energy",D.healthnergy],["energyRegen",D.regen],["playerHealth",D.healthnergy],["playerHealthRegen",D.regen]]],["mobs",D.arraysmall,[["id",D.uint16],["type",D.uint8],["posX",D.coordx],["posY",D.coordy],["speedX",D.speed],["speedY",D.speed],["accelX",D.accel],["accelY",D.accel],["maxSpeed",D.speed]]]],[U.EVENT_BOOST]:[["clock",D.uint32],["id",D.uint16],["boost",D.boolean],["posX",D.coord24],["posY",D.coord24],["rot",D.rotation],["speedX",D.speed],["speedY",D.speed],["energy",D.healthnergy],["energyRegen",D.regen]],[U.EVENT_BOUNCE]:[["clock",D.uint32],["id",D.uint16],["keystate",D.uint8],["posX",D.coord24],["posY",D.coord24],["rot",D.rotation],["speedX",D.speed],["speedY",D.speed]],[U.EVENT_STEALTH]:[["id",D.uint16],["state",D.boolean],["energy",D.healthnergy],["energyRegen",D.regen]],[U.EVENT_LEAVEHORIZON]:[["type",D.uint8],["id",D.uint16]],[U.MOB_UPDATE]:[["clock",D.uint32],["id",D.uint16],["type",D.uint8],["posX",D.coordx],["posY",D.coordy],["speedX",D.speed],["speedY",D.speed],["accelX",D.accel],["accelY",D.accel],["maxSpeed",D.speed],["ownerId",D.uint16]],[U.MOB_UPDATE_STATIONARY]:[["id",D.uint16],["type",D.uint8],["posX",D.float32],["posY",D.float32]],[U.MOB_DESPAWN]:[["id",D.uint16],["type",D.uint8]],[U.MOB_DESPAWN_COORDS]:[["id",D.uint16],["type",D.uint8],["posX",D.coordx],["posY",D.coordy]],[U.SCORE_UPDATE]:[["id",D.uint16],["score",D.uint32],["earnings",D.uint32],["upgrades",D.uint16],["totalkills",D.uint32],["totaldeaths",D.uint32]],[U.SCORE_BOARD]:[["data",D.array,[["id",D.uint16],["score",D.uint32],["level",D.uint8]]],["rankings",D.array,[["id",D.uint16],["x",D.uint8],["y",D.uint8]]]],[U.SCORE_DETAILED]:[["scores",D.array,[["id",D.uint16],["level",D.uint8],["score",D.uint32],["kills",D.uint16],["deaths",D.uint16],["damage",D.float32],["ping",D.uint16]]]],[U.SCORE_DETAILED_CTF]:[["scores",D.array,[["id",D.uint16],["level",D.uint8],["captures",D.uint16],["score",D.uint32],["kills",D.uint16],["deaths",D.uint16],["damage",D.float32],["ping",D.uint16]]]],[U.SCORE_DETAILED_BTR]:[["scores",D.array,[["id",D.uint16],["level",D.uint8],["alive",D.boolean],["wins",D.uint16],["score",D.uint32],["kills",D.uint16],["deaths",D.uint16],["damage",D.float32],["ping",D.uint16]]]],[U.CHAT_TEAM]:[["id",D.uint16],["text",D.text]],[U.CHAT_PUBLIC]:[["id",D.uint16],["text",D.text]],[U.CHAT_SAY]:[["id",D.uint16],["text",D.text]],[U.CHAT_WHISPER]:[["from",D.uint16],["to",D.uint16],["text",D.text]],[U.CHAT_VOTEMUTEPASSED]:[["id",D.uint16]],[U.CHAT_VOTEMUTED]:[],[U.SERVER_MESSAGE]:[["type",D.uint8],["duration",D.uint32],["text",D.textbig]],[U.SERVER_CUSTOM]:[["type",D.uint8],["data",D.textbig]]};Network.KEYPACKET=k,Network.KEYLOOKUP={1:"UP",2:"DOWN",3:"LEFT",4:"RIGHT",5:"FIRE",6:"SPECIAL"},Network.CLIENTPACKET=L,Network.SERVERPACKET=U,Network.STATE={LOGIN:1,CONNECTING:2,PLAYING:3};n(209),n(210);var j=n(45),H={},X={},Y={},W=0,z=0,V={},q=0,K=0,$={},Z=[0,.7,1,.4,0,.7,.4,.7],J=[0,.7,1,.4,0,.7,1,.7],Q=[0,.8,.5,1,0,.8,.5,.8],ee=[0,.8,1,.7,.8,.8],te=[0,1.5,1.2,.8,1.35,1.7],ne=[0,1,1,.35,1,1],re=[0,.8,.5,1,0,.8,.8,.8],ie=[0,1.5,.8,2,1,1.5],oe={powerup_shield:.5,upgrade:.2,complete:.5,levelup:.5,respawn:.05,click:.5},se={},ae={src:["assets/sounds.mp3?4"],volume:0,sprite:{chopper:[0,3206.1451247165533,!0],click:[5e3,374.9886621315195],complete:[7e3,1910.9750566893417],explosion1:[1e4,4137.460317460316],explosion2:[16e3,4155.44217687075],explosion3:[22e3,4168.367346938776],explosion4:[28e3,4580.272108843537],explosion5:[34e3,4144.943310657595],explosion6:[4e4,4191.360544217688],impact:[46e3,3730.7709750566855],launch1:[51e3,1492.4943310657568],launch2:[54e3,1511.2244897959215],levelup:[57e3,1886.4172335600883],missile:[6e4,8335.351473922898,!0],powerup_rampage:[7e4,7423.083900226758],powerup_shield:[79e3,2070.4761904761854],powerup_upgrade:[83e3,1640.8616780045406],repel:[86e3,2e3],respawn:[89e3,1315.9410430838961],thruster:[92e3,9499.841269841269,!0],upgrade:[103e3,2062.517006802722]}};Sound.setup=function(){var e={};for(var t in se){if(e={src:["/assets/sounds/"+t+".wav"]},Object.keys(se[t]).length>0)for(var n in se[t])e[n]=se[t][n];X[t]=new j.Howl(e)}H=new j.Howl(ae)},Sound.toggle=function(){Tools.setSettings({sound:!config.settings.sound}),UI.updateSound(!0),le()};var le=function(){config.settings.sound||H.stop()},ue=function(e){var t=oe[e];return null==t?1:t};Sound.mobExplosion=function(e,t){var n=.3*Z[t],r=fe(e)*n,i="explosion"+Tools.randInt(1,6);r<.01||ce("mobexplosions",4)||he(i,r,e,Tools.rand(.8,1.2))},Sound.playerKill=function(e){var t=1*ee[e.type],n=fe(e.pos)*t,r="explosion"+Tools.randInt(1,6);n<.01||ce("playerkills",3)||he(r,n,e.pos,Tools.rand(.8,1.2))},Sound.playerUpgrade=function(){if(!ce("upgrades",1)){var e=ue("upgrade");he("upgrade",e)}},Sound.playerRespawn=function(e){var t=ue("respawn")*(e.me()?1:fe(e.pos)),n=e.me()?null:e.pos;he("respawn",t,n)},Sound.gameComplete=function(){var e=ue("complete");he("complete",e)},Sound.levelUp=function(){var e=ue("levelup");he("levelup",e)},Sound.UIClick=function(){if(!ce("uiclick",1,200)){var e=ue("click");he("click",e)}},Sound.effectRepel=function(e){var t=.3*fe(e);he("repel",t,e,1.5)},Sound.powerup=function(e,t){var n=.25*(null==t?1:fe(t)),r="";4==e?r="powerup_upgrade":8==e?r="powerup_shield":9==e&&(r="powerup_rampage"),he(r,n*ue(r),t)},Sound.missileLaunch=function(e,t){var n=.3*J[t],r=fe(e)*n,i=Q[t],o="launch"+Tools.randInt(1,2);r<.01||ce("launches",5)||he(o,r,e,i)},Sound.playerImpact=function(e,t,n){var r=.05*Tools.clamp(n,0,1),i=fe(e)*r;he("impact",i,e,ie[t])},Sound.update=function(){if(!(game.time-K<100)){var e=game.focus?300:1e3;for(var t in Y)game.time-Y[t].last>e&&Sound.clearThruster(t);for(var n in V)game.time>=V[n].time&&(pe(V[n].id,V[n].sound),delete V[n]);K=game.time}};var ce=function(e,t,n){if(null==$[e])return $[e]={num:1,time:game.time},!1;var r=null!=n?n:1e3;return game.time-$[e].time>r?($[e].num=1,$[e].time=game.time,!1):($[e].num++,$[e].num>t)},he=function(e,t,n,r,i,o){if(config.settings.sound){if(o){if(null==X[e])return;var s=X[e]}else s=H;if(!s||!s.play)return;if(!(null!=t&&t<.01)){var a=s.play(o?void 0:e);if("thruster"===e||"missile"===e||"chopper"===e){var l=s.seek(null,a);s.seek(l+Tools.rand(0,1),a)}return de(a,e,t,n,r,i,o),a}}},de=function(e,t,n,r,i,o,s){if(config.settings.sound){if(s){if(null==X[t])return;var a=X[t]}else a=H;null!=n&&a.volume(n,e),null!=o&&a.fade(o[0],o[1],o[2],e,4==o.length||null),null!=i&&a.rate(i,e),null==r||config.ios||a.stereo(ge(r),e)}},pe=function(e,t,n){if(n){if(null==X[t])return;var r=X[t]}else r=H;r.stop(e)};Sound.clearThruster=function(e){if(null!=Y[e]){var t=Y[e].soundId,n=Y[e].vol;de(t,Y[e].sound,null,null,null,[n,0,200,!0]),r=t,i=Y[e].sound,V[++q]={id:r,sound:i,time:game.time+300},0==Y[e].type?W--:z--,delete Y[e]}var r,i},Sound.updateThruster=function(e,t,n){if(config.settings.sound){if(0==e){if(PlaneType.Mohawk==t.type){n=t.render;var r="chopper"}else n=t.keystate.UP||t.keystate.DOWN,r="thruster";var i="player_"+t.id+"_"+t.type}else r="missile",i="mob_"+t.id;if(n)if(null==Y[i]){if(0==e){if(!t.me()&&W>=5)return}else if(z>=5)return;var o=fe(t.pos);if(0==e)var s=o*ne[t.type]*.06,a=te[t.type];else s=.08*o,a=re[t.type];if(s<.01)return;var l=he(r,null,t.pos,a,[0,s,200]);Y[i]={type:e,started:game.time,last:game.time,sound:r,soundId:l,vol:s},0==e?W++:z++}else{if(game.time-Y[i].last<100)return;if(o=fe(t.pos),0==e?(s=o*ne[t.type]*.06,t.boost&&(s*=3)):s=.08*o,s<.01)return void Sound.clearThruster(i);if(a=null,0==e&&3==t.type&&(a=te[t.type]+t.speed.length()/20),game.time-Y[i].started<250)return;de(Y[i].soundId,Y[i].sound,null,t.pos,a,[Y[i].vol,s,100,!0]),Y[i].last=game.time,Y[i].vol=s}else null!=Y[i]&&Sound.clearThruster(i)}};var fe=function(e){var t=Graphics.getCamera(),n=Tools.length(e.x-t.x,e.y-t.y),r=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2;return Tools.clamp(1.5*(1-n/r),0,1)},ge=function(e){var t=Graphics.getCamera(),n=e.x-t.x,r=game.halfScreenX/game.scale;return Tools.clamp(.8*n/r,-1,1)};n(211),n(212),n(213)}]);
//# sourceMappingURL=engine.js.map